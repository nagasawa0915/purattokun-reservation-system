<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3: CPUç„¡é™ãƒ«ãƒ¼ãƒ—å¯¾ç­–ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
            background: #f5f5f5;
        }
        .test-container { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            margin: 20px 0; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button { 
            background: #3742fa; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px 10px 5px 0; 
            font-size: 14px;
        }
        .test-button:hover { 
            background: #2f32ff; 
        }
        .danger-button { 
            background: #ff4757; 
        }
        .danger-button:hover { 
            background: #ff3838; 
        }
        .success-button { 
            background: #2ed573; 
        }
        .success-button:hover { 
            background: #17c555; 
        }
        .warning-button { 
            background: #ffa502; 
        }
        .warning-button:hover { 
            background: #ff9500; 
        }
        .status-panel { 
            background: #f8f9fa; 
            padding: 15px; 
            border-left: 4px solid #3742fa; 
            margin: 10px 0; 
            border-radius: 0 5px 5px 0;
        }
        .dashboard { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 20px; 
            margin: 20px 0; 
        }
        .metric-card { 
            background: white; 
            padding: 15px; 
            border-radius: 8px; 
            border-left: 4px solid #2ed573; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .metric-value { 
            font-size: 24px; 
            font-weight: bold; 
            color: #2ed573; 
        }
        .metric-label { 
            color: #666; 
            font-size: 14px; 
            margin-top: 5px; 
        }
        .console-output { 
            background: #1e1e1e; 
            color: #fff; 
            padding: 15px; 
            border-radius: 5px; 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            max-height: 400px; 
            overflow-y: auto; 
            margin: 10px 0;
        }
        .log-entry { 
            margin: 2px 0; 
            padding: 2px 0; 
        }
        .log-error { color: #ff4757; }
        .log-warn { color: #ffa502; }
        .log-success { color: #2ed573; }
        .log-info { color: #3742fa; }
        h1 { color: #333; text-align: center; }
        h2 { color: #3742fa; border-bottom: 2px solid #3742fa; padding-bottom: 10px; }
        .code-snippet { 
            background: #f8f9fa; 
            padding: 10px; 
            border-left: 4px solid #ffa502; 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            margin: 10px 0; 
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸš¨ Phase 3: CPUç„¡é™ãƒ«ãƒ¼ãƒ—å¯¾ç­–ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆç’°å¢ƒ</h1>
    
    <div class="test-container">
        <h2>ğŸ“Š ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
        <div id="dashboard" class="dashboard">
            <div class="metric-card">
                <div class="metric-value" id="cpu-usage">0%</div>
                <div class="metric-label">CPUä½¿ç”¨ç‡æ¨å®š</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="loop-count">0</div>
                <div class="metric-label">ãƒ«ãƒ¼ãƒ—æ¤œå‡ºæ•°</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="brake-status">ç„¡åŠ¹</div>
                <div class="metric-label">ç·Šæ€¥ãƒ–ãƒ¬ãƒ¼ã‚­</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="total-logs">0</div>
                <div class="metric-label">ç·ãƒ­ã‚°æ•°</div>
            </div>
        </div>
        
        <div class="status-panel" id="system-status">
            ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ”§ åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
        <button class="test-button success-button" onclick="testBasicFunctions()">
            âœ… åŸºæœ¬æ©Ÿèƒ½å‹•ä½œç¢ºèª
        </button>
        <button class="test-button" onclick="startCPUMonitoring()">
            âš¡ CPUç›£è¦–é–‹å§‹
        </button>
        <button class="test-button warning-button" onclick="stopCPUMonitoring()">
            â¹ï¸ CPUç›£è¦–åœæ­¢
        </button>
        <button class="test-button" onclick="enableEmergencyBrake()">
            ğŸš¨ ç·Šæ€¥ãƒ–ãƒ¬ãƒ¼ã‚­æœ‰åŠ¹åŒ–
        </button>
        <button class="test-button success-button" onclick="performHealthCheck()">
            ğŸ¥ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
        </button>
    </div>

    <div class="test-container">
        <h2>âš ï¸ å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºãƒ†ã‚¹ãƒˆ</h2>
        <button class="test-button warning-button" onclick="testDangerousPatterns()">
            ğŸ” å±é™ºã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
        </button>
        <button class="test-button danger-button" onclick="testWhileAsyncPattern()">
            ğŸš¨ while+asyncå•é¡Œå†ç¾
        </button>
        <button class="test-button danger-button" onclick="testHighFrequencyLoop()">
            ğŸ”„ é«˜é »åº¦ãƒ«ãƒ¼ãƒ—å•é¡Œå†ç¾
        </button>
        
        <div class="code-snippet" id="dangerous-code-example">
            æ¤œå‡ºå¯¾è±¡ã®å±é™ºã‚³ãƒ¼ãƒ‰ä¾‹:
            <br>while (condition) { await someAsyncFunction(); }
            <br>setInterval(heavyFunction, 5); // 5msé–“éš”
            <br>for (let i = 0; i < 1000000; i++) { /* heavy sync work */ }
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ”„ ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡ºãƒ†ã‚¹ãƒˆ</h2>
        <button class="test-button warning-button" onclick="testInfiniteLoopDetection()">
            ğŸ” ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡ºãƒ†ã‚¹ãƒˆ
        </button>
        <button class="test-button danger-button" onclick="simulateInfiniteLoop()">
            ğŸš¨ ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼ˆå®‰å…¨ç‰ˆï¼‰
        </button>
        <button class="test-button danger-button" onclick="simulateLoadingCompleteLoop()">
            ğŸ”„ isLoadingCompleteç„¡é™ãƒ«ãƒ¼ãƒ—å†ç¾
        </button>
    </div>

    <div class="test-container">
        <h2>ğŸ“‹ ãƒ­ã‚°ãƒ»ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›</h2>
        <button class="test-button" onclick="clearConsoleOutput()">
            ğŸ§¹ è¡¨ç¤ºã‚¯ãƒªã‚¢
        </button>
        <button class="test-button success-button" onclick="updateDashboard()">
            ğŸ”„ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
        </button>
        <div id="console-output" class="console-output">
            <!-- ãƒ­ã‚°å‡ºåŠ›ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
        </div>
    </div>

    <!-- ConsoleManagerèª­ã¿è¾¼ã¿ -->
    <script src="assets/js/console-manager.js"></script>
    
    <script>
        // ==============================
        // Phase 3 ãƒ†ã‚¹ãƒˆåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
        // ==============================
        
        let testState = {
            cpuMonitoringActive: false,
            emergencyBrakeActive: false,
            infiniteLoopCount: 0,
            totalLogs: 0
        };

        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
        function updateDashboard() {
            const dashboard = ConsoleManager.getPerformanceDashboard();
            
            document.getElementById('cpu-usage').textContent = 
                dashboard.cpuMonitoring.currentCPU.toFixed(1) + '%';
            document.getElementById('loop-count').textContent = 
                dashboard.infiniteLoopDetection.monitored;
            document.getElementById('brake-status').textContent = 
                dashboard.emergencyBrake.enabled ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹';
            document.getElementById('total-logs').textContent = 
                dashboard.statistics.totalLogs;
                
            // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®è‰²ã‚’çŠ¶æ…‹ã«å¿œã˜ã¦å¤‰æ›´
            const cpuCard = document.getElementById('cpu-usage').parentElement;
            const cpuValue = dashboard.cpuMonitoring.currentCPU;
            if (cpuValue > 20) {
                cpuCard.style.borderLeftColor = '#ff4757';
                document.getElementById('cpu-usage').style.color = '#ff4757';
            } else if (cpuValue > 15) {
                cpuCard.style.borderLeftColor = '#ffa502';
                document.getElementById('cpu-usage').style.color = '#ffa502';
            } else {
                cpuCard.style.borderLeftColor = '#2ed573';
                document.getElementById('cpu-usage').style.color = '#2ed573';
            }
        }

        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›è¡¨ç¤ºï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®å†…å®¹ã‚’ç”»é¢ã«è¡¨ç¤ºï¼‰
        function addConsoleLog(message, type = 'info') {
            const output = document.getElementById('console-output');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            output.appendChild(logEntry);
            output.scrollTop = output.scrollHeight;
            
            testState.totalLogs++;
        }

        // ==============================
        // åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        // ==============================
        
        function testBasicFunctions() {
            addConsoleLog('ğŸ“‹ åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆé–‹å§‹', 'info');
            
            // Phase 1-3 ã®åŸºæœ¬æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ
            ConsoleManager.log('Phase 1 ãƒ†ã‚¹ãƒˆ: åŸºæœ¬ãƒ­ã‚°å‡ºåŠ›', 'INFO', 'SYSTEM');
            ConsoleManager.success('Phase 1 ãƒ†ã‚¹ãƒˆ: æˆåŠŸãƒ­ã‚°', 'SYSTEM');
            ConsoleManager.warn('Phase 1 ãƒ†ã‚¹ãƒˆ: è­¦å‘Šãƒ­ã‚°', 'SYSTEM');
            
            // Phase 2 æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
            ConsoleManager.startPhase('test-phase');
            ConsoleManager.preserveImportant(['é‡è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ']);
            ConsoleManager.completePhase('test-phase', true);
            
            // Phase 3 æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
            const health = ConsoleManager.performHealthCheck();
            
            addConsoleLog('âœ… åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Œäº†', 'success');
            updateDashboard();
        }

        function startCPUMonitoring() {
            addConsoleLog('âš¡ CPUç›£è¦–é–‹å§‹', 'info');
            
            ConsoleManager.startCPUMonitoring({
                threshold: 15,
                interval: 2000, // 2ç§’é–“éš”ã§ãƒ†ã‚¹ãƒˆ
                alertCallback: (data) => {
                    addConsoleLog(`ğŸš¨ CPUè² è·è­¦å‘Š: ${data.cpu}%`, 'warn');
                    updateDashboard();
                }
            });
            
            testState.cpuMonitoringActive = true;
            updateStatusPanel('CPUç›£è¦–ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ');
        }

        function stopCPUMonitoring() {
            addConsoleLog('â¹ï¸ CPUç›£è¦–åœæ­¢', 'info');
            ConsoleManager.stopCPUMonitoring();
            testState.cpuMonitoringActive = false;
            updateStatusPanel('CPUç›£è¦–ãŒåœæ­¢ã•ã‚Œã¾ã—ãŸ');
        }

        function enableEmergencyBrake() {
            addConsoleLog('ğŸš¨ ç·Šæ€¥ãƒ–ãƒ¬ãƒ¼ã‚­æœ‰åŠ¹åŒ–', 'warn');
            
            ConsoleManager.enableEmergencyBrake({
                cpuThreshold: 20,
                logLimit: 5
            });
            
            testState.emergencyBrakeActive = true;
            updateStatusPanel('ç·Šæ€¥ãƒ–ãƒ¬ãƒ¼ã‚­ã‚·ã‚¹ãƒ†ãƒ ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã—ãŸ');
            updateDashboard();
        }

        function performHealthCheck() {
            addConsoleLog('ğŸ¥ ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ', 'info');
            
            const health = ConsoleManager.performHealthCheck();
            
            addConsoleLog(`ãƒ˜ãƒ«ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${health.status}`, 
                health.status === 'HEALTHY' ? 'success' : 
                health.status === 'WARNING' ? 'warn' : 'error');
                
            if (health.warnings.length > 0) {
                health.warnings.forEach(warning => {
                    addConsoleLog(`âš ï¸ è­¦å‘Š: ${warning}`, 'warn');
                });
            }
            
            if (health.errors.length > 0) {
                health.errors.forEach(error => {
                    addConsoleLog(`âŒ ã‚¨ãƒ©ãƒ¼: ${error}`, 'error');
                });
            }
            
            updateDashboard();
        }

        // ==============================
        // å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºãƒ†ã‚¹ãƒˆ
        // ==============================
        
        function testDangerousPatterns() {
            addConsoleLog('ğŸ” å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºãƒ†ã‚¹ãƒˆé–‹å§‹', 'info');
            
            const dangerousCode = `
                // å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³1: while + async/await
                while (isLoading) {
                    await checkStatus();
                    console.log('waiting...');
                }
                
                // å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³2: é«˜é »åº¦setInterval
                setInterval(heavyFunction, 5);
                
                // å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³3: é‡ã„åŒæœŸå‡¦ç†
                for (let i = 0; i < 1000000; i++) {
                    someHeavyCalculation();
                    processData(i);
                }
            `;
            
            const patterns = ConsoleManager.detectDangerousPattern(dangerousCode);
            
            addConsoleLog(`æ¤œå‡ºã•ã‚ŒãŸå±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³: ${patterns.length}ä»¶`, 
                patterns.length > 0 ? 'warn' : 'success');
                
            patterns.forEach(pattern => {
                addConsoleLog(`ğŸš¨ ${pattern.name}: ${pattern.description}`, 'warn');
                addConsoleLog(`ğŸ’¡ æ¨å¥¨: ${pattern.recommendation}`, 'info');
            });
        }

        function testWhileAsyncPattern() {
            addConsoleLog('ğŸš¨ while+asyncå•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºãƒ†ã‚¹ãƒˆ', 'warn');
            
            const whileAsyncCode = `
                while (condition) {
                    await someAsyncFunction();
                }
            `;
            
            const patterns = ConsoleManager.detectDangerousPattern(whileAsyncCode);
            addConsoleLog(`while+asyncãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: ${patterns.length > 0 ? 'YES' : 'NO'}`, 
                patterns.length > 0 ? 'error' : 'success');
        }

        function testHighFrequencyLoop() {
            addConsoleLog('ğŸ”„ é«˜é »åº¦ãƒ«ãƒ¼ãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºãƒ†ã‚¹ãƒˆ', 'warn');
            
            const highFreqCode = `
                setInterval(updateUI, 1);
                setInterval(processData, 5);
            `;
            
            const patterns = ConsoleManager.detectDangerousPattern(highFreqCode);
            addConsoleLog(`é«˜é »åº¦ãƒ«ãƒ¼ãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: ${patterns.length > 0 ? 'YES' : 'NO'}`, 
                patterns.length > 0 ? 'error' : 'success');
        }

        // ==============================
        // ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡ºãƒ†ã‚¹ãƒˆ
        // ==============================
        
        function testInfiniteLoopDetection() {
            addConsoleLog('ğŸ” ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ', 'info');
            
            // ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ç™»éŒ²
            ConsoleManager.detectInfiniteLoop('testMethod', { maxCalls: 10, timeWindow: 2000 });
            
            addConsoleLog('ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ãŒè¨­å®šã•ã‚Œã¾ã—ãŸï¼ˆtestMethod: 10å›/2ç§’ï¼‰', 'info');
            updateDashboard();
        }

        function simulateInfiniteLoop() {
            addConsoleLog('ğŸš¨ ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆé–‹å§‹ï¼ˆå®‰å…¨ç‰ˆï¼‰', 'warn');
            
            // å®‰å…¨ãªç„¡é™ãƒ«ãƒ¼ãƒ—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            let count = 0;
            const maxIterations = 35; // ç¢ºå®Ÿã«æ¤œå‡ºã•ã‚Œã‚‹ã‚ˆã†ã«30å›ã‚ˆã‚Šå¤šã
            
            const simulateLoop = () => {
                if (count >= maxIterations) {
                    addConsoleLog('å®‰å…¨ç‰ˆç„¡é™ãƒ«ãƒ¼ãƒ—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆå®Œäº†', 'success');
                    return;
                }
                
                // ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡ºå‘¼ã³å‡ºã—
                const detected = ConsoleManager.detectInfiniteLoop('simulateMethod', { 
                    maxCalls: 25, 
                    timeWindow: 3000 
                });
                
                if (detected) {
                    addConsoleLog(`ğŸ”„ ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡º! (${count + 1}å›ç›®)`, 'error');
                    testState.infiniteLoopCount++;
                }
                
                count++;
                
                // çŸ­ã„é–“éš”ã§æ¬¡ã®å‘¼ã³å‡ºã—ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
                setTimeout(simulateLoop, 50); // 50msé–“éš”ã§å‘¼ã³å‡ºã—
            };
            
            simulateLoop();
            updateDashboard();
        }

        function simulateLoadingCompleteLoop() {
            addConsoleLog('ğŸ”„ isLoadingCompleteç„¡é™ãƒ«ãƒ¼ãƒ—å†ç¾ãƒ†ã‚¹ãƒˆ', 'error');
            
            // ä»Šå›çµŒé¨“ã—ãŸå®Ÿéš›ã®å•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®‰å…¨ã«å†ç¾
            let loadingCheckCount = 0;
            const maxChecks = 40; // 30å›ã®åˆ¶é™ã‚’è¶…ãˆã¦ãƒ†ã‚¹ãƒˆ
            
            const checkLoadingComplete = () => {
                if (loadingCheckCount >= maxChecks) {
                    addConsoleLog('isLoadingCompleteå†ç¾ãƒ†ã‚¹ãƒˆå®Œäº†', 'success');
                    return;
                }
                
                // å®Ÿéš›ã®å•é¡Œã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                const detected = ConsoleManager.detectInfiniteLoop('isLoadingComplete', { 
                    maxCalls: 30, 
                    timeWindow: 3000 
                });
                
                if (detected && loadingCheckCount > 25) {
                    addConsoleLog('ğŸš¨ isLoadingCompleteç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡º!', 'error');
                    
                    // ç·Šæ€¥ãƒ–ãƒ¬ãƒ¼ã‚­ã®è‡ªå‹•æœ‰åŠ¹åŒ–ã‚’ãƒ†ã‚¹ãƒˆ
                    if (!testState.emergencyBrakeActive) {
                        addConsoleLog('ğŸš¨ ç·Šæ€¥ãƒ–ãƒ¬ãƒ¼ã‚­è‡ªå‹•æœ‰åŠ¹åŒ–', 'warn');
                        testState.emergencyBrakeActive = true;
                    }
                }
                
                loadingCheckCount++;
                
                // å®Ÿéš›ã®å•é¡Œã¨åŒã˜ã‚ˆã†ãªé«˜é »åº¦å‘¼ã³å‡ºã—
                setTimeout(checkLoadingComplete, 30); // 30msé–“éš”
            };
            
            checkLoadingComplete();
            updateDashboard();
        }

        // ==============================
        // UIåˆ¶å¾¡
        // ==============================
        
        function clearConsoleOutput() {
            document.getElementById('console-output').innerHTML = '';
            addConsoleLog('ğŸ§¹ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤ºã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', 'info');
        }

        function updateStatusPanel(message) {
            document.getElementById('system-status').textContent = message;
        }

        // ==============================
        // åˆæœŸåŒ–
        // ==============================
        
        document.addEventListener('DOMContentLoaded', function() {
            addConsoleLog('ğŸ“‹ Phase 3 ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆæœŸåŒ–å®Œäº†', 'success');
            updateStatusPanel('Phase 3 CPUç„¡é™ãƒ«ãƒ¼ãƒ—å¯¾ç­–ã‚·ã‚¹ãƒ†ãƒ  - æº–å‚™å®Œäº†');
            
            // åˆæœŸãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
            setTimeout(updateDashboard, 1000);
            
            // å®šæœŸçš„ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
            setInterval(updateDashboard, 5000); // 5ç§’ã”ã¨
        });

        // ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ãƒ­ã‚°ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ç”»é¢ã«è¡¨ç¤º
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addConsoleLog(args.join(' '), 'info');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addConsoleLog(args.join(' '), 'warn');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addConsoleLog(args.join(' '), 'error');
        };
    </script>
</body>
</html>