<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>デバッグ版 - ぷらっとくん｜クラウドパートナー</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background: #f0f0f0;
        }
        .debug-status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .loading { background: #fff3cd; color: #856404; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>🔧 index.html デバッグ版</h1>
    
    <div id="status-basic" class="debug-status loading">基本HTML読み込み中...</div>
    <div id="status-js" class="debug-status loading">JavaScript初期化中...</div>
    <div id="status-spine" class="debug-status loading">Spine読み込み待機中...</div>
    
    <h2>問題の切り分け</h2>
    <p>このページが正常に読み込まれれば、問題はindex.htmlの特定のコードにあります。</p>
    
    <!-- 🚨 重要: 外部スクリプトを段階的に追加してテスト -->
    
    <!-- Step 1: 基本Spine CDN のみ -->
    <script src="https://unpkg.com/@esotericsoftware/spine-webgl@4.1.23/dist/iife/spine-webgl.js"></script>
    
    <!-- Step 2: 基本スクリプト（コメントアウトでテスト）-->
    <!-- <script src="assets/js/script.js?v=20250802"></script> -->
    
    <script>
        console.log('🚀 デバッグ版読み込み開始');
        
        // 基本HTML読み込み完了
        document.getElementById('status-basic').className = 'debug-status success';
        document.getElementById('status-basic').textContent = '基本HTML読み込み完了';
        
        // JavaScript初期化
        document.getElementById('status-js').className = 'debug-status success';
        document.getElementById('status-js').textContent = 'JavaScript初期化完了';
        
        // Spine読み込み待機（簡略化版）
        let spineCheckCount = 0;
        const maxSpineCheck = 25; // 5秒間隔
        
        function checkSpine() {
            spineCheckCount++;
            
            if (typeof spine !== 'undefined' && spine.AssetManager) {
                document.getElementById('status-spine').className = 'debug-status success';
                document.getElementById('status-spine').textContent = 'Spine WebGL読み込み完了';
                console.log('✅ Spine読み込み完了');
            } else if (spineCheckCount > maxSpineCheck) {
                document.getElementById('status-spine').className = 'debug-status error';
                document.getElementById('status-spine').textContent = 'Spine読み込みタイムアウト (5秒)';
                console.log('❌ Spine読み込みタイムアウト');
            } else {
                console.log('⏳ Spine読み込み待機中...', spineCheckCount, '/', maxSpineCheck);
                setTimeout(checkSpine, 200);
            }
        }
        
        // 短時間でタイムアウトするSpine チェック開始
        setTimeout(checkSpine, 100);
        
        console.log('📝 デバッグ版読み込み完了');
    </script>
</body>
</html>