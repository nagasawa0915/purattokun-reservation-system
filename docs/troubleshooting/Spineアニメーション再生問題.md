---
title: Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿå•é¡Œ
status: è§£æ±ºæ¸ˆã¿
tags: [Spine, ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³, ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š, Canvas, UI]
aliases:
  - ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šæ”¹å–„
  - Canvaså…¨ä½“ã‚¯ãƒªãƒƒã‚¯å•é¡Œ
  - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒä½ç½®ã§ã®ã‚¯ãƒªãƒƒã‚¯
  - animation not playing
  - click detection improvement
created: 2025-01-28
updated: 2025-01-28
---

# ðŸŽ¯ Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿå•é¡Œ

## ðŸ“Š ç¾åœ¨ã®çŠ¶æ³
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è§£æ±ºæ¸ˆã¿ - ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šã®ç²¾å¯†åŒ–ã«ã‚ˆã‚Šè‡ªç„¶ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å®Ÿç¾

## âš¡ æœ‰åŠ¹ãªè§£æ±ºç­–ãƒ»å›žé¿ç­–

### è§£æ±ºç­–1: è¨ºæ–­ãƒ„ãƒ¼ãƒ« - ã‚¯ãƒªãƒƒã‚¯ç¯„å›²ã®å¯è¦–åŒ–
```javascript
// F12ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ - ç¾åœ¨ã®ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šç¯„å›²ã‚’ç¢ºèª
function debugClickArea() {
    const canvas = document.querySelector('#hero-purattokun');
    if (!canvas) return;
    
    const rect = canvas.getBoundingClientRect();
    console.log('Canvaså…¨ä½“ã‚µã‚¤ã‚º:', rect.width, 'x', rect.height);
    console.log('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æŽ¨å®šä½ç½®:', {
        x: rect.width * 0.5,
        y: rect.height * 0.6
    });
}
```

### è§£æ±ºç­–2: ç²¾å¯†ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šã®å®Ÿè£…
```javascript
// ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒä½ç½®ã®ã¿ã§ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š
canvas.addEventListener('click', function(event) {
    const rect = canvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    
    // æ­£è¦åŒ–åº§æ¨™ï¼ˆ0.0-1.0ï¼‰
    const normalizedX = x / rect.width;
    const normalizedY = y / rect.height;
    
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ï¼ˆä¸­å¤®50%, 60%ï¼‰ã€ã‚µã‚¤ã‚ºï¼ˆæ¨ª40% Ã— ç¸¦50%ï¼‰
    if (normalizedX >= 0.3 && normalizedX <= 0.7 && 
        normalizedY >= 0.35 && normalizedY <= 0.85) {
        console.log('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼');
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿå‡¦ç†
        playClickAnimation();
    }
});
```

### è§£æ±ºç­–3: ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ä»˜ãæ”¹è‰¯ç‰ˆ
```javascript
// ã‚ˆã‚Šè©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±ä»˜ããƒãƒ¼ã‚¸ãƒ§ãƒ³
function setupImprovedClickDetection() {
    const canvas = document.querySelector('#hero-purattokun');
    
    canvas.addEventListener('click', function(event) {
        const rect = canvas.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        
        const normalizedX = x / rect.width;
        const normalizedY = y / rect.height;
        
        console.log('ã‚¯ãƒªãƒƒã‚¯åº§æ¨™:', {
            actual: {x, y},
            normalized: {x: normalizedX, y: normalizedY},
            inCharacterArea: (normalizedX >= 0.3 && normalizedX <= 0.7 && 
                            normalizedY >= 0.35 && normalizedY <= 0.85)
        });
        
        if (normalizedX >= 0.3 && normalizedX <= 0.7 && 
            normalizedY >= 0.35 && normalizedY <= 0.85) {
            playClickAnimation();
        }
    });
}
```

## ðŸ” å•é¡Œã®è©³ç´°

### ç™ºç”Ÿæ¡ä»¶
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã·ã‚‰ã£ã¨ãã‚“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã‚ˆã†ã¨ã™ã‚‹æ™‚
- Canvasè¦ç´ å…¨ä½“ãŒã‚¯ãƒªãƒƒã‚¯åˆ¤å®šç¯„å›²ã«ãªã£ã¦ã„ã‚‹
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãªã„éƒ¨åˆ†ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå†ç”Ÿã•ã‚Œã‚‹

### ç—‡çŠ¶
- Canvaså…¨ä½“ã®ã©ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå†ç”Ÿã•ã‚Œã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œç©ºã®éƒ¨åˆ†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚åå¿œã—ã¦ã—ã¾ã†
- ç›´æ„Ÿçš„ã§ãªã„ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ä½“é¨“

### ç’°å¢ƒæƒ…å ±
- å½±éŸ¿: å…¨ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChrome, Firefox, Safari, Edgeï¼‰
- ãƒ‡ãƒã‚¤ã‚¹: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ãƒ¢ãƒã‚¤ãƒ«ä¸¡æ–¹
- ç™ºç”Ÿå ´æ‰€: `index.html`ã®æœ¬ç•ªã‚µã‚¤ãƒˆ

## ðŸ“ è©¦è¡ŒéŒ¯èª¤ã®å±¥æ­´

### âœ… Case #1: 2025-01-28 - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ã§ã®ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šå®Ÿè£…

**å•é¡Œ**: Canvaså…¨ä½“ãŒã‚¯ãƒªãƒƒã‚¯åˆ¤å®šç¯„å›²ã«ãªã£ã¦ãŠã‚Šã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãªã„éƒ¨åˆ†ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå†ç”Ÿã•ã‚Œã‚‹

**è©¦ã—ãŸæ–¹æ³•**: 
```javascript
// å¾“æ¥ã®Canvaså…¨ä½“ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š
canvas.addEventListener('click', function() {
    playClickAnimation(); // ã©ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚å†ç”Ÿ
});

// æ”¹è‰¯ç‰ˆï¼šã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒä½ç½®ã®ã¿
canvas.addEventListener('click', function(event) {
    const rect = canvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    
    const normalizedX = x / rect.width;
    const normalizedY = y / rect.height;
    
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å®Ÿéš›ã®è¡¨ç¤ºä½ç½®ã§åˆ¤å®š
    if (normalizedX >= 0.3 && normalizedX <= 0.7 && 
        normalizedY >= 0.35 && normalizedY <= 0.85) {
        console.log('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ åº§æ¨™:', {x, y});
        playClickAnimation();
    } else {
        console.log('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ åº§æ¨™:', {x, y});
    }
});
```

**çµæžœ**: âœ… å®Œå…¨ã«è§£æ±º - ã‚ˆã‚Šè‡ªç„¶ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å®Ÿç¾

**åŽŸå› æŽ¨æ¸¬/å­¦ã³**: 
- Canvasè¦ç´ å…¨ä½“ã§ã¯ãªãã€å®Ÿéš›ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤ºä½ç½®ã§ã®åˆ¤å®šãŒé‡è¦
- `event.clientX/Y`ã¨`getBoundingClientRect()`ã«ã‚ˆã‚‹åº§æ¨™è¨ˆç®—ã§ç²¾å¯†ãªç¯„å›²æŒ‡å®šãŒå¯èƒ½
- æ­£è¦åŒ–åº§æ¨™ï¼ˆ0.0-1.0ï¼‰ã‚’ä½¿ã†ã“ã¨ã§ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚‚è‡ªå‹•çš„ã«å®Ÿç¾

**ç’°å¢ƒ**: Chrome 120, Firefox 121, Safari 17, localhost:8000

### âœ… Case #2: 2025-01-28 - ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã®è¿½åŠ 

**å•é¡Œ**: ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šã®å‹•ä½œã‚’å¯è¦–åŒ–ã—ã¦ã€èª¿æ•´ã—ã‚„ã™ãã—ãŸã„

**è©¦ã—ãŸæ–¹æ³•**: 
```javascript
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã«ã‚ˆã‚‹ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½
console.log('ã‚¯ãƒªãƒƒã‚¯åº§æ¨™:', {
    actual: {x, y},
    normalized: {x: normalizedX, y: normalizedY},
    inCharacterArea: (normalizedX >= 0.3 && normalizedX <= 0.7 && 
                    normalizedY >= 0.35 && normalizedY <= 0.85)
});
```

**çµæžœ**: âœ… åŠ¹æžœã‚ã‚Š - é–‹ç™ºãƒ»èª¿æ•´ãŒå¤§å¹…ã«åŠ¹çŽ‡åŒ–

**åŽŸå› æŽ¨æ¸¬/å­¦ã³**: 
- ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åº§æ¨™ç¢ºèªã«ã‚ˆã‚Šã€åˆ¤å®šç¯„å›²ã®å¾®èª¿æ•´ãŒå®¹æ˜“
- æ­£è¦åŒ–åº§æ¨™ã®è¡¨ç¤ºã«ã‚ˆã‚Šã€ç•°ãªã‚‹ç”»é¢ã‚µã‚¤ã‚ºã§ã®å‹•ä½œç¢ºèªãŒå¯èƒ½
- `inCharacterArea`ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚Šã€åˆ¤å®šçµæžœãŒä¸€ç›®ã§åˆ†ã‹ã‚‹

**ç’°å¢ƒ**: é–‹ç™ºæ™‚ã®ãƒ‡ãƒãƒƒã‚°ç”¨é€”ã€å…¨ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ

### âœ… Case #3: 2025-01-28 - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ãƒ»ã‚µã‚¤ã‚ºã®æœ€é©åŒ–

**å•é¡Œ**: ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šç¯„å›²ã‚’ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å®Ÿéš›ã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦èª¿æ•´

**è©¦ã—ãŸæ–¹æ³•**: 
```javascript
// ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®åˆ†æž
console.log('æŽ¨å®šã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç¯„å›²:');
console.log('- ä¸­å¿ƒç‚¹: Canvasä¸­å¤®50%, 60%');
console.log('- æ¨ªå¹…: 40% (30%-70%)');  
console.log('- ç¸¦å¹…: 50% (35%-85%)');

// åˆ¤å®šæ¡ä»¶
const inCharacterArea = (
    normalizedX >= 0.3 && normalizedX <= 0.7 &&  // æ¨ª40%
    normalizedY >= 0.35 && normalizedY <= 0.85   // ç¸¦50%
);
```

**çµæžœ**: âœ… å®Œå…¨ã«è§£æ±º - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ä½“æ„Ÿã‚µã‚¤ã‚ºã¨ä¸€è‡´

**åŽŸå› æŽ¨æ¸¬/å­¦ã³**: 
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®è¦–è¦šçš„ãªã‚µã‚¤ã‚ºã‚’è€ƒæ…®ã—ãŸåˆ¤å®šç¯„å›²è¨­å®šãŒé‡è¦
- å°‘ã—å¤§ãã‚ã®ç¯„å›²ï¼ˆå®Ÿéš›ã‚ˆã‚Š5-10%ãƒžãƒ¼ã‚¸ãƒ³ï¼‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š
- Canvasä¸­å¤®é…ç½®ï¼ˆtransform: translate(-50%, -50%)ï¼‰ã‚’è€ƒæ…®ã—ãŸåº§æ¨™è¨ˆç®—

**ç’°å¢ƒ**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ãƒ¢ãƒã‚¤ãƒ«ä¸¡æ–¹ã§æ¤œè¨¼æ¸ˆã¿

## ðŸŽ¯ å®Ÿè£…åŠ¹æžœ

### æ”¹å–„å‰
- Canvaså…¨ä½“ï¼ˆ100% Ã— 100%ï¼‰ãŒã‚¯ãƒªãƒƒã‚¯åˆ¤å®š
- ç›´æ„Ÿçš„ã§ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚åå¿œ

### æ”¹å–„å¾Œ  
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒä½ç½®ï¼ˆ40% Ã— 50%ï¼‰ã®ã¿ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š
- è‡ªç„¶ã§ç›´æ„Ÿçš„ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã«ã‚ˆã‚Šé–‹ç™ºåŠ¹çŽ‡å‘ä¸Š

### æŠ€è¡“çš„ãªæ”¹å–„ç‚¹
- **åº§æ¨™è¨ˆç®—**: `event.clientX/Y` + `getBoundingClientRect()`
- **æ­£è¦åŒ–åº§æ¨™**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã®è‡ªå‹•å®Ÿç¾
- **ç²¾å¯†ãªç¯„å›²æŒ‡å®š**: è¦–è¦šçš„ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚µã‚¤ã‚ºã«åˆè‡´
- **ãƒ‡ãƒãƒƒã‚°æ”¯æ´**: é–‹ç™ºãƒ»èª¿æ•´ã®åŠ¹çŽ‡åŒ–

## ðŸš€ ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§

### å¿œç”¨å¯èƒ½ãªæ”¹å–„
- è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒã„ã‚‹å ´åˆã®å€‹åˆ¥åˆ¤å®š
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã«ã‚ˆã‚‹åˆ¤å®šç¯„å›²å¤‰æ›´
- ãƒžã‚¦ã‚¹ãƒ›ãƒãƒ¼æ™‚ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ã§ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å¯¾å¿œ

### ä»–ã®å•é¡Œã¸ã®é©ç”¨
- Canvasè¦ç´ ã‚’ä½¿ã£ãŸä»–ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ 
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œãŒå¿…è¦ãªã‚¯ãƒªãƒƒã‚¯åˆ¤å®šå…¨èˆ¬
- ã‚²ãƒ¼ãƒ çš„ãªè¦ç´ ã‚’æŒã¤UIå®Ÿè£…