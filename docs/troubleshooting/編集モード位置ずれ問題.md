---
title: ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ãŒãšã‚Œã‚‹å•é¡Œ
status: è§£æ±ºæ¸ˆã¿
tags: [ä½ç½®, ãƒ¬ã‚¤ãƒ¤ãƒ¼, ç·¨é›†ã‚·ã‚¹ãƒ†ãƒ , Canvas]
aliases: 
  - ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§æ ãŒãšã‚Œã‚‹
  - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç·¨é›†ã§é•ã†å ´æ‰€ã«æ ãŒå‡ºã‚‹
  - edit mode position mismatch
created: 2025-01-27
updated: 2025-01-27
---

# ğŸ¯ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ãŒãšã‚Œã‚‹å•é¡Œ

## ğŸ“Š ç¾åœ¨ã®çŠ¶æ³
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è§£æ±ºæ¸ˆã¿ - ç·¨é›†Canvasä½œæˆæ™‚ã®ä½ç½®è¨ˆç®—ã‚’ä¿®æ­£ã—ã¦è§£æ±º

## âš¡ æœ‰åŠ¹ãªè§£æ±ºç­–ãƒ»å›é¿ç­–

### è§£æ±ºç­–1: è¨ºæ–­ãƒ„ãƒ¼ãƒ« - ç·¨é›†ãƒ¢ãƒ¼ãƒ‰èµ·å‹•æ™‚ã®è¦ç´ ç¢ºèª
```javascript
// F12ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
console.log('ğŸ” ç·¨é›†ãƒ¢ãƒ¼ãƒ‰è¨ºæ–­é–‹å§‹...');
const character = document.querySelector('#purattokun-canvas');
const charRect = character.getBoundingClientRect();
console.log('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®:', {
    left: charRect.left,
    top: charRect.top,
    width: charRect.width,
    height: charRect.height,
    style: {
        left: character.style.left,
        top: character.style.top,
        transform: character.style.transform
    }
});
```

### è§£æ±ºç­–2: spine-positioning-system-explanation.js ã®ä¿®æ­£
ç·¨é›†Canvasä½œæˆæ™‚ã«å®Ÿéš›ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ã‚’æ­£ç¢ºã«å–å¾—ã—ã€ç·¨é›†çµ‚äº†æ™‚ã«å…ƒã®ä½ç½®ã«æˆ»ã™å‡¦ç†ã‚’å®Ÿè£…ï¼š

```javascript
// createCharacterCanvasé–¢æ•°ã®ä¿®æ­£
function createCharacterCanvas() {
    characterCanvas = document.querySelector('.character-canvas');
    if (!characterCanvas) {
        characterCanvas = document.createElement('div');
        characterCanvas.className = 'character-canvas';
        characterCanvas.id = 'character-canvas-edit';
        
        // ã·ã‚‰ã£ã¨ãã‚“ã®å®Ÿéš›ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’å–å¾—
        const charRect = character.getBoundingClientRect();
        const parentRect = character.parentElement.getBoundingClientRect();
        
        // ç·¨é›†ç”¨Canvasã‚’ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ä½ç½®ã«é…ç½®
        characterCanvas.style.position = 'absolute';
        characterCanvas.style.left = (charRect.left - parentRect.left) + 'px';
        characterCanvas.style.top = (charRect.top - parentRect.top) + 'px';
        characterCanvas.style.width = charRect.width + 'px';
        characterCanvas.style.height = charRect.height + 'px';
        characterCanvas.style.transform = 'none';
        
        // è¦ªè¦ç´ ã«è¿½åŠ ã—ã¦ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ä¸­ã«ç§»å‹•
        const parent = character.parentElement;
        parent.appendChild(characterCanvas);
        characterCanvas.appendChild(character);
        
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ä½ç½®ã‚’ç·¨é›†Canvaså†…ã§ã®ç›¸å¯¾ä½ç½®ã«èª¿æ•´
        character.style.position = 'absolute';
        character.style.left = '50%';
        character.style.top = '50%';
        character.style.transform = 'translate(-50%, -50%)';
        
        // ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ«è¿½åŠ ...
    }
}
```

### è§£æ±ºç­–3: ç·¨é›†çµ‚äº†æ™‚ã®ä½ç½®å¾©å…ƒå‡¦ç†
```javascript
// endEditModeé–¢æ•°ã®ä¿®æ­£
function endEditMode() {
    if (characterCanvas && character) {
        const originalParent = document.querySelector('.hero-content') || document.body;
        
        // å…ƒã®è¦ªè¦ç´ ã«æˆ»ã™
        originalParent.appendChild(character);
        
        // ç·¨é›†Canvaså†…ã§ã®ä½ç½®ã‹ã‚‰å…ƒã®ä½ç½®ã‚’è¨ˆç®—ã—ã¦å¾©å…ƒ
        // ï¼ˆè©³ç´°ãªè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¯å®Ÿè£…æ¸ˆã¿ï¼‰
        
        // ç·¨é›†Canvasã‚’å‰Šé™¤
        if (characterCanvas.parentElement) {
            characterCanvas.parentElement.removeChild(characterCanvas);
        }
        characterCanvas = null;
    }
    // ãã®ä»–ã®çµ‚äº†å‡¦ç†...
}
```

## ğŸ” å•é¡Œã®è©³ç´°
### ç™ºç”Ÿæ¡ä»¶
- index.html?edit=true ã§ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹ã„ãŸæ™‚
- ã€Œã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç·¨é›†ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚

### ç—‡çŠ¶
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼ˆã·ã‚‰ã£ã¨ãã‚“ï¼‰ãŒã„ã‚‹ä½ç½®ã¨é•ã†å ´æ‰€ã«ç·¨é›†æ ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- ç·¨é›†æ ãŒç”»é¢ã®åˆ¥ã®å ´æ‰€ã«å‡ºç¾ã™ã‚‹

### ç’°å¢ƒæƒ…å ±
- ãƒ–ãƒ©ã‚¦ã‚¶: å…¨ãƒ–ãƒ©ã‚¦ã‚¶ã§ç™ºç”Ÿ
- index.html ã®æœ¬ç•ªç’°å¢ƒã§ã®ç·¨é›†ãƒ¢ãƒ¼ãƒ‰

## ğŸ“ è©¦è¡ŒéŒ¯èª¤ã®å±¥æ­´

### âœ… Case #1: 2025-01-27 - ç·¨é›†Canvasä½œæˆæ™‚ã®ä½ç½®è¨ˆç®—ä¿®æ­£

**å•é¡Œ**: ç·¨é›†ãƒ¢ãƒ¼ãƒ‰é–‹å§‹æ™‚ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å®Ÿéš›ã®ä½ç½®ã¨ç·¨é›†æ ã®ä½ç½®ãŒãšã‚Œã‚‹

**è©¦ã—ãŸæ–¹æ³•**: 
```javascript
// spine-positioning-system-explanation.js ã® createCharacterCanvas é–¢æ•°ã‚’ä¿®æ­£
// ä¿®æ­£å‰ï¼šç·¨é›†Canvasã®ä½ç½®ã‚’å›ºå®šå€¤ã§ä½œæˆ
// ä¿®æ­£å¾Œï¼šå®Ÿéš›ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½ç½®ã‚’å–å¾—ã—ã¦ç·¨é›†Canvasã‚’é…ç½®

const charRect = character.getBoundingClientRect();
const parentRect = character.parentElement.getBoundingClientRect();

characterCanvas.style.left = (charRect.left - parentRect.left) + 'px';
characterCanvas.style.top = (charRect.top - parentRect.top) + 'px';
characterCanvas.style.width = charRect.width + 'px';
characterCanvas.style.height = charRect.height + 'px';
```

**çµæœ**: âœ… å®Œå…¨ã«è§£æ±º

**åŸå› æ¨æ¸¬/å­¦ã³**: 
- ç·¨é›†ã‚·ã‚¹ãƒ†ãƒ ã¯`#purattokun-canvas`ã®ä½ç½®ã‚’è¦ªè¦ç´ ã‹ã‚‰ã®ç›¸å¯¾ä½ç½®ã¨ã—ã¦è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸ
- index.htmlã§ã¯ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆä½ç½®ï¼ˆ18%, 49%ï¼‰ã§é…ç½®ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å®Ÿéš›ã®ä½ç½®ã‚’æ­£ç¢ºã«å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸ
- ç·¨é›†çµ‚äº†æ™‚ã«ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å…ƒã®è¦ªè¦ç´ ã«æˆ»ã™å‡¦ç†ã‚‚å¿…è¦ã ã£ãŸ

**ç’°å¢ƒ**: Chrome/Firefox/Edge, Windows/Mac, localhost:8000

