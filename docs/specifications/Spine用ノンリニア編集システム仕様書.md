# Spineç”¨ãƒãƒ³ãƒªãƒ‹ã‚¢ç·¨é›†ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸

**ä»•æ§˜æ›¸å**: Spineç”¨ãƒãƒ³ãƒªãƒ‹ã‚¢ç·¨é›†ï¼ˆTraxé¢¨ï¼‰ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ   
**å¯¾è±¡ç’°å¢ƒ**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªï¼ˆElectronï¼‰  
**ä½œæˆæ—¥**: 2025-08-10  
**æœ€çµ‚æ›´æ–°**: 2025-08-10  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨­è¨ˆä»•æ§˜æ›¸ãƒ»å®Ÿè£…æº–å‚™å®Œäº†

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ãƒ»ç›®çš„](#ğŸ“Š-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ãƒ»ç›®çš„)
2. [UIè¨­è¨ˆï¼ˆå®Œå…¨ç‹¬è‡ªãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰](#ğŸ¨-uiè¨­è¨ˆå®Œå…¨ç‹¬è‡ªãƒ‡ã‚¶ã‚¤ãƒ³)
3. [æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œï¼‰](#ğŸ—ï¸-æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ)
4. [æ©Ÿèƒ½è©³ç´°ä»•æ§˜](#âš™ï¸-æ©Ÿèƒ½è©³ç´°ä»•æ§˜)
5. [æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆæ–¹æ³•](#ğŸ”„-æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆæ–¹æ³•)
6. [ãƒ™ã‚¤ã‚¯å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ ](#ğŸ“¦-ãƒ™ã‚¤ã‚¯å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ )
7. [é–‹ç™ºè¨ˆç”»ãƒ»Phaseåˆ†ã‘](#ğŸ“…-é–‹ç™ºè¨ˆç”»phaseåˆ†ã‘)
8. [å“è³ªä¿è¨¼ãƒ»ãƒ†ã‚¹ãƒˆé …ç›®](#âœ…-å“è³ªä¿è¨¼ãƒ†ã‚¹ãƒˆé …ç›®)

---

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ãƒ»ç›®çš„

### ğŸ¯ ãƒ“ã‚¸ãƒã‚¹ç›®çš„
**Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶ä½œâ†’ç´å“ã¾ã§ã®å®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ãŠã‘ã‚‹ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç·¨é›†ã®è‡ªå‹•åŒ–**

```mermaid
graph TD
    A[Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶ä½œ] --> B[ãƒãƒ³ãƒªãƒ‹ã‚¢ç·¨é›†ã‚·ã‚¹ãƒ†ãƒ ]
    B --> C[è¤‡é›‘ãªæ¼”å‡ºã‚·ãƒ¼ã‚±ãƒ³ã‚¹ä½œæˆ]
    C --> D[ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]
    D --> E[ãƒ™ã‚¤ã‚¯å‡ºåŠ›]
    E --> F[ãŠå®¢æ§˜ç´å“ç”¨è»½é‡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸]
```

### ğŸ’¼ å•†ç”¨åˆ¶ä½œãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã®ä¾¡å€¤
1. **ğŸ¨ åˆ¶ä½œãƒ•ã‚§ãƒ¼ã‚º**: ãƒ—ãƒ­ãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç·¨é›†ï¼ˆMaya Traxç›¸å½“ï¼‰
2. **ğŸ”§ èª¿æ•´ãƒ•ã‚§ãƒ¼ã‚º**: è¤‡é›‘ãªæ¼”å‡ºã®ç²¾å¯†åˆ¶å¾¡
3. **ğŸ“¤ ç´å“ãƒ•ã‚§ãƒ¼ã‚º**: è»½é‡ãªå†ç”Ÿå°‚ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›
4. **âœ… é‹ç”¨ãƒ•ã‚§ãƒ¼ã‚º**: ãŠå®¢æ§˜ç’°å¢ƒã§ã®é«˜å“è³ªå†ç”Ÿ

### ğŸ“ æŠ€è¡“è¦ä»¶ãƒ»åˆ¶ç´„
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª**: Electronãƒ™ãƒ¼ã‚¹ã®ç‹¬ç«‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- **è‘—ä½œæ¨©å¯¾å¿œ**: Maya Traxã‚„Unityã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’ç›´æ¥æ¨¡å€£ã—ãªã„ç‹¬è‡ªUI
- **è»½é‡æ€§**: 2ã¤ã®Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ + ãƒ–ãƒ¬ãƒ³ãƒ‰é ˜åŸŸã§ã®åŸºæœ¬æ©Ÿèƒ½
- **æ—¢å­˜çµ±åˆ**: é…ç½®ã‚·ã‚¹ãƒ†ãƒ ï¼ˆWhereï¼‰+ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ï¼ˆWhenï¼‰ã®çµ±åˆ

---

## ğŸ¨ UIè¨­è¨ˆï¼ˆå®Œå…¨ç‹¬è‡ªãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰

### ğŸ­ ç‹¬è‡ªãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ã‚»ãƒ—ãƒˆã€ŒTheater Studioã€

Maya Traxã‚„Unityã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¨ã¯å®Œå…¨ã«ç•°ãªã‚‹ã€**åŠ‡å ´ãƒ»èˆå°æ¼”å‡º**ã‚’ãƒ¢ãƒãƒ¼ãƒ•ã¨ã—ãŸç‹¬è‡ªUIè¨­è¨ˆã€‚

#### **åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ­ Theater Studio - Spine Timeline Editor          [File][Edit] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stage Preview (Spineãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼)          â”‚ Cast Panel â”‚
â”‚                                                      â”‚ ğŸ±ã·ã‚‰ã£ã¨ â”‚
â”‚  â”Œâ”€ Performance Area (600x400) â”€â”                   â”‚ ğŸ­ã­ãšã¿   â”‚
â”‚  â”‚                                â”‚                   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Spine characters preview    â”‚                   â”‚ â”‚Timeline â”‚ â”‚
â”‚  â”‚                                â”‚                   â”‚ â”‚Settings â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚Panel    â”‚ â”‚
â”‚                                                      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¬ Director's Timeline (ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç·¨é›†ã‚¨ãƒªã‚¢)                    â”‚
â”‚ â”Œâ”€ Scene Track (ã‚·ãƒ¼ãƒ³ãƒˆãƒ©ãƒƒã‚¯) â”€â” â”Œâ”€ Controls â”€â”                â”‚
â”‚ â”‚ Act1â”‚Scene1â”‚Scene2â”‚Scene3    â”‚ â”‚ â–¶ â¸ â¹ ğŸ”„  â”‚                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚ â”Œâ”€ Character Tracks (ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒˆãƒ©ãƒƒã‚¯) â”€â”                     â”‚
â”‚ â”‚ ğŸ­Cast #1  [â– â– â– â”€â”€â– â– â”€â”€â”€â”€â– ]  Cue Notes                          â”‚
â”‚ â”‚ ğŸ­Cast #2  [â”€â– â– â– â– â”€â”€â– â– â– â– ]  Stage Direction                     â”‚
â”‚ â”‚ ğŸ­FX       [â”€â”€â”€â”€â– â”€â”€â”€â”€â”€â”€â– ]  Lighting & Effects               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€ Property Inspector (é¸æŠä¸­ã‚¯ãƒªãƒƒãƒ—è©³ç´°) â”€â”                     â”‚
â”‚ â”‚ Clip: "Walk Action"  Duration: 2.5s     â”‚                     â”‚
â”‚ â”‚ Animation: walk      Blend In: 0.2s     â”‚                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¨ ç‹¬è‡ªUIè¦ç´ ã®è©³ç´°è¨­è¨ˆ

#### 1. **Stage Previewï¼ˆèˆå°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ï¼‰**
```css
.stage-preview {
    background: linear-gradient(45deg, #1a1a2e, #16213e);
    border: 3px solid #0f3460;
    border-radius: 15px;
    box-shadow: inset 0 0 50px rgba(15, 52, 96, 0.3);
    position: relative;
}

.performance-area {
    width: 600px;
    height: 400px;
    background: radial-gradient(circle at center, #16213e, #1a1a2e);
    border: 1px dashed #0f3460;
    margin: 20px;
}

.stage-lights {
    position: absolute;
    top: 0;
    width: 100%;
    height: 30px;
    background: linear-gradient(90deg, 
        rgba(255,255,255,0.1) 0%,
        rgba(255,255,255,0.05) 50%,
        rgba(255,255,255,0.1) 100%);
}
```

#### 2. **Director's Timelineï¼ˆæ¼”å‡ºã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰**
```css
.directors-timeline {
    background: #2d3748;
    border-top: 3px solid #4a5568;
    min-height: 300px;
}

.scene-track {
    height: 40px;
    background: linear-gradient(90deg, #3182ce, #2b77cb);
    border-radius: 8px 8px 0 0;
    display: flex;
    align-items: center;
    color: white;
    font-weight: bold;
}

.scene-marker {
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.4);
    border-radius: 4px;
    padding: 4px 12px;
    margin: 0 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.scene-marker:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-2px);
}
```

#### 3. **Character Tracksï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒˆãƒ©ãƒƒã‚¯ï¼‰**
```css
.character-track {
    height: 60px;
    background: #4a5568;
    border-bottom: 1px solid #2d3748;
    display: flex;
    align-items: center;
    position: relative;
}

.track-label {
    width: 120px;
    padding: 0 15px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    font-weight: bold;
    text-align: center;
    border-radius: 0 15px 15px 0;
}

.track-timeline {
    flex: 1;
    height: 40px;
    background: rgba(0,0,0,0.1);
    border-radius: 5px;
    margin: 0 10px;
    position: relative;
    overflow: hidden;
}

.clip {
    position: absolute;
    height: 30px;
    background: linear-gradient(135deg, #48bb78, #38a169);
    border: 2px solid #68d391;
    border-radius: 6px;
    top: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 0.8rem;
    transition: all 0.2s;
}

.clip:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
}

.clip.selected {
    border-color: #ffd700;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
}
```

#### 4. **Property Inspectorï¼ˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ¤œæŸ»ï¼‰**
```css
.property-inspector {
    background: #2d3748;
    border: 2px solid #4a5568;
    border-radius: 10px;
    padding: 15px;
    margin-top: 10px;
}

.property-group {
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.property-label {
    color: #e2e8f0;
    font-weight: bold;
    margin-bottom: 5px;
    font-size: 0.9rem;
}

.property-value {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 4px;
    padding: 8px;
    color: white;
    width: 100%;
}

.property-slider {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: rgba(255,255,255,0.2);
    outline: none;
}

.property-slider::-webkit-slider-thumb {
    appearance: none;
    width: 18px;
    height: 18px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
```

### ğŸ­ ç‹¬è‡ªæ€§ç¢ºä¿ã®è¨­è¨ˆæ–¹é‡

#### **Maya Traxãƒ»Unityã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¨ã®å·®åˆ¥åŒ–è¦ç´ **
1. **èˆå°ãƒ»åŠ‡å ´ãƒ¢ãƒãƒ¼ãƒ•**: æŠ€è¡“çš„ãªUIã§ã¯ãªãã€èŠ¸è¡“çš„ãƒ»æ¼”å‡ºçš„ãªUI
2. **ç‹¬è‡ªã®è‰²å½©è¨­è¨ˆ**: æš—ã‚ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã‚’æ¨¡ã—ãŸé…è‰²
3. **ç‹¬è‡ªã®ç”¨èªä½“ç³»**: 
   - Track â†’ Castï¼ˆã‚­ãƒ£ã‚¹ãƒˆï¼‰
   - Clip â†’ Cueï¼ˆæ¼”æŠ€ã®å‡ºç•ªï¼‰
   - Timeline â†’ Sceneï¼ˆã‚·ãƒ¼ãƒ³ï¼‰
   - Inspector â†’ Stage Directionï¼ˆæ¼”å‡ºæŒ‡ç¤ºï¼‰
4. **ç‹¬è‡ªã®æ“ä½œãƒ•ãƒ­ãƒ¼**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã‚ˆã‚Šã‚‚ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ãƒ»å³ã‚¯ãƒªãƒƒã‚¯é‡è¦–

#### **æ“ä½œæ€§ã®ç‹¬è‡ªæ€§**
```javascript
// ç‹¬è‡ªæ“ä½œ: ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ãƒªãƒƒãƒ—ç·¨é›†
clip.addEventListener('dblclick', (e) => {
    openStageDirectionDialog(clip);
});

// ç‹¬è‡ªæ“ä½œ: å³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
track.addEventListener('contextmenu', (e) => {
    e.preventDefault();
    showCastContextMenu(e.clientX, e.clientY);
});

// ç‹¬è‡ªæ“ä½œ: Space ã‚­ãƒ¼ã§å†ç”Ÿãƒ»åœæ­¢ï¼ˆåŠ‡å ´ã®æ…£ç¿’ï¼‰
document.addEventListener('keydown', (e) => {
    if (e.code === 'Space') {
        e.preventDefault();
        togglePerformance(); // Play/Pause
    }
});
```

---

## ğŸ—ï¸ æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œï¼‰

### ğŸ“± Electronã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æˆ

#### **ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ **
```
spine-timeline-studio/
â”œâ”€â”€ main.js                    # Electronãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹
â”œâ”€â”€ preload.js                 # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ–ãƒªãƒƒã‚¸
â”œâ”€â”€ package.json               # ã‚¢ãƒ—ãƒªè¨­å®šãƒ»ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ renderer/                  # ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆUIï¼‰
â”‚   â”œâ”€â”€ index.html            # ãƒ¡ã‚¤ãƒ³UI
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ theater-ui.css    # ç‹¬è‡ªUIï¼ˆèˆå°ãƒ†ãƒ¼ãƒï¼‰
â”‚   â”‚   â””â”€â”€ timeline.css      # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ timeline-core.js  # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ spine-bridge.js   # Spine WebGLçµ±åˆ
â”‚   â”‚   â”œâ”€â”€ clip-manager.js   # ã‚¯ãƒªãƒƒãƒ—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ export-system.js  # ãƒ™ã‚¤ã‚¯å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â””â”€â”€ ui-controller.js  # UIåˆ¶å¾¡ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†
â”‚   â””â”€â”€ assets/
â”‚       â”œâ”€â”€ spine/            # Spineãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpurattokun, nezumiç­‰ï¼‰
â”‚       â””â”€â”€ icons/            # ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³
â””â”€â”€ dist/                     # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆé…å¸ƒç”¨ï¼‰
    â”œâ”€â”€ spine-timeline-studio.exe  # Windows
    â”œâ”€â”€ spine-timeline-studio.app  # macOS
    â””â”€â”€ spine-timeline-studio       # Linux
```

#### **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**
```json
{
  "main": "main.js",
  "dependencies": {
    "electron": "^27.0.0",
    "@esotericsoftware/spine-webgl": "4.1.*",
    "file-saver": "^2.0.5",
    "jszip": "^3.10.1"
  },
  "devDependencies": {
    "electron-builder": "^24.6.4",
    "@electron/rebuild": "^3.3.0"
  },
  "build": {
    "appId": "com.example.spine-timeline-studio",
    "productName": "Spine Timeline Studio",
    "directories": {
      "output": "dist"
    },
    "files": [
      "main.js",
      "preload.js", 
      "renderer/**/*"
    ]
  }
}
```

### ğŸ”§ ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³è¨­è¨ˆ

#### **TimelineEngineï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ã‚¨ãƒ³ã‚¸ãƒ³ï¼‰**
```javascript
class TheaterTimelineEngine {
    constructor() {
        // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
        this.spineIntegration = new SpineBridgeSystem();
        this.coordinateSystem = new UnifiedCoordinateSystem(); // 2å±¤ç†æƒ³æ§‹æˆ
        this.boundingBoxSystem = new BoundingBoxPrecisionSystem(); // 34é ‚ç‚¹ã‚·ã‚¹ãƒ†ãƒ 
        
        // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç‹¬è‡ªã‚·ã‚¹ãƒ†ãƒ 
        this.scenes = new Map();           // ã‚·ãƒ¼ãƒ³ç®¡ç†
        this.castTracks = new Map();       // ã‚­ãƒ£ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯
        this.cueClips = new Map();         // ã‚­ãƒ¥ãƒ¼ã‚¯ãƒªãƒƒãƒ—
        this.performanceState = {          // ä¸Šæ¼”çŠ¶æ…‹
            currentTime: 0,
            isPlaying: false,
            totalDuration: 10,
            playbackSpeed: 1.0
        };
        
        // ãƒ™ã‚¤ã‚¯ã‚·ã‚¹ãƒ†ãƒ 
        this.bakeSystem = new BakeOutputSystem();
        
        // ãƒ•ãƒ¬ãƒ¼ãƒ åˆ¶å¾¡ï¼ˆ60fpsåŸºæº–ï¼‰
        this.frameRate = 60;
        this.frameTime = 1000 / this.frameRate;
        this.lastFrameTime = 0;
    }
    
    // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆAPI
    initializeWithExistingSystem(spineManager, editSystem) {
        // spine-positioning-system-explanation.js ã¨ã®é€£æº
        // spine-bounds-integration.js ã¨ã®é€£æº
        // æ—¢å­˜ã®é…ç½®ã‚·ã‚¹ãƒ†ãƒ ï¼ˆWhereï¼‰+ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ï¼ˆWhenï¼‰
    }
    
    // ãƒ•ãƒ¬ãƒ¼ãƒ ç²¾åº¦åˆ¶å¾¡
    updatePerformance(deltaTime) {
        if (!this.performanceState.isPlaying) return;
        
        this.performanceState.currentTime += deltaTime * this.performanceState.playbackSpeed;
        
        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚­ãƒ¥ãƒ¼ã®å®Ÿè¡Œ
        this.executeActiveCues();
        
        // Spineçµ±åˆã‚·ã‚¹ãƒ†ãƒ æ›´æ–°
        this.spineIntegration.updateFrame(this.performanceState.currentTime);
        
        // UIæ›´æ–°é€šçŸ¥
        this.notifyTimelineUpdate();
    }
}
```

#### **SpineBridgeSystemï¼ˆSpineçµ±åˆã‚·ã‚¹ãƒ†ãƒ ï¼‰**
```javascript
class SpineBridgeSystem {
    constructor() {
        // æ—¢å­˜Spineã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
        this.spineCharacterManager = null;  // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ å‚ç…§
        this.characterStates = new Map();   // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼çŠ¶æ…‹ç®¡ç†
        this.animationQueue = [];           // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œã‚­ãƒ¥ãƒ¼
        
        // çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ é©ç”¨
        this.coordinateSystem = new UnifiedCoordinateSystem();
        
        // 34é ‚ç‚¹å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆ
        this.boundingBoxSystem = new BoundingBoxPrecisionSystem();
    }
    
    // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ é€£æº
    integrateWithExistingSpineSystem() {
        // window.spineCharacterManager ã¨ã®çµ±åˆ
        // åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ ã®çµ±ä¸€
        // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆ
    }
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ï¼‰
    executeAnimation(characterId, animationName, blendTime = 0.2) {
        const character = this.characterStates.get(characterId);
        if (!character) return false;
        
        // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
        if (this.spineCharacterManager) {
            this.spineCharacterManager.playAnimation(characterId, animationName);
        }
        
        // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³çŠ¶æ…‹æ›´æ–°
        character.currentAnimation = animationName;
        character.blendTime = blendTime;
        character.startTime = performance.now();
        
        return true;
    }
    
    // ãƒ–ãƒ¬ãƒ³ãƒ‰åˆ¶å¾¡ï¼ˆUnityé¢¨ã‚¯ãƒªãƒƒãƒ—ãƒ–ãƒ¬ãƒ³ãƒ‰ï¼‰
    executeBlendedAnimation(characterId, fromAnim, toAnim, blendRatio) {
        // 2ã¤ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–“ã®ãƒ–ãƒ¬ãƒ³ãƒ‰å®Ÿè¡Œ
        // blendRatio: 0.0 = fromAnim, 1.0 = toAnim
        
        if (this.spineCharacterManager && this.spineCharacterManager.blendAnimations) {
            this.spineCharacterManager.blendAnimations(
                characterId, 
                fromAnim, 
                toAnim, 
                blendRatio
            );
        }
    }
}
```

### ğŸ’¾ ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

#### **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼**
```json
{
  "project": {
    "name": "Character Performance Scene 1",
    "version": "1.0.0",
    "created": "2025-08-10T12:00:00Z",
    "lastModified": "2025-08-10T15:30:00Z"
  },
  "settings": {
    "frameRate": 60,
    "duration": 15.0,
    "resolution": {
      "width": 800,
      "height": 600
    },
    "exportFormat": "lightweight-html"
  },
  "characters": [
    {
      "id": "purattokun",
      "name": "ğŸ± ã·ã‚‰ã£ã¨ãã‚“",
      "spineData": {
        "jsonPath": "assets/spine/characters/purattokun/purattokun.json",
        "atlasPath": "assets/spine/characters/purattokun/purattokun.atlas",
        "texturePath": "assets/spine/characters/purattokun/purattokun.png"
      },
      "position": {
        "x": "35%",
        "y": "75%",
        "scale": 0.55
      }
    }
  ],
  "timeline": {
    "scenes": [
      {
        "id": "scene_1",
        "name": "Opening Scene",
        "startTime": 0,
        "duration": 5.0
      }
    ],
    "tracks": [
      {
        "id": "cast_purattokun",
        "characterId": "purattokun",
        "cues": [
          {
            "id": "cue_1",
            "startTime": 0.0,
            "duration": 2.0,
            "animation": "syutugen",
            "blendIn": 0.2,
            "blendOut": 0.2
          }
        ]
      }
    ]
  }
}
```

#### **Electronãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ**
```javascript
// main.js - ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹
const { ipcMain, dialog } = require('electron');
const fs = require('fs').promises;
const path = require('path');

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
ipcMain.handle('save-project', async (event, projectData) => {
    const { filePath } = await dialog.showSaveDialog({
        filters: [
            { name: 'Spine Timeline Projects', extensions: ['stp'] }
        ],
        defaultPath: 'untitled.stp'
    });
    
    if (filePath) {
        await fs.writeFile(filePath, JSON.stringify(projectData, null, 2));
        return { success: true, filePath };
    }
    return { success: false };
});

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
ipcMain.handle('load-project', async (event) => {
    const { filePaths } = await dialog.showOpenDialog({
        filters: [
            { name: 'Spine Timeline Projects', extensions: ['stp'] }
        ],
        properties: ['openFile']
    });
    
    if (filePaths.length > 0) {
        const projectData = await fs.readFile(filePaths[0], 'utf8');
        return { success: true, data: JSON.parse(projectData) };
    }
    return { success: false };
});

// ãƒ™ã‚¤ã‚¯å‡ºåŠ›
ipcMain.handle('export-bake', async (event, exportData) => {
    const { filePath } = await dialog.showSaveDialog({
        filters: [
            { name: 'HTML Package', extensions: ['zip'] }
        ],
        defaultPath: 'timeline-export.zip'
    });
    
    if (filePath) {
        const zipBuffer = await createBakePackage(exportData);
        await fs.writeFile(filePath, zipBuffer);
        return { success: true, filePath };
    }
    return { success: false };
});
```

---

## âš™ï¸ æ©Ÿèƒ½è©³ç´°ä»•æ§˜

### ğŸ¬ ã‚³ã‚¢æ©Ÿèƒ½

#### 1. **ãƒˆãƒ©ãƒƒã‚¯éšå±¤æ§‹é€ **
```javascript
class CastTrack {
    constructor(characterId, name) {
        this.id = generateUniqueId();
        this.characterId = characterId;
        this.name = name;                    // "ğŸ± ã·ã‚‰ã£ã¨ãã‚“"
        this.cues = [];                      // ã‚­ãƒ¥ãƒ¼ã‚¯ãƒªãƒƒãƒ—ã®é…åˆ—
        this.isExpanded = true;              // æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹
        this.isMuted = false;               // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹
        this.volume = 1.0;                  // éŸ³é‡ï¼ˆå°†æ¥æ‹¡å¼µï¼‰
        
        // è¡¨ç¤ºè¨­å®š
        this.color = this.generateTrackColor();
        this.height = 60;                   // UIé«˜ã•
        
        // çµ±åˆã‚·ã‚¹ãƒ†ãƒ é€£æº
        this.spineIntegration = true;       // Spineé€£æºæœ‰åŠ¹
        this.boundingBoxIntegration = true; // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹é€£æº
    }
    
    // ã‚­ãƒ¥ãƒ¼ã‚¯ãƒªãƒƒãƒ—è¿½åŠ 
    addCue(startTime, duration, animation) {
        const cue = new PerformanceCue({
            startTime,
            duration,
            animation,
            characterId: this.characterId
        });
        
        // é‡è¤‡ãƒã‚§ãƒƒã‚¯ãƒ»è‡ªå‹•èª¿æ•´
        this.adjustForOverlap(cue);
        this.cues.push(cue);
        this.sortCuesByTime();
        
        return cue;
    }
    
    // é‡è¤‡å‡¦ç†ï¼ˆUnityé¢¨è‡ªå‹•èª¿æ•´ï¼‰
    adjustForOverlap(newCue) {
        const overlapping = this.cues.filter(cue => 
            this.isTimeOverlap(cue, newCue)
        );
        
        overlapping.forEach(existingCue => {
            if (newCue.startTime < existingCue.endTime) {
                // æ—¢å­˜ã‚¯ãƒªãƒƒãƒ—ã‚’ãƒˆãƒªãƒ 
                existingCue.duration = newCue.startTime - existingCue.startTime;
            }
        });
    }
}

class PerformanceCue {
    constructor(config) {
        this.id = generateUniqueId();
        this.startTime = config.startTime;
        this.duration = config.duration;
        this.animation = config.animation;     // Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å
        this.characterId = config.characterId;
        
        // ãƒ–ãƒ¬ãƒ³ãƒ‰è¨­å®š
        this.blendIn = 0.2;                   // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³æ™‚é–“
        this.blendOut = 0.2;                  // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆæ™‚é–“
        this.blendMode = 'crossfade';         // ãƒ–ãƒ¬ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰
        
        // ã‚«ãƒ¼ãƒ–è¨­å®šï¼ˆã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ï¼‰
        this.easingCurve = 'easeInOut';
        this.customCurve = null;
        
        // ãƒ«ãƒ¼ãƒ—ãƒ»çµ‚äº†å‡¦ç†
        this.loopCount = 1;                   // ãƒ«ãƒ¼ãƒ—å›æ•°ï¼ˆ1=1å›å†ç”Ÿï¼‰
        this.holdLastFrame = false;           // æœ€å¾Œã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä¿æŒ
        
        // UIè¡¨ç¤º
        this.color = this.generateCueColor();
        this.label = this.generateLabel();
        this.selected = false;
    }
    
    get endTime() {
        return this.startTime + this.duration;
    }
    
    // Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
    execute(timelineEngine) {
        const character = timelineEngine.spineIntegration.getCharacter(this.characterId);
        if (!character) return false;
        
        // ãƒ–ãƒ¬ãƒ³ãƒ‰å®Ÿè¡Œ
        character.playAnimationWithBlend(
            this.animation,
            this.blendIn,
            this.loopCount
        );
        
        return true;
    }
}
```

#### 2. **ã‚¯ãƒªãƒƒãƒ—æ“ä½œã‚·ã‚¹ãƒ†ãƒ **
```javascript
class ClipManipulationSystem {
    constructor(timelineEngine) {
        this.timeline = timelineEngine;
        this.selectedClips = new Set();
        this.clipboardClips = [];
        
        // æ“ä½œçŠ¶æ…‹
        this.isDragging = false;
        this.isResizing = false;
        this.dragStartPos = null;
        this.resizeHandle = null; // 'start' | 'end'
        
        this.setupEventHandlers();
    }
    
    setupEventHandlers() {
        // ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ï¼šã‚¯ãƒªãƒƒãƒ—ç·¨é›†
        this.timeline.ui.addEventListener('dblclick', (e) => {
            const clip = this.getClipAtPosition(e.clientX, e.clientY);
            if (clip) this.openClipEditor(clip);
        });
        
        // å³ã‚¯ãƒªãƒƒã‚¯ï¼šã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
        this.timeline.ui.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            const clip = this.getClipAtPosition(e.clientX, e.clientY);
            this.showContextMenu(e.clientX, e.clientY, clip);
        });
        
        // ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹
        this.timeline.ui.addEventListener('mousedown', (e) => {
            const clip = this.getClipAtPosition(e.clientX, e.clientY);
            if (clip) this.startDragOperation(clip, e);
        });
    }
    
    // ãƒˆãƒªãƒ æ“ä½œï¼ˆã‚¯ãƒªãƒƒãƒ—ç«¯ã®ãƒ‰ãƒ©ãƒƒã‚°ï¼‰
    startTrimOperation(clip, handle, startX) {
        this.isResizing = true;
        this.resizeHandle = handle;
        this.activeClip = clip;
        
        const onMouseMove = (e) => {
            const deltaX = e.clientX - startX;
            const deltaTime = this.pixelsToTime(deltaX);
            
            if (handle === 'start') {
                const newStart = Math.max(0, clip.startTime + deltaTime);
                const maxStart = clip.endTime - 0.1; // æœ€å°0.1ç§’
                clip.startTime = Math.min(newStart, maxStart);
                clip.duration = clip.endTime - clip.startTime;
            } else if (handle === 'end') {
                const newDuration = Math.max(0.1, clip.duration + deltaTime);
                clip.duration = newDuration;
            }
            
            this.timeline.ui.updateClipDisplay(clip);
        };
        
        const onMouseUp = () => {
            document.removeEventListener('mousemove', onMouseMove);
            document.removeEventListener('mouseup', onMouseUp);
            this.isResizing = false;
            this.timeline.ui.redraw();
        };
        
        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
    }
    
    // ã‚¹ã‚±ãƒ¼ãƒ«æ“ä½œï¼ˆã‚¯ãƒªãƒƒãƒ—å…¨ä½“ã®æ™‚é–“ä¼¸ç¸®ï¼‰
    scaleClip(clip, scaleFactor) {
        const originalDuration = clip.duration;
        clip.duration *= scaleFactor;
        
        // Spineã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å†ç”Ÿé€Ÿåº¦èª¿æ•´
        clip.playbackSpeed = originalDuration / clip.duration;
        
        this.timeline.ui.updateClipDisplay(clip);
    }
    
    // è¤‡æ•°é¸æŠå¯¾å¿œ
    selectMultipleClips(clips) {
        this.selectedClips.clear();
        clips.forEach(clip => this.selectedClips.add(clip));
        this.timeline.ui.updateSelection(this.selectedClips);
    }
    
    // ã‚¯ãƒªãƒƒãƒ—ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
    openClipEditor(clip) {
        const editor = new ClipEditorDialog(clip, {
            onSave: (updatedClip) => {
                this.timeline.updateClip(updatedClip);
            },
            onCancel: () => {
                // ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã®å‡¦ç†
            }
        });
        
        editor.show();
    }
}
```

#### 3. **çŸ¢å°ãƒªãƒ³ã‚¯ãƒ»é·ç§»è¡¨ç¤º**
```javascript
class TransitionArrowSystem {
    constructor(timelineEngine) {
        this.timeline = timelineEngine;
        this.arrows = new Map();              // ã‚¯ãƒªãƒƒãƒ—é–“ã®çŸ¢å°
        this.transitionCurves = new Map();    // é·ç§»ã‚«ãƒ¼ãƒ–è¨­å®š
        
        this.canvas = this.createArrowCanvas();
        this.setupArrowRendering();
    }
    
    // è‡ªå‹•çŸ¢å°ç”Ÿæˆï¼ˆéš£æ¥ã™ã‚‹ã‚¯ãƒªãƒƒãƒ—é–“ï¼‰
    generateAutoArrows() {
        this.timeline.castTracks.forEach(track => {
            const sortedCues = track.cues.sort((a, b) => a.startTime - b.startTime);
            
            for (let i = 0; i < sortedCues.length - 1; i++) {
                const fromCue = sortedCues[i];
                const toCue = sortedCues[i + 1];
                
                // éš£æ¥ãƒã‚§ãƒƒã‚¯ï¼ˆã‚®ãƒ£ãƒƒãƒ—ãŒ0.5ç§’ä»¥ä¸‹ï¼‰
                if (toCue.startTime - fromCue.endTime <= 0.5) {
                    this.createTransitionArrow(fromCue, toCue);
                }
            }
        });
    }
    
    // é·ç§»çŸ¢å°ä½œæˆ
    createTransitionArrow(fromCue, toCue, options = {}) {
        const arrow = {
            id: `arrow_${fromCue.id}_${toCue.id}`,
            fromCue,
            toCue,
            
            // çŸ¢å°è¡¨ç¤ºè¨­å®š
            color: options.color || '#ffd700',
            thickness: options.thickness || 3,
            style: options.style || 'curved', // 'straight' | 'curved'
            
            // é·ç§»è¨­å®š
            blendTime: options.blendTime || 0.3,
            easing: options.easing || 'easeInOut',
            
            // ã‚«ãƒ¼ãƒ–è¨­å®šï¼ˆBÃ©zieråˆ¶å¾¡ç‚¹ï¼‰
            controlPoint1: options.controlPoint1 || { x: 0.3, y: -20 },
            controlPoint2: options.controlPoint2 || { x: 0.7, y: -20 }
        };
        
        this.arrows.set(arrow.id, arrow);
        this.renderArrow(arrow);
        
        return arrow;
    }
    
    // çŸ¢å°æç”»ï¼ˆCanvasï¼‰
    renderArrow(arrow) {
        const ctx = this.canvas.getContext('2d');
        const fromPos = this.getClipPosition(arrow.fromCue, 'end');
        const toPos = this.getClipPosition(arrow.toCue, 'start');
        
        ctx.strokeStyle = arrow.color;
        ctx.lineWidth = arrow.thickness;
        ctx.setLineDash([]);
        
        if (arrow.style === 'curved') {
            // ãƒ™ã‚¸ã‚§æ›²ç·šã§æç”»
            ctx.beginPath();
            ctx.moveTo(fromPos.x, fromPos.y);
            
            const cp1 = {
                x: fromPos.x + (toPos.x - fromPos.x) * arrow.controlPoint1.x,
                y: fromPos.y + arrow.controlPoint1.y
            };
            const cp2 = {
                x: fromPos.x + (toPos.x - fromPos.x) * arrow.controlPoint2.x,
                y: toPos.y + arrow.controlPoint2.y
            };
            
            ctx.bezierCurveTo(cp1.x, cp1.y, cp2.x, cp2.y, toPos.x, toPos.y);
            ctx.stroke();
            
            // çŸ¢å°ã®å…ˆç«¯
            this.drawArrowHead(ctx, cp2, toPos, arrow.color);
            
        } else {
            // ç›´ç·šã§æç”»
            ctx.beginPath();
            ctx.moveTo(fromPos.x, fromPos.y);
            ctx.lineTo(toPos.x, toPos.y);
            ctx.stroke();
            
            this.drawArrowHead(ctx, fromPos, toPos, arrow.color);
        }
    }
    
    // ã‚«ãƒ¼ãƒ–ç·¨é›†æ©Ÿèƒ½
    enableCurveEditing(arrow) {
        const curveEditor = new CurveEditorDialog(arrow, {
            onUpdate: (updatedArrow) => {
                this.arrows.set(updatedArrow.id, updatedArrow);
                this.renderArrow(updatedArrow);
            },
            onSave: (finalArrow) => {
                this.transitionCurves.set(finalArrow.id, finalArrow);
            }
        });
        
        curveEditor.show();
    }
}
```

#### 4. **ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **
```javascript
class EventManagementSystem {
    constructor(timelineEngine) {
        this.timeline = timelineEngine;
        this.events = new Map();              // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
        this.clickEvents = new Map();         // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        this.loopMarkers = new Map();         // ãƒ«ãƒ¼ãƒ—ãƒãƒ¼ã‚«ãƒ¼
        
        // é‡è¤‡æ’é™¤ã‚·ã‚¹ãƒ†ãƒ 
        this.duplicateResolver = new DuplicateEventResolver();
        
        this.setupEventIntegration();
    }
    
    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆçµ±åˆï¼ˆå¢ƒç•Œãƒœãƒƒã‚¯ã‚¹é€£æºï¼‰
    setupEventIntegration() {
        // æ—¢å­˜ã®å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã‚·ã‚¹ãƒ†ãƒ ã¨çµ±åˆ
        if (window.boundingBoxSystem) {
            window.boundingBoxSystem.onCharacterClick = (characterId, clickData) => {
                this.handleCharacterClickEvent(characterId, clickData);
            };
        }
    }
    
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
    handleCharacterClickEvent(characterId, clickData) {
        const currentTime = this.timeline.performanceState.currentTime;
        
        // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
        const clickEvent = {
            id: generateUniqueId(),
            type: 'character_click',
            characterId,
            timestamp: currentTime,
            clickPosition: clickData.position,
            boundingZone: clickData.zone,        // 'head', 'body', 'tail' ç­‰
            
            // ãƒˆãƒªã‚¬ãƒ¼è¨­å®š
            triggerAnimation: this.getClickAnimation(characterId, clickData.zone),
            immediate: true,                     // å³åº§å®Ÿè¡Œ
            interruptCurrent: false              // ç¾åœ¨ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­æ–­ã—ãªã„
        };
        
        // é‡è¤‡ãƒã‚§ãƒƒã‚¯ãƒ»å®Ÿè¡Œ
        if (!this.duplicateResolver.isDuplicate(clickEvent)) {
            this.executeClickEvent(clickEvent);
            this.events.set(clickEvent.id, clickEvent);
        }
    }
    
    // ãƒ«ãƒ¼ãƒ—ãƒãƒ¼ã‚«ãƒ¼ç®¡ç†
    addLoopMarker(startTime, endTime, loopCount = -1) {
        const loopMarker = {
            id: generateUniqueId(),
            startTime,
            endTime,
            loopCount,                          // -1 = ç„¡é™ãƒ«ãƒ¼ãƒ—
            currentLoop: 0,
            isActive: false,
            
            // UIè¡¨ç¤º
            color: '#ff6b6b',
            label: `Loop ${loopCount === -1 ? 'âˆ' : loopCount}`,
            
            // ãƒ«ãƒ¼ãƒ—æ™‚ã®å‡¦ç†
            onLoopStart: () => {
                console.log(`ãƒ«ãƒ¼ãƒ—é–‹å§‹: ${startTime}s - ${endTime}s`);
            },
            onLoopEnd: (completed) => {
                console.log(`ãƒ«ãƒ¼ãƒ—${completed ? 'å®Œäº†' : 'ä¸­æ–­'}`);
            }
        };
        
        this.loopMarkers.set(loopMarker.id, loopMarker);
        this.timeline.ui.addLoopMarkerUI(loopMarker);
        
        return loopMarker;
    }
    
    // é‡è¤‡æ’é™¤ã‚·ã‚¹ãƒ†ãƒ 
    class DuplicateEventResolver {
        constructor() {
            this.recentEvents = new Map();      // æœ€è¿‘ã®ã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´
            this.timeWindow = 100;              // é‡è¤‡åˆ¤å®šæ™‚é–“çª“ï¼ˆmsï¼‰
        }
        
        isDuplicate(newEvent) {
            const now = Date.now();
            const key = `${newEvent.type}_${newEvent.characterId}`;
            const recent = this.recentEvents.get(key);
            
            if (recent && (now - recent.timestamp) < this.timeWindow) {
                // é‡è¤‡ã¨ã—ã¦åˆ¤å®š
                console.log(`é‡è¤‡ã‚¤ãƒ™ãƒ³ãƒˆæ¤œå‡ºãƒ»ç„¡è¦–: ${key}`);
                return true;
            }
            
            // æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦è¨˜éŒ²
            this.recentEvents.set(key, {
                timestamp: now,
                event: newEvent
            });
            
            // å¤ã„å±¥æ­´ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
            this.cleanupOldEvents(now);
            
            return false;
        }
        
        cleanupOldEvents(currentTime) {
            for (const [key, eventData] of this.recentEvents) {
                if ((currentTime - eventData.timestamp) > this.timeWindow * 5) {
                    this.recentEvents.delete(key);
                }
            }
        }
    }
}
```

---

## ğŸ”„ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆæ–¹æ³•

### ğŸ¤ çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### **Phase A: åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ é€£æº**
```javascript
class ExistingSystemIntegration {
    constructor() {
        // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ å‚ç…§
        this.spinePositioningSystem = null;    // spine-positioning-system-explanation.js
        this.boundingBoxSystem = null;         // spine-bounds-integration.js
        this.packageExportSystem = null;       // spine-package-export.js
        this.coordinateSystem = null;          // çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ 
        
        // çµ±åˆçŠ¶æ…‹ç®¡ç†
        this.integrationStatus = {
            positioning: false,
            boundingBox: false,
            packageExport: false,
            coordinate: false
        };
        
        this.initializeIntegration();
    }
    
    async initializeIntegration() {
        try {
            // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ æ¤œå‡ºãƒ»åˆæœŸåŒ–å¾…æ©Ÿ
            await this.waitForExistingSystems();
            
            // çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ ç¢ºç«‹
            this.establishCoordinateSystem();
            
            // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆ
            this.integrateBoundingBoxSystem();
            
            // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
            this.integratePackageExportSystem();
            
            console.log('âœ… æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆå®Œäº†', this.integrationStatus);
            
        } catch (error) {
            console.error('âŒ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆã‚¨ãƒ©ãƒ¼:', error);
            this.setupFallbackMode();
        }
    }
    
    // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ æ¤œå‡ºå¾…æ©Ÿ
    async waitForExistingSystems(timeout = 10000) {
        return new Promise((resolve) => {
            const startTime = Date.now();
            
            const checkSystems = () => {
                // æ®µéšçš„ã‚·ã‚¹ãƒ†ãƒ ç¢ºèª
                const systems = {
                    positioning: window.spinePositioningSystem || 
                                window.spinePositioningV2 || 
                                window.SpineEditCore,
                    boundingBox: window.indexBoundsManager || 
                                window.spineSkeletonBounds,
                    packageExport: window.PackageExportSystem ||
                                  window.spinePackageExport,
                    coordinate: window.spineCoordinateUtils ||
                               window.coordinateSystem
                };
                
                // åˆ©ç”¨å¯èƒ½ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨˜éŒ²
                Object.keys(systems).forEach(key => {
                    if (systems[key] && !this.integrationStatus[key]) {
                        this.integrationStatus[key] = true;
                        this[key + 'System'] = systems[key];
                        console.log(`âœ… ${key} ã‚·ã‚¹ãƒ†ãƒ æ¤œå‡ºå®Œäº†`);
                    }
                });
                
                // åŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ ï¼ˆpositioningï¼‰ãŒã‚ã‚Œã°çµ±åˆé–‹å§‹
                if (systems.positioning || (Date.now() - startTime) > timeout) {
                    resolve();
                } else {
                    setTimeout(checkSystems, 200);
                }
            };
            
            checkSystems();
        });
    }
    
    // çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ ç¢ºç«‹
    establishCoordinateSystem() {
        if (!this.coordinateSystem && this.positioningSystem) {
            // docs/SPINE_BEST_PRACTICES.md 2å±¤ç†æƒ³æ§‹æˆã‚’é©ç”¨
            this.coordinateSystem = {
                // Layer 1: CSSä½ç½®åˆ¶å¾¡
                applyCSSPositioning: (element, x, y, scale) => {
                    element.style.left = x + '%';
                    element.style.top = y + '%';
                    element.style.transform = `translate(-50%, -50%) scale(${scale})`;
                },
                
                // Layer 2: Spineåº§æ¨™åˆ¶å¾¡
                applySpinePositioning: (skeleton, x = 0, y = 0, scale = 0.55) => {
                    skeleton.x = x;
                    skeleton.y = y;
                    skeleton.scaleX = skeleton.scaleY = scale;
                },
                
                // çµ±åˆåº§æ¨™å¤‰æ›
                convertCoordinates: (screenX, screenY, canvasRect) => {
                    return {
                        canvasX: screenX - canvasRect.left,
                        canvasY: screenY - canvasRect.top,
                        percentageX: ((screenX - canvasRect.left) / canvasRect.width) * 100,
                        percentageY: ((screenY - canvasRect.top) / canvasRect.height) * 100
                    };
                }
            };
            
            this.integrationStatus.coordinate = true;
        }
    }
    
    // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆï¼ˆ34é ‚ç‚¹ç²¾å¯†åˆ¤å®šï¼‰
    integrateBoundingBoxSystem() {
        if (this.boundingBoxSystem && this.coordinateSystem) {
            // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ã¨ã®çµ±åˆ
            this.timelineBoundingBox = {
                // ç²¾å¯†ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šï¼ˆ34é ‚ç‚¹ï¼‰
                handlePrecisionClick: (characterId, clickEvent) => {
                    const boundingResult = this.boundingBoxSystem.checkPrecisionClick(
                        characterId, 
                        clickEvent.clientX, 
                        clickEvent.clientY
                    );
                    
                    if (boundingResult.isInside) {
                        // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ã«é€šçŸ¥
                        this.notifyTimelineClickEvent(characterId, boundingResult);
                    }
                },
                
                // ã‚¾ãƒ¼ãƒ³åˆ¥æ¼”å‡ºåˆ¶å¾¡
                executeZonePerformance: (characterId, zone, performance) => {
                    // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã®ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’ä½¿ç”¨ã—ãŸæ¼”å‡ºå®Ÿè¡Œ
                    const zoneInfo = this.boundingBoxSystem.getZoneInfo(characterId, zone);
                    
                    if (zoneInfo) {
                        this.executeTimelinePerformance({
                            characterId,
                            zone,
                            performance,
                            zoneData: zoneInfo
                        });
                    }
                },
                
                // çµ±åˆåº§æ¨™ã‚·ã‚¹ãƒ†ãƒ ã®é©ç”¨
                coordinateIntegration: {
                    getBoundingBoxCoordinates: (characterId) => {
                        const element = document.getElementById(`${characterId}-canvas`);
                        if (!element) return null;
                        
                        return this.coordinateSystem.convertCoordinates(
                            element.getBoundingClientRect().left,
                            element.getBoundingClientRect().top,
                            element.getBoundingClientRect()
                        );
                    }
                }
            };
            
            console.log('âœ… å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆå®Œäº†');
        }
    }
    
    // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
    integratePackageExportSystem() {
        if (this.packageExportSystem) {
            this.timelinePackageExport = {
                // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¨­å®šã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã‚ã‚‹
                exportTimelinePackage: async (timelineData, exportOptions = {}) => {
                    const packageData = {
                        // æ—¢å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ©Ÿèƒ½
                        ...await this.packageExportSystem.generatePackage(),
                        
                        // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å°‚ç”¨ãƒ‡ãƒ¼ã‚¿
                        timeline: {
                            version: '1.0',
                            data: timelineData,
                            playbackSettings: {
                                autoPlay: exportOptions.autoPlay || false,
                                loop: exportOptions.loop || false,
                                controls: exportOptions.showControls || true
                            }
                        }
                    };
                    
                    return this.createTimelinePackage(packageData);
                },
                
                // è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”Ÿæˆ
                generateLightweightPlayer: (timelineData) => {
                    return `
                    <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ -->
                    <script>
                    class LightweightTimelinePlayer {
                        constructor() {
                            this.timelineData = ${JSON.stringify(timelineData)};
                            this.init();
                        }
                        
                        init() {
                            // æœ€å°é™ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å†ç”Ÿæ©Ÿèƒ½
                            this.setupBasicPlayback();
                        }
                    }
                    
                    document.addEventListener('DOMContentLoaded', () => {
                        window.timelinePlayer = new LightweightTimelinePlayer();
                    });
                    </script>
                    `;
                }
            };
            
            console.log('âœ… ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›çµ±åˆå®Œäº†');
        }
    }
}
```

### ğŸ”§ Where + When çµ±åˆ

#### **ç©ºé–“åˆ¶å¾¡ï¼ˆWhereï¼‰+ æ™‚é–“åˆ¶å¾¡ï¼ˆWhenï¼‰ã®çµ±åˆ**
```javascript
class SpaceTimeIntegration {
    constructor() {
        this.spaceSystem = null;    // æ—¢å­˜é…ç½®ã‚·ã‚¹ãƒ†ãƒ ï¼ˆWhereï¼‰
        this.timeSystem = null;     // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆWhenï¼‰
        this.integratedState = new Map(); // çµ±åˆçŠ¶æ…‹ç®¡ç†
    }
    
    // çµ±åˆåˆ¶å¾¡API
    setCharacterSpaceTime(characterId, spaceConfig, timeConfig) {
        const character = {
            id: characterId,
            
            // Where: ç©ºé–“åˆ¶å¾¡
            space: {
                position: {
                    x: spaceConfig.x || '35%',
                    y: spaceConfig.y || '75%'
                },
                scale: spaceConfig.scale || 0.55,
                rotation: spaceConfig.rotation || 0,
                zIndex: spaceConfig.zIndex || 10
            },
            
            // When: æ™‚é–“åˆ¶å¾¡
            time: {
                timeline: timeConfig.timeline || [],
                currentTime: 0,
                playState: 'stopped',
                loops: timeConfig.loops || 1
            },
            
            // çµ±åˆåˆ¶å¾¡
            integration: {
                syncMovement: true,        // ç§»å‹•ã®æ™‚é–“åŒæœŸ
                syncAnimation: true,       // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ™‚é–“åŒæœŸ
                boundingBoxUpdate: true,   // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã®å‹•çš„æ›´æ–°
                realTimePreview: true      // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
            }
        };
        
        this.integratedState.set(characterId, character);
        
        // ä¸¡ã‚·ã‚¹ãƒ†ãƒ ã«åæ˜ 
        this.applySpaceConfig(characterId, character.space);
        this.applyTimeConfig(characterId, character.time);
        
        return character;
    }
    
    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±åˆæ›´æ–°
    updateIntegratedSystem(deltaTime) {
        this.integratedState.forEach((character, characterId) => {
            // æ™‚é–“è»¸ã®æ›´æ–°
            if (character.time.playState === 'playing') {
                character.time.currentTime += deltaTime;
                
                // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã«åŸºã¥ãç©ºé–“æ›´æ–°
                this.updateSpaceFromTime(characterId, character);
                
                // å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã®å‹•çš„æ›´æ–°
                if (character.integration.boundingBoxUpdate) {
                    this.updateBoundingBox(characterId, character);
                }
            }
        });
    }
    
    // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã«ã‚ˆã‚‹å‹•çš„ãªä½ç½®åˆ¶å¾¡
    updateSpaceFromTime(characterId, character) {
        const currentCue = this.getCurrentCue(character.time);
        
        if (currentCue && currentCue.spaceModification) {
            // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§æŒ‡å®šã•ã‚ŒãŸä½ç½®ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›´
            const newSpace = {
                ...character.space,
                ...currentCue.spaceModification
            };
            
            this.applySpaceConfig(characterId, newSpace);
            character.space = newSpace;
        }
    }
}
```

---

## ğŸ“¦ ãƒ™ã‚¤ã‚¯å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ 

### ğŸ­ ãƒ™ã‚¤ã‚¯å‡¦ç†ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### **æ¦‚å¿µ: Timeline â†’ Lightweight Player**
```mermaid
graph LR
    A[è¤‡é›‘ãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³] --> B[ãƒ™ã‚¤ã‚¯å‡¦ç†]
    B --> C[è»½é‡JavaScriptã‚³ãƒ¼ãƒ‰]
    C --> D[ãŠå®¢æ§˜ç´å“ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸]
    
    B --> B1[çŠ¶æ…‹ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ]
    B --> B2[å‹•çš„ã‚³ãƒ¼ãƒ‰ã®é™çš„åŒ–]
    B --> B3[ä¸è¦æ©Ÿèƒ½ã®é™¤å»]
    B --> B4[æœ€é©åŒ–ãƒ»åœ§ç¸®]
```

#### **ãƒ™ã‚¤ã‚¯ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…**
```javascript
class TimelineBakeEngine {
    constructor(timelineData, exportOptions = {}) {
        this.timelineData = timelineData;
        this.options = {
            includeEditor: false,           // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’å«ã‚ãªã„
            optimize: true,                 // æœ€é©åŒ–å®Ÿè¡Œ
            minify: true,                   // ã‚³ãƒ¼ãƒ‰åœ§ç¸®
            includeDebugInfo: false,        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±é™¤å»
            targetFrameRate: 60,            // å¯¾è±¡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ
            ...exportOptions
        };
        
        this.bakeResults = new Map();       // ãƒ™ã‚¤ã‚¯çµæœ
        this.optimizationStats = {};       // æœ€é©åŒ–çµ±è¨ˆ
    }
    
    // ãƒ¡ã‚¤ãƒ³ãƒ™ã‚¤ã‚¯å‡¦ç†
    async bakeTimeline() {
        console.log('ğŸ”¥ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ™ã‚¤ã‚¯å‡¦ç†é–‹å§‹');
        
        try {
            // Phase 1: ãƒ‡ãƒ¼ã‚¿è§£æãƒ»æœ€é©åŒ–
            const optimizedData = await this.optimizeTimelineData();
            
            // Phase 2: è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”Ÿæˆ
            const lightweightPlayer = await this.generateLightweightPlayer(optimizedData);
            
            // Phase 3: é™çš„ã‚¢ã‚»ãƒƒãƒˆå‡¦ç†
            const staticAssets = await this.processStaticAssets();
            
            // Phase 4: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”Ÿæˆ
            const finalPackage = await this.createFinalPackage({
                player: lightweightPlayer,
                assets: staticAssets,
                data: optimizedData
            });
            
            this.bakeResults.set('final', finalPackage);
            
            console.log('âœ… ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ™ã‚¤ã‚¯å‡¦ç†å®Œäº†', {
                originalSize: this.calculateOriginalSize(),
                bakedSize: finalPackage.size,
                compressionRatio: this.getCompressionRatio()
            });
            
            return finalPackage;
            
        } catch (error) {
            console.error('âŒ ãƒ™ã‚¤ã‚¯å‡¦ç†ã‚¨ãƒ©ãƒ¼:', error);
            throw error;
        }
    }
    
    // ãƒ‡ãƒ¼ã‚¿æœ€é©åŒ–
    async optimizeTimelineData() {
        const optimized = {
            version: '1.0-baked',
            bakedAt: Date.now(),
            
            // æœ€é©åŒ–ã•ã‚ŒãŸã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿
            timeline: {
                duration: this.timelineData.timeline.duration,
                frameRate: this.options.targetFrameRate,
                
                // ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã®äº‹å‰è¨ˆç®—
                precomputedFrames: this.precomputeKeyframes(),
                
                // ç°¡ç•¥åŒ–ã•ã‚ŒãŸãƒˆãƒ©ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
                tracks: this.simplifyTracks(this.timelineData.timeline.tracks),
                
                // æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±
                animations: this.optimizeAnimationData()
            },
            
            // ç°¡ç•¥åŒ–ã•ã‚ŒãŸã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±
            characters: this.optimizeCharacterData(this.timelineData.characters),
            
            // å®Ÿè¡Œæ™‚è¨­å®š
            runtime: {
                autoPlay: this.options.autoPlay,
                loop: this.options.loop,
                showControls: this.options.showControls,
                
                // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–è¨­å®š
                useRequestAnimationFrame: true,
                batchUpdates: true,
                optimizedRendering: true
            }
        };
        
        return optimized;
    }
    
    // ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ äº‹å‰è¨ˆç®—
    precomputeKeyframes() {
        const frames = new Map();
        const frameCount = Math.ceil(this.timelineData.timeline.duration * this.options.targetFrameRate);
        
        for (let frame = 0; frame < frameCount; frame++) {
            const time = frame / this.options.targetFrameRate;
            const frameData = this.calculateFrameState(time);
            frames.set(frame, frameData);
        }
        
        console.log(`ğŸ“Š ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ äº‹å‰è¨ˆç®—å®Œäº†: ${frameCount}ãƒ•ãƒ¬ãƒ¼ãƒ `);
        return Array.from(frames.entries());
    }
    
    // è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”Ÿæˆ
    async generateLightweightPlayer(optimizedData) {
        const playerCode = `
        /**
         * Spine Timeline Lightweight Player
         * Generated: ${new Date().toISOString()}
         * Baked from timeline data - DO NOT EDIT MANUALLY
         */
        class SpineTimelineLightweightPlayer {
            constructor(containerElement) {
                this.container = containerElement;
                this.data = ${JSON.stringify(optimizedData, null, 2)};
                this.state = {
                    currentFrame: 0,
                    isPlaying: false,
                    startTime: 0,
                    lastFrameTime: 0
                };
                
                this.characters = new Map();
                this.animationFrameId = null;
                
                this.init();
            }
            
            init() {
                this.setupContainer();
                this.loadCharacters();
                this.setupControls();
                
                if (this.data.runtime.autoPlay) {
                    this.play();
                }
            }
            
            setupContainer() {
                this.container.className = 'spine-timeline-player';
                this.container.innerHTML = \`
                    <div class="player-stage" style="
                        position: relative;
                        width: 100%;
                        height: 400px;
                        background: linear-gradient(45deg, #1a1a2e, #16213e);
                        border-radius: 10px;
                        overflow: hidden;
                    ">
                        <div class="characters-container"></div>
                        <div class="player-controls" style="
                            position: absolute;
                            bottom: 10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(0,0,0,0.8);
                            padding: 10px;
                            border-radius: 20px;
                            display: \${this.data.runtime.showControls ? 'flex' : 'none'};
                            gap: 10px;
                            align-items: center;
                        ">
                            <button class="play-btn">â–¶ï¸</button>
                            <button class="pause-btn" style="display: none;">â¸ï¸</button>
                            <button class="stop-btn">â¹ï¸</button>
                            <div class="progress-bar" style="
                                width: 200px;
                                height: 6px;
                                background: rgba(255,255,255,0.3);
                                border-radius: 3px;
                                position: relative;
                            ">
                                <div class="progress-fill" style="
                                    height: 100%;
                                    background: #667eea;
                                    border-radius: 3px;
                                    width: 0%;
                                    transition: width 0.1s;
                                "></div>
                            </div>
                        </div>
                    </div>
                \`;
            }
            
            loadCharacters() {
                const charactersContainer = this.container.querySelector('.characters-container');
                
                this.data.characters.forEach(characterData => {
                    const characterElement = this.createCharacterElement(characterData);
                    charactersContainer.appendChild(characterElement);
                    this.characters.set(characterData.id, {
                        element: characterElement,
                        data: characterData,
                        currentAnimation: null
                    });
                });
            }
            
            createCharacterElement(characterData) {
                const element = document.createElement('canvas');
                element.id = characterData.id + '-canvas';
                element.width = 200;
                element.height = 200;
                element.style.cssText = \`
                    position: absolute;
                    left: \${characterData.position.x};
                    top: \${characterData.position.y};
                    transform: translate(-50%, -50%) scale(\${characterData.position.scale});
                    z-index: \${characterData.position.zIndex || 10};
                \`;
                
                // Spine WebGLåˆæœŸåŒ–ï¼ˆè»½é‡ç‰ˆï¼‰
                this.initializeLightweightSpine(element, characterData);
                
                return element;
            }
            
            initializeLightweightSpine(canvas, characterData) {
                // è»½é‡SpineåˆæœŸåŒ–ï¼ˆå¿…è¦æœ€å°é™ï¼‰
                if (window.spine && characterData.spineData) {
                    // ã“ã“ã§æœ€å°é™ã®Spine WebGLè¨­å®š
                    // ãƒ™ã‚¤ã‚¯æ™‚ã«å¿…è¦ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿èª­ã¿è¾¼ã¿
                }
            }
            
            play() {
                this.state.isPlaying = true;
                this.state.startTime = performance.now();
                this.state.lastFrameTime = this.state.startTime;
                
                this.updatePlayButton();
                this.animateFrame();
            }
            
            pause() {
                this.state.isPlaying = false;
                if (this.animationFrameId) {
                    cancelAnimationFrame(this.animationFrameId);
                }
                this.updatePlayButton();
            }
            
            stop() {
                this.pause();
                this.state.currentFrame = 0;
                this.updateFrame(0);
                this.updateProgress(0);
            }
            
            animateFrame() {
                if (!this.state.isPlaying) return;
                
                const now = performance.now();
                const elapsed = now - this.state.startTime;
                const targetFrame = Math.floor(elapsed / 1000 * this.data.timeline.frameRate);
                
                if (targetFrame !== this.state.currentFrame) {
                    this.state.currentFrame = targetFrame;
                    this.updateFrame(targetFrame);
                    this.updateProgress(targetFrame);
                }
                
                // çµ‚äº†ãƒã‚§ãƒƒã‚¯
                if (targetFrame >= this.data.timeline.precomputedFrames.length) {
                    if (this.data.runtime.loop) {
                        this.state.startTime = now;
                        this.state.currentFrame = 0;
                    } else {
                        this.stop();
                        return;
                    }
                }
                
                this.animationFrameId = requestAnimationFrame(() => this.animateFrame());
            }
            
            updateFrame(frameIndex) {
                const frameData = this.data.timeline.precomputedFrames[frameIndex];
                if (!frameData) return;
                
                const [frame, state] = frameData;
                
                // å„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®çŠ¶æ…‹æ›´æ–°
                Object.entries(state.characters).forEach(([characterId, characterState]) => {
                    const character = this.characters.get(characterId);
                    if (character && characterState.animation !== character.currentAnimation) {
                        this.executeAnimation(characterId, characterState.animation);
                        character.currentAnimation = characterState.animation;
                    }
                });
            }
            
            executeAnimation(characterId, animationName) {
                const character = this.characters.get(characterId);
                if (!character) return;
                
                // è»½é‡ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
                // ï¼ˆå®Ÿéš›ã®Spine WebGLå‘¼ã³å‡ºã—ã¾ãŸã¯ä»£æ›¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
                console.log(\`\${characterId}: \${animationName}\`);
            }
            
            updateProgress(frame) {
                const progress = (frame / this.data.timeline.precomputedFrames.length) * 100;
                const progressFill = this.container.querySelector('.progress-fill');
                if (progressFill) {
                    progressFill.style.width = progress + '%';
                }
            }
            
            updatePlayButton() {
                const playBtn = this.container.querySelector('.play-btn');
                const pauseBtn = this.container.querySelector('.pause-btn');
                
                if (this.state.isPlaying) {
                    playBtn.style.display = 'none';
                    pauseBtn.style.display = 'inline-block';
                } else {
                    playBtn.style.display = 'inline-block';
                    pauseBtn.style.display = 'none';
                }
            }
            
            setupControls() {
                const playBtn = this.container.querySelector('.play-btn');
                const pauseBtn = this.container.querySelector('.pause-btn');
                const stopBtn = this.container.querySelector('.stop-btn');
                
                playBtn.addEventListener('click', () => this.play());
                pauseBtn.addEventListener('click', () => this.pause());
                stopBtn.addEventListener('click', () => this.stop());
            }
        }
        
        // è‡ªå‹•åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('spine-timeline-container') || 
                           document.querySelector('.spine-timeline-player-container') ||
                           document.body;
                           
            if (container) {
                window.spineTimelinePlayer = new SpineTimelineLightweightPlayer(container);
            }
        });
        `;
        
        return {
            code: playerCode,
            size: playerCode.length,
            minified: this.options.minify ? this.minifyCode(playerCode) : playerCode
        };
    }
    
    // æœ€çµ‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
    async createFinalPackage(components) {
        const package = {
            type: 'spine-timeline-baked-package',
            version: '1.0',
            createdAt: new Date().toISOString(),
            
            // ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
            files: {
                'index.html': this.generateIndexHTML(components),
                'timeline-player.js': components.player.minified || components.player.code,
                'timeline-data.json': JSON.stringify(components.data),
                'styles.css': this.generateStyles()
            },
            
            // ã‚¢ã‚»ãƒƒãƒˆ
            assets: components.assets,
            
            // ãƒ¡ã‚¿æƒ…å ±
            metadata: {
                originalTimelineDuration: this.timelineData.timeline.duration,
                totalFrames: components.data.timeline.precomputedFrames.length,
                characterCount: this.timelineData.characters.length,
                
                // æœ€é©åŒ–çµ±è¨ˆ
                optimization: {
                    originalSize: this.calculateOriginalSize(),
                    bakedSize: this.calculateBakedSize(components),
                    compressionRatio: this.getCompressionRatio(),
                    precomputedFrames: components.data.timeline.precomputedFrames.length
                }
            }
        };
        
        return package;
    }
    
    // HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ
    generateIndexHTML(components) {
        return `<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spine Timeline - Baked Performance</title>
    <link rel="stylesheet" href="styles.css">
    ${this.generateSpineWebGLScript()}
</head>
<body>
    <div id="spine-timeline-container" class="spine-timeline-player-container">
        <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </div>
    
    <script src="timeline-player.js"></script>
</body>
</html>`;
    }
    
    // Spine WebGL CDN/ãƒ­ãƒ¼ã‚«ãƒ«åˆ¤å®š
    generateSpineWebGLScript() {
        if (this.options.includeSpineLocal) {
            return '<script src="assets/spine-webgl.js"></script>';
        } else {
            return '<script src="https://unpkg.com/@esotericsoftware/spine-webgl@4.1.*/dist/iife/spine-webgl.js"></script>';
        }
    }
}
```

### ğŸ“Š æœ€é©åŒ–çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ

#### **ãƒ™ã‚¤ã‚¯å‡¦ç†ã®åŠ¹æœæ¸¬å®š**
```javascript
class BakeOptimizationReporter {
    constructor(originalData, bakedData) {
        this.original = originalData;
        this.baked = bakedData;
        this.stats = this.calculateStats();
    }
    
    calculateStats() {
        return {
            fileSize: {
                original: this.calculateOriginalSize(),
                baked: this.calculateBakedSize(),
                reduction: this.calculateSizeReduction()
            },
            
            functionality: {
                originalFeatures: this.countOriginalFeatures(),
                bakedFeatures: this.countBakedFeatures(),
                removedFeatures: this.listRemovedFeatures()
            },
            
            performance: {
                loadTime: {
                    estimated: this.estimateLoadTime(),
                    improvement: this.estimateLoadTimeImprovement()
                },
                runtime: {
                    memoryUsage: this.estimateMemoryUsage(),
                    cpuUsage: this.estimateCpuUsage()
                }
            },
            
            compatibility: {
                browserSupport: this.checkBrowserSupport(),
                mobileOptimization: this.checkMobileOptimization()
            }
        };
    }
    
    generateReport() {
        const report = `
# Spine Timeline Bake Report
Generated: ${new Date().toISOString()}

## File Size Optimization
- Original: ${(this.stats.fileSize.original / 1024).toFixed(2)} KB
- Baked: ${(this.stats.fileSize.baked / 1024).toFixed(2)} KB
- Reduction: ${this.stats.fileSize.reduction.toFixed(1)}%

## Feature Summary
- Original Features: ${this.stats.functionality.originalFeatures}
- Baked Features: ${this.stats.functionality.bakedFeatures}
- Removed Features: ${this.stats.functionality.removedFeatures.join(', ')}

## Performance Estimates
- Load Time Improvement: ${this.stats.performance.loadTime.improvement.toFixed(1)}%
- Memory Usage: ${(this.stats.performance.runtime.memoryUsage / 1024).toFixed(2)} MB
- CPU Usage: ${this.stats.performance.runtime.cpuUsage.toFixed(1)}%

## Compatibility
- Browser Support: ${this.stats.compatibility.browserSupport}
- Mobile Optimized: ${this.stats.compatibility.mobileOptimization ? 'Yes' : 'No'}

## Recommendations
${this.generateRecommendations()}
        `;
        
        return report;
    }
    
    generateRecommendations() {
        const recommendations = [];
        
        if (this.stats.fileSize.reduction < 50) {
            recommendations.push('- Consider enabling more aggressive optimization options');
        }
        
        if (this.stats.performance.runtime.memoryUsage > 10 * 1024 * 1024) {
            recommendations.push('- Consider reducing precomputed frame data for better memory usage');
        }
        
        if (!this.stats.compatibility.mobileOptimization) {
            recommendations.push('- Enable mobile optimization for better mobile device performance');
        }
        
        return recommendations.length > 0 ? recommendations.join('\n') : '- Current configuration is optimal';
    }
}
```

---

## ğŸ“… é–‹ç™ºè¨ˆç”»ãƒ»Phaseåˆ†ã‘

### ğŸ¯ Phaseæ§‹æˆï¼ˆå“è³ªä¿è¨¼çµ±åˆç‰ˆï¼‰

#### **Phase 1: åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰**ï¼ˆ4-5é€±é–“ï¼‰
**ç›®æ¨™**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªåŸºç›¤ + åŸºæœ¬ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½

**Week 1-2: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªåŸºç›¤**
- [ ] Electronã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŸºæœ¬æ§‹é€ æ§‹ç¯‰
- [ ] ç‹¬è‡ªUIï¼ˆTheater Studioï¼‰åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè£…
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ï¼‰
- [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆAPIè¨­è¨ˆ

**Week 3-4: åŸºæœ¬ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½**
- [ ] TimelineEngineåŸºæœ¬ã‚¯ãƒ©ã‚¹å®Ÿè£…ï¼ˆ500è¡Œä»¥å†…ï¼‰
- [ ] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒˆãƒ©ãƒƒã‚¯ãƒ»ã‚¯ãƒªãƒƒãƒ—ç®¡ç†ï¼ˆ400è¡Œä»¥å†…ï¼‰
- [ ] åŸºæœ¬å†ç”Ÿãƒ»åœæ­¢åˆ¶å¾¡ï¼ˆ300è¡Œä»¥å†…ï¼‰
- [ ] Spine WebGLçµ±åˆåŸºç›¤ï¼ˆ350è¡Œä»¥å†…ï¼‰

**å®Œäº†åŸºæº–**:
- [ ] ã‚¢ãƒ—ãƒªã®åŸºæœ¬èµ·å‹•ãƒ»çµ‚äº†
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
- [ ] 2ã¤ã®Spineã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®èª­ã¿è¾¼ã¿ãƒ»è¡¨ç¤º
- [ ] åŸºæœ¬çš„ãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å†ç”Ÿ
- **å“è³ªåŸºæº–**: å…¨ãƒ•ã‚¡ã‚¤ãƒ«500è¡Œä»¥ä¸‹ãƒ»è¤‡é›‘åº¦10ä»¥ä¸‹

#### **Phase 2: ç·¨é›†æ©Ÿèƒ½å®Ÿè£…**ï¼ˆ3-4é€±é–“ï¼‰
**ç›®æ¨™**: ãƒ—ãƒ­ãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç·¨é›†æ©Ÿèƒ½

**Week 1-2: ã‚¯ãƒªãƒƒãƒ—æ“ä½œã‚·ã‚¹ãƒ†ãƒ **
- [ ] ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã«ã‚ˆã‚‹ã‚¯ãƒªãƒƒãƒ—ç§»å‹•ï¼ˆ400è¡Œä»¥å†…ï¼‰
- [ ] ãƒˆãƒªãƒ ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«æ“ä½œï¼ˆ350è¡Œä»¥å†…ï¼‰
- [ ] è¤‡æ•°é¸æŠãƒ»ä¸€æ‹¬æ“ä½œï¼ˆ300è¡Œä»¥å†…ï¼‰
- [ ] ã‚¯ãƒªãƒƒãƒ—ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆ250è¡Œä»¥å†…ï¼‰

**Week 3-4: é«˜åº¦ç·¨é›†æ©Ÿèƒ½**
- [ ] çŸ¢å°ãƒªãƒ³ã‚¯ãƒ»é·ç§»è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ï¼ˆ450è¡Œä»¥å†…ï¼‰
- [ ] ã‚«ãƒ¼ãƒ–ç·¨é›†æ©Ÿèƒ½ï¼ˆ300è¡Œä»¥å†…ï¼‰
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆ200è¡Œä»¥å†…ï¼‰
- [ ] Undo/Redoæ©Ÿèƒ½ï¼ˆ350è¡Œä»¥å†…ï¼‰

**å®Œäº†åŸºæº–**:
- [ ] ç›´æ„Ÿçš„ãªã‚¯ãƒªãƒƒãƒ—ç·¨é›†æ“ä½œ
- [ ] è¤‡é›‘ãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ§‹ç¯‰
- [ ] ç·¨é›†æ“ä½œã®Undo/Redo
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¯¾å¿œ
- **å“è³ªåŸºæº–**: UIå¿œç­”æ€§100msä»¥ä¸‹ãƒ»ç·¨é›†æ“ä½œã®ç¢ºå®Ÿæ€§

#### **Phase 3: çµ±åˆãƒ»é€£æºã‚·ã‚¹ãƒ†ãƒ **ï¼ˆ2-3é€±é–“ï¼‰
**ç›®æ¨™**: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨çµ±åˆ

**Week 1-2: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ**
- [ ] çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨é©ç”¨ï¼ˆ400è¡Œä»¥å†…ï¼‰
- [ ] å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ç²¾å¯†åˆ¤å®šçµ±åˆï¼ˆ350è¡Œä»¥å†…ï¼‰
- [ ] é…ç½®ã‚·ã‚¹ãƒ†ãƒ ï¼ˆWhereï¼‰é€£æºï¼ˆ300è¡Œä»¥å†…ï¼‰
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ çµ±åˆï¼ˆ450è¡Œä»¥å†…ï¼‰

**Week 2-3: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**
- [ ] Stage Preview ã‚¨ãƒªã‚¢å®Ÿè£…ï¼ˆ350è¡Œä»¥å†…ï¼‰
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çŠ¶æ…‹åŒæœŸï¼ˆ300è¡Œä»¥å†…ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆ250è¡Œä»¥å†…ï¼‰

**å®Œäº†åŸºæº–**:
- [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨çµ±åˆå‹•ä½œ
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç¢ºå®Ÿå‹•ä½œ
- [ ] å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ãƒ»ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šã®çµ±åˆ
- **å“è³ªåŸºæº–**: çµ±åˆã§ã®æ©Ÿèƒ½ç ´æãªã—ãƒ»60fpså®‰å®šå‹•ä½œ

#### **Phase 4: ãƒ™ã‚¤ã‚¯å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ **ï¼ˆ2-3é€±é–“ï¼‰
**ç›®æ¨™**: å•†ç”¨ç´å“ãƒ¬ãƒ™ãƒ«ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›

**Week 1-2: ãƒ™ã‚¤ã‚¯ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…**
- [ ] ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ500è¡Œä»¥å†…ï¼‰
- [ ] è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”Ÿæˆï¼ˆ400è¡Œä»¥å†…ï¼‰
- [ ] é™çš„ã‚¢ã‚»ãƒƒãƒˆå‡¦ç†ï¼ˆ300è¡Œä»¥å†…ï¼‰
- [ ] ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆ350è¡Œä»¥å†…ï¼‰

**Week 2-3: å‡ºåŠ›å“è³ªä¿è¨¼**
- [ ] å‡ºåŠ›ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ250è¡Œä»¥å†…ï¼‰
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ï¼ˆ200è¡Œä»¥å†…ï¼‰
- [ ] æœ€é©åŒ–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆ200è¡Œä»¥å†…ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ­ãƒã‚¹ãƒˆãƒã‚¹ï¼ˆ300è¡Œä»¥å†…ï¼‰

**å®Œäº†åŸºæº–**:
- [ ] å®Œå…¨å‹•ä½œã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›
- [ ] ãŠå®¢æ§˜ç´å“ãƒ¬ãƒ™ãƒ«ã®å“è³ª
- [ ] 50%ä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›
- [ ] ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶å®Œå…¨å¯¾å¿œ
- **å“è³ªåŸºæº–**: å‡ºåŠ›æˆåŠŸç‡99%ä»¥ä¸Šãƒ»å“è³ªä¿è¨¼å®Œå…¨è‡ªå‹•åŒ–

### ğŸ“Š å“è³ªç®¡ç†KPI

#### **é–‹ç™ºå“è³ªKPI**
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç®¡ç†**: 500è¡Œä»¥ä¸‹ç¶­æŒç‡ **95%ä»¥ä¸Š**
- **é–¢æ•°ã‚µã‚¤ã‚ºç®¡ç†**: 50è¡Œä»¥ä¸‹ç¶­æŒç‡ **90%ä»¥ä¸Š**
- **è¤‡é›‘åº¦ç®¡ç†**: å¾ªç’°è¤‡é›‘åº¦10ä»¥ä¸‹ç¶­æŒç‡ **85%ä»¥ä¸Š**
- **ãƒ†ã‚¹ãƒˆç¶²ç¾…ç‡**: å˜ä½“ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆç¶²ç¾…ç‡ **90%ä»¥ä¸Š**

#### **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“KPI**
- **æ“ä½œå¿œç­”æ€§**: UIæ“ä½œãƒ¬ã‚¹ãƒãƒ³ã‚¹ **100msä»¥å†…**
- **å®‰å®šæ€§**: ã‚¢ãƒ—ãƒªã‚¯ãƒ©ãƒƒã‚·ãƒ¥ç‡ **0.1%ä»¥ä¸‹**
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å†ç”Ÿ **60fpså®‰å®š**
- **å‡ºåŠ›å“è³ª**: ãƒ™ã‚¤ã‚¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‹•ä½œæˆåŠŸç‡ **99%ä»¥ä¸Š**

#### **å•†ç”¨å“è³ªKPI**
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›**: ãƒ™ã‚¤ã‚¯å‡ºåŠ›ã§ **50%ä»¥ä¸Šå‰Šæ¸›**
- **ãƒ­ãƒ¼ãƒ‰æ™‚é–“æ”¹å–„**: ãŠå®¢æ§˜ç’°å¢ƒã§ã®ãƒ­ãƒ¼ãƒ‰æ™‚é–“ **3ç§’ä»¥å†…**
- **ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ**: ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰**å®Œå…¨å¯¾å¿œ**
- **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§ã® **å®Œå…¨å‹•ä½œ**

### ğŸ”„ å“è³ªä¿è¨¼ãƒ—ãƒ­ã‚»ã‚¹

#### **Phaseæ¯ã®å¿…é ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**
```javascript
// å“è³ªãƒã‚§ãƒƒã‚¯è‡ªå‹•åŒ–
class QualityAssuranceSystem {
    runPhaseCheck(phase) {
        const checks = {
            codeQuality: this.checkCodeQuality(),
            performance: this.checkPerformance(),
            functionality: this.checkFunctionality(),
            integration: this.checkIntegration(),
            userExperience: this.checkUserExperience()
        };
        
        const passedChecks = Object.values(checks).filter(check => check.passed).length;
        const totalChecks = Object.keys(checks).length;
        const qualityScore = (passedChecks / totalChecks) * 100;
        
        console.log(`Phase ${phase} å“è³ªã‚¹ã‚³ã‚¢: ${qualityScore}%`);
        
        return {
            phase,
            qualityScore,
            checks,
            readyForNext: qualityScore >= 95
        };
    }
    
    checkCodeQuality() {
        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒ»è¤‡é›‘åº¦ãƒ»å‘½åè¦å‰‡ãƒã‚§ãƒƒã‚¯
        return {
            passed: this.isCodeQualityAcceptable(),
            metrics: this.getCodeQualityMetrics(),
            recommendations: this.getCodeQualityRecommendations()
        };
    }
    
    checkPerformance() {
        // ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆãƒ»ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ãƒã‚§ãƒƒã‚¯
        return {
            passed: this.isPerformanceAcceptable(),
            metrics: this.getPerformanceMetrics(),
            recommendations: this.getPerformanceRecommendations()
        };
    }
}
```

---

## âœ… å“è³ªä¿è¨¼ãƒ»ãƒ†ã‚¹ãƒˆé …ç›®

### ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### **1. å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆUnit Testsï¼‰**
```javascript
// ãƒ†ã‚¹ãƒˆä¾‹: TimelineEngine
describe('TimelineEngine', () => {
    let engine;
    
    beforeEach(() => {
        engine = new TheaterTimelineEngine();
    });
    
    test('åŸºæœ¬åˆæœŸåŒ–', () => {
        expect(engine).toBeDefined();
        expect(engine.performanceState.currentTime).toBe(0);
        expect(engine.performanceState.isPlaying).toBe(false);
    });
    
    test('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¿½åŠ ', () => {
        const character = engine.addCharacter('purattokun', {
            spineData: mockSpineData,
            position: { x: '35%', y: '75%' }
        });
        
        expect(engine.characters.has('purattokun')).toBe(true);
        expect(character.id).toBe('purattokun');
    });
    
    test('ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å†ç”Ÿ', (done) => {
        engine.addCharacter('purattokun', mockSpineData);
        engine.addCue('purattokun', 0, 2, 'syutugen');
        
        engine.play();
        expect(engine.performanceState.isPlaying).toBe(true);
        
        setTimeout(() => {
            expect(engine.performanceState.currentTime).toBeGreaterThan(0);
            done();
        }, 100);
    });
});
```

#### **2. çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆIntegration Testsï¼‰**
```javascript
describe('æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ', () => {
    test('å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆ', async () => {
        const integrationSystem = new ExistingSystemIntegration();
        await integrationSystem.initializeIntegration();
        
        expect(integrationSystem.integrationStatus.boundingBox).toBe(true);
        
        // ç²¾å¯†ã‚¯ãƒªãƒƒã‚¯åˆ¤å®šãƒ†ã‚¹ãƒˆ
        const clickResult = integrationSystem.timelineBoundingBox.handlePrecisionClick(
            'purattokun', 
            { clientX: 100, clientY: 100 }
        );
        
        expect(clickResult).toBeDefined();
    });
    
    test('ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›çµ±åˆ', async () => {
        const timelineData = mockTimelineData;
        const packageResult = await integrationSystem.timelinePackageExport.exportTimelinePackage(timelineData);
        
        expect(packageResult.success).toBe(true);
        expect(packageResult.package).toBeDefined();
        expect(packageResult.package.files).toHaveProperty('index.html');
        expect(packageResult.package.files).toHaveProperty('timeline-player.js');
    });
});
```

#### **3. E2Eãƒ†ã‚¹ãƒˆï¼ˆEnd-to-End Testsï¼‰**
```javascript
// Electronã‚¢ãƒ—ãƒªãƒ†ã‚¹ãƒˆï¼ˆSpectronä½¿ç”¨æƒ³å®šï¼‰
describe('Electronã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³', () => {
    let app;
    
    beforeEach(async () => {
        app = new Application({
            path: electronPath,
            args: [path.join(__dirname, '..', 'main.js')]
        });
        await app.start();
    });
    
    afterEach(async () => {
        if (app && app.isRunning()) {
            await app.stop();
        }
    });
    
    test('ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•', async () => {
        const windowCount = await app.client.getWindowCount();
        expect(windowCount).toBe(1);
        
        const title = await app.client.getTitle();
        expect(title).toBe('Spine Timeline Studio');
    });
    
    test('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»ä¿å­˜', async () => {
        // æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
        await app.client.click('#new-project');
        
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¿½åŠ 
        await app.client.click('#add-character');
        await app.client.setValue('#character-selector', 'purattokun');
        
        // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç·¨é›†
        await app.client.click('#timeline-area');
        await app.client.dragAndDrop('#character-clip', '#timeline-track');
        
        // ä¿å­˜
        await app.client.click('#save-project');
        
        const saveDialog = await app.client.isExisting('.save-dialog');
        expect(saveDialog).toBe(true);
    });
    
    test('ãƒ™ã‚¤ã‚¯å‡ºåŠ›', async () => {
        // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª­ã¿è¾¼ã¿
        await app.client.click('#load-project');
        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã¯å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã§ã¯åˆ¥é€”å¯¾å¿œ
        
        // ãƒ™ã‚¤ã‚¯å®Ÿè¡Œ
        await app.client.click('#export-bake');
        
        // å‡ºåŠ›è¨­å®š
        await app.client.click('#optimize-output');
        await app.client.click('#confirm-export');
        
        // å®Œäº†ç¢ºèª
        await app.client.waitForExist('.export-success', 10000);
        const successMessage = await app.client.getText('.export-success');
        expect(successMessage).toContain('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†');
    });
});
```

### ğŸ” å“è³ªæ¤œè¨¼é …ç›®

#### **æ©Ÿèƒ½å“è³ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**
- [ ] **åŸºæœ¬æ©Ÿèƒ½**
  - [ ] ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ãƒ»çµ‚äº†
  - [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
  - [ ] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¿½åŠ ãƒ»å‰Šé™¤
  - [ ] ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å†ç”Ÿãƒ»åœæ­¢ãƒ»ä¸€æ™‚åœæ­¢
  
- [ ] **ç·¨é›†æ©Ÿèƒ½**
  - [ ] ã‚¯ãƒªãƒƒãƒ—ãƒ‰ãƒ©ãƒƒã‚°ãƒ»ãƒ‰ãƒ­ãƒƒãƒ—
  - [ ] ãƒˆãƒªãƒ ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«æ“ä½œ
  - [ ] è¤‡æ•°é¸æŠãƒ»ä¸€æ‹¬æ“ä½œ
  - [ ] Undo/Redoæ©Ÿèƒ½
  
- [ ] **çµ±åˆæ©Ÿèƒ½**
  - [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº
  - [ ] å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆ
  - [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - [ ] ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†
  
- [ ] **å‡ºåŠ›æ©Ÿèƒ½**
  - [ ] ãƒ™ã‚¤ã‚¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”Ÿæˆ
  - [ ] è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‹•ä½œ
  - [ ] ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§
  - [ ] ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ

#### **æ€§èƒ½å“è³ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**
- [ ] **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ€§èƒ½**
  - [ ] UIæ“ä½œãƒ¬ã‚¹ãƒãƒ³ã‚¹ < 100ms
  - [ ] ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ›´æ–° < 16ms (60fps)
  - [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ < 1s
  - [ ] ãƒ™ã‚¤ã‚¯å‡ºåŠ› < 30sï¼ˆ10åˆ†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  
- [ ] **ãƒ¡ãƒ¢ãƒªãƒ»CPUåŠ¹ç‡**
  - [ ] ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 200MB
  - [ ] ç·¨é›†æ™‚ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 500MB
  - [ ] CPUä½¿ç”¨ç‡ï¼ˆé€šå¸¸æ™‚ï¼‰< 20%
  - [ ] CPUä½¿ç”¨ç‡ï¼ˆãƒ™ã‚¤ã‚¯æ™‚ï¼‰< 80%
  
- [ ] **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåŠ¹ç‡**
  - [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ« < 1MBï¼ˆ10åˆ†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - [ ] ãƒ™ã‚¤ã‚¯å‡ºåŠ›å‰Šæ¸›ç‡ > 50%
  - [ ] è»½é‡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ < 100KB
  - [ ] å‡ºåŠ›HTMLãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ < 2MB

#### **äº’æ›æ€§ãƒ»å®‰å®šæ€§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**
- [ ] **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**
  - [ ] Windows 10/11
  - [ ] macOS (Intel/Apple Silicon)
  - [ ] Linux (Ubuntu/CentOS)
  
- [ ] **ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œï¼ˆå‡ºåŠ›ï¼‰**
  - [ ] Chromeï¼ˆæœ€æ–°ãƒ»1ã¤å‰ï¼‰
  - [ ] Firefoxï¼ˆæœ€æ–°ãƒ»1ã¤å‰ï¼‰
  - [ ] Safariï¼ˆæœ€æ–°ãƒ»1ã¤å‰ï¼‰
  - [ ] Edgeï¼ˆæœ€æ–°ãƒ»1ã¤å‰ï¼‰
  
- [ ] **ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œï¼ˆå‡ºåŠ›ï¼‰**
  - [ ] ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆ1920x1080ä»¥ä¸Šï¼‰
  - [ ] ãƒ©ãƒƒãƒ—ãƒˆãƒƒãƒ—ï¼ˆ1366x768ä»¥ä¸Šï¼‰
  - [ ] ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆ768x1024ä»¥ä¸Šï¼‰
  - [ ] ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ï¼ˆ375x667ä»¥ä¸Šï¼‰
  
- [ ] **å®‰å®šæ€§åŸºæº–**
  - [ ] ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ç‡ < 0.1%
  - [ ] ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãªã—
  - [ ] ãƒ‡ãƒ¼ã‚¿ç ´æãªã—
  - [ ] 24æ™‚é–“é€£ç¶šå‹•ä½œ

### ğŸ“Š å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›£è¦–

#### **è‡ªå‹•å“è³ªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ **
```javascript
class QualityMonitoringSystem {
    constructor() {
        this.metrics = new Map();
        this.thresholds = {
            responseTime: 100,      // ms
            memoryUsage: 500,       // MB
            cpuUsage: 20,          // %
            errorRate: 0.1,        // %
            codeComplexity: 10,    // Cyclomatic complexity
            fileSize: 500          // lines
        };
        
        this.startMonitoring();
    }
    
    startMonitoring() {
        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
        setInterval(() => {
            this.collectMetrics();
            this.checkThresholds();
        }, 5000);
        
        // æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
        setInterval(() => {
            this.generateDailyReport();
        }, 24 * 60 * 60 * 1000);
    }
    
    collectMetrics() {
        const metrics = {
            timestamp: Date.now(),
            responseTime: this.measureResponseTime(),
            memoryUsage: this.measureMemoryUsage(),
            cpuUsage: this.measureCpuUsage(),
            errorRate: this.calculateErrorRate(),
            userActions: this.countUserActions()
        };
        
        this.metrics.set(metrics.timestamp, metrics);
        
        // ãƒ¡ãƒˆãƒªã‚¯ã‚¹å±¥æ­´åˆ¶é™
        this.limitMetricsHistory();
    }
    
    checkThresholds() {
        const latest = Array.from(this.metrics.values()).slice(-1)[0];
        
        Object.entries(this.thresholds).forEach(([metric, threshold]) => {
            if (latest[metric] > threshold) {
                this.alertThresholdViolation(metric, latest[metric], threshold);
            }
        });
    }
    
    generateQualityReport() {
        const recent = Array.from(this.metrics.values()).slice(-100);
        
        return {
            period: {
                start: recent[0]?.timestamp,
                end: recent[recent.length - 1]?.timestamp
            },
            averages: {
                responseTime: this.average(recent.map(m => m.responseTime)),
                memoryUsage: this.average(recent.map(m => m.memoryUsage)),
                cpuUsage: this.average(recent.map(m => m.cpuUsage)),
                errorRate: this.average(recent.map(m => m.errorRate))
            },
            peaks: {
                maxResponseTime: Math.max(...recent.map(m => m.responseTime)),
                maxMemoryUsage: Math.max(...recent.map(m => m.memoryUsage)),
                maxCpuUsage: Math.max(...recent.map(m => m.cpuUsage))
            },
            violations: this.getThresholdViolations(recent),
            recommendations: this.generateRecommendations(recent)
        };
    }
}
```

---

## ğŸ“‹ ã¾ã¨ã‚

### ğŸ¯ ã“ã®ä»•æ§˜æ›¸ã®ä¾¡å€¤

ã“ã®ä»•æ§˜æ›¸ã¯ã€ä»¥ä¸‹ã®é‡è¦ãªä¾¡å€¤ã‚’æä¾›ã—ã¾ã™ï¼š

1. **å®Œå…¨ç‹¬è‡ªãƒ‡ã‚¶ã‚¤ãƒ³ç¢ºä¿**: Maya Traxã‚„Unityã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¨å®Œå…¨ã«ç•°ãªã‚‹ã€ŒTheater Studioã€ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
2. **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªå¯¾å¿œ**: Electronãƒ™ãƒ¼ã‚¹ã®ç‹¬ç«‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜
3. **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨çµ±åˆ**: é…ç½®ã‚·ã‚¹ãƒ†ãƒ ï¼ˆWhereï¼‰+ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ï¼ˆWhenï¼‰ã®çµ±åˆ
4. **å•†ç”¨åˆ¶ä½œãƒ„ãƒ¼ãƒ«å“è³ª**: ãƒ—ãƒ­ãƒ¬ãƒ™ãƒ«ã®æ©Ÿèƒ½ã¨ãŠå®¢æ§˜ç´å“ãƒ¬ãƒ™ãƒ«ã®ãƒ™ã‚¤ã‚¯å‡ºåŠ›
5. **å®Ÿè£…å¯èƒ½æ€§ä¿è¨¼**: 500è¡Œåˆ¶é™ãƒ»å“è³ªåŸºæº–ãƒ»æ®µéšçš„å®Ÿè£…ã«ã‚ˆã‚‹ç¢ºå®Ÿãªé–‹ç™º

### ğŸš€ å®Ÿè£…æˆåŠŸã¸ã®é“ç­‹

#### **æŠ€è¡“çš„å„ªä½æ€§**
- **çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ **: docs/SPINE_BEST_PRACTICES.md ã®2å±¤ç†æƒ³æ§‹æˆã‚’å®Œå…¨é©ç”¨
- **å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆ**: 34é ‚ç‚¹ç²¾å¯†åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨çµ±åˆ
- **ãƒ™ã‚¤ã‚¯å‡ºåŠ›**: è»½é‡åŒ–ãƒ»æœ€é©åŒ–ã•ã‚ŒãŸç´å“ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”Ÿæˆ
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—æœ€é©åŒ–**: Electronã«ã‚ˆã‚‹é«˜é€Ÿãƒ»å®‰å®šãªãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª

#### **å•†ç”¨ä¾¡å€¤ã®å®Ÿç¾**
- **åˆ¶ä½œåŠ¹ç‡åŒ–**: ãƒ—ãƒ­åˆ¶ä½œãƒ„ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç·¨é›†
- **å“è³ªä¿è¨¼**: å•†ç”¨ç´å“ãƒ¬ãƒ™ãƒ«ã®å‡ºåŠ›å“è³ªã¨ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§
- **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Œæˆ**: åˆ¶ä½œâ†’ç·¨é›†â†’æœ€é©åŒ–â†’ç´å“ã®å®Œå…¨è‡ªå‹•åŒ–
- **ç«¶åˆå·®åˆ¥åŒ–**: ç‹¬è‡ªUIã‚³ãƒ³ã‚»ãƒ—ãƒˆã«ã‚ˆã‚‹ä»–ç¤¾ãƒ„ãƒ¼ãƒ«ã¨ã®æ˜ç¢ºãªå·®åˆ¥åŒ–

#### **å®Ÿè£…ãƒªã‚¹ã‚¯å¯¾ç­–**
- **æ®µéšçš„é–‹ç™º**: Phaseåˆ†ã‘ã«ã‚ˆã‚‹ç¢ºå®Ÿãªæ©Ÿèƒ½æ§‹ç¯‰
- **å“è³ªä¿è¨¼çµ±åˆ**: KPIç›£è¦–ãƒ»è‡ªå‹•ãƒ†ã‚¹ãƒˆãƒ»ç¶™ç¶šçš„å“è³ªç®¡ç†
- **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ä¿è­·**: çµ±åˆæ™‚ã®æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã‚¼ãƒ­ä¿è¨¼
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æº–å‚™**: å„æ®µéšã§ã®å®‰å…¨ãªå¾Œé€€æˆ¦ç•¥

### ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

#### **å³åº§é–‹å§‹å¯èƒ½ãªä½œæ¥­**
1. **Electronãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–**: package.jsonãƒ»åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 
2. **ç‹¬è‡ªUIå®Ÿè£…é–‹å§‹**: Theater Studioã‚³ãƒ³ã‚»ãƒ—ãƒˆã®åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
3. **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆæº–å‚™**: çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ ãƒ»å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹é€£æºAPIè¨­è¨ˆ
4. **å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰**: è‡ªå‹•ãƒã‚§ãƒƒã‚¯ãƒ»KPIç›£è¦–ã®å®Ÿè£…

#### **æ‰¿èªãƒ»æ„æ€æ±ºå®šäº‹é …**
- **çµ±åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒæœ€çµ‚æ±ºå®š**: Option 3ï¼ˆç‹¬ç«‹ã‚¢ãƒ—ãƒªï¼‰ã§ã®å®Ÿè£…æ‰¿èª
- **Phaseå®Ÿè£…é †åºç¢ºèª**: Phase 1â†’2â†’3â†’4ã®å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ‰¿èª
- **å“è³ªåŸºæº–åˆæ„**: 500è¡Œåˆ¶é™ãƒ»KPIåŸºæº–ãƒ»å•†ç”¨å“è³ªåŸºæº–ã®æœ€çµ‚ç¢ºèª

---

**ğŸ¯ é‡è¦**: ã“ã®ä»•æ§˜æ›¸ã¯ã€æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨çµ±åˆã¨å•†ç”¨åˆ¶ä½œãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã®ä¾¡å€¤å®Ÿç¾ã‚’ä¸¡ç«‹ã™ã‚‹å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚å„è¦ç´ ã¯å®Ÿè¨¼æ¸ˆã¿ã®æŠ€è¡“ã¨ç¢ºç«‹ã•ã‚ŒãŸå“è³ªåŸºæº–ã«åŸºã¥ã„ã¦ãŠã‚Šã€æ®µéšçš„ãªå®Ÿè£…ã«ã‚ˆã‚Šç¢ºå®ŸãªæˆåŠŸã‚’ä¿è¨¼ã—ã¾ã™ã€‚