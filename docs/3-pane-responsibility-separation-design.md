# ğŸ“ 3ãƒšã‚¤ãƒ³æ§‹é€ ã®ç†æƒ³çš„ãªè²¬å‹™åˆ†é›¢è¨­è¨ˆæ›¸

**v4.0 Spine Editor - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆä»•æ§˜æ›¸**  
**ä½œæˆæ—¥**: 2025-08-25  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.0  
**å‚è€ƒ**: v2ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç‰ˆæˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ + v4å•é¡Œåˆ†æ

## ğŸ¯ è¨­è¨ˆå“²å­¦ãƒ»åŸå‰‡

### ğŸš€ v2æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶™æ‰¿
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å˜ä¸€è²¬ä»»**: 1ã¤ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ = 1ã¤ã®æ˜ç¢ºãªè²¬å‹™
- **ç–çµåˆè¨­è¨ˆ**: ãƒšã‚¤ãƒ³é–“ã¯å®šç¾©ã•ã‚ŒãŸAPIã§ã®ã¿é€šä¿¡
- **ä¸­å¤®åˆ¶å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³**: ApplicationCoreãŒå…¨ä½“ã®çŠ¶æ…‹ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’çµ±åˆ¶
- **æ®µéšçš„åˆæœŸåŒ–**: ä¾å­˜é–¢ä¿‚ã«åŸºã¥ã„ãŸå³æ ¼ãªåˆæœŸåŒ–é †åº

### âš¡ v4èª²é¡Œè§£æ±ºæ–¹é‡
- **è²¬å‹™æ··åœ¨ã®æ’é™¤**: å„ãƒšã‚¤ãƒ³ã®å½¹å‰²ã‚’æ˜ç¢ºã«åˆ†é›¢
- **é€šä¿¡çµŒè·¯ã®çµ±åˆ¶**: ç›´æ¥å‚ç…§ã‚’ç¦æ­¢ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹é€šä¿¡ã®ã¿
- **çŠ¶æ…‹ç®¡ç†ã®é›†ç´„**: è¤‡æ•°ç®‡æ‰€ã§ã®stateç®¡ç†ã‚’çµ±åˆ
- **ã‚¨ãƒ©ãƒ¼å¢ƒç•Œã®ç¢ºç«‹**: 1ãƒšã‚¤ãƒ³ã®ã‚¨ãƒ©ãƒ¼ãŒä»–ã«æ³¢åŠã—ãªã„è¨­è¨ˆ

---

## ğŸ“Š 3ãƒšã‚¤ãƒ³è²¬å‹™ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| è²¬å‹™é ˜åŸŸ | OutlinerPane | PreviewPane | PropertiesPane | ApplicationCore |
|---------|-------------|-------------|---------------|----------------|
| **ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†** | ğŸ¯ **ä¸»è²¬ä»»** | âŒ ãªã— | âŒ ãªã— | ğŸ“‹ çŠ¶æ…‹ç®¡ç† |
| **Spineè¡¨ç¤º** | âŒ ãªã— | ğŸ¯ **ä¸»è²¬ä»»** | âŒ ãªã— | ğŸ“‹ çŠ¶æ…‹ç®¡ç† |
| **è¨­å®šãƒ»ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£** | âŒ ãªã— | âŒ ãªã— | ğŸ¯ **ä¸»è²¬ä»»** | ğŸ“‹ çŠ¶æ…‹ç®¡ç† |
| **UIæ“ä½œ** | ğŸ”§ è‡ªãƒšã‚¤ãƒ³å†… | ğŸ”§ è‡ªãƒšã‚¤ãƒ³å†… | ğŸ”§ è‡ªãƒšã‚¤ãƒ³å†… | âŒ ãªã— |
| **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–** | âŒ ãªã— | âŒ ãªã— | âŒ ãªã— | ğŸ¯ **ä¸»è²¬ä»»** |
| **ãƒšã‚¤ãƒ³é–“é€šä¿¡** | ğŸ“¡ ã‚¤ãƒ™ãƒ³ãƒˆé€å—ä¿¡ | ğŸ“¡ ã‚¤ãƒ™ãƒ³ãƒˆé€å—ä¿¡ | ğŸ“¡ ã‚¤ãƒ™ãƒ³ãƒˆé€å—ä¿¡ | ğŸ¯ **ä¸­å¤®åˆ¶å¾¡** |

---

## ğŸ—‚ï¸ ãƒšã‚¤ãƒ³åˆ¥è©³ç´°è²¬å‹™å®šç¾©

### 1ï¸âƒ£ OutlinerPaneï¼ˆã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼ï¼‰

#### ğŸ¯ **å˜ä¸€è²¬ä»»**
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®éšå±¤ç®¡ç†ãƒ»é¸æŠãƒ»æ“ä½œ**

#### âœ… **è²¬ä»»ç¯„å›²**
- **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼è¡¨ç¤º**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®éšå±¤æ§‹é€ è¡¨ç¤º
- **ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ**: HTMLãƒ•ã‚¡ã‚¤ãƒ«ãƒ»Spineã‚¢ã‚»ãƒƒãƒˆã®é¸æŠUI
- **ãƒ•ã‚©ãƒ«ãƒ€æ“ä½œ**: ãƒ•ã‚©ãƒ«ãƒ€é–‹ããƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ»æ¤œç´¢æ©Ÿèƒ½
- **ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒ»æ›´æ–°æ—¥æ™‚ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹**: ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»é¸æŠä¸­ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤º

#### âŒ **è²¬ä»»å¤–**
- Spineè¡¨ç¤ºãƒ»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆPreviewPaneã®è²¬å‹™ï¼‰
- è¨­å®šãƒ»ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¤‰æ›´ï¼ˆPropertiesPaneã®è²¬å‹™ï¼‰
- ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»æ°¸ç¶šåŒ–ï¼ˆApplicationCoreã®è²¬å‹™ï¼‰

#### ğŸ® **UIæ“ä½œ**
```
[ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€å
â”œâ”€ [ğŸ“„ HTMLã‚¢ã‚¤ã‚³ãƒ³] index.html â† é¸æŠçŠ¶æ…‹
â”œâ”€ [ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³] assets/
â”‚   â””â”€ [ğŸ¦´ Spineã‚¢ã‚¤ã‚³ãƒ³] purattokun/
â””â”€ [ğŸ” æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹] ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢...

[ğŸ“‚ ãƒ•ã‚©ãƒ«ãƒ€é–‹ã] [ğŸ”„ ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥] [âš™ï¸ è¨­å®š]
```

#### ğŸ“¡ **ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡**
- `file-selected`: ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚
- `project-opened`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹æ™‚
- `folder-refreshed`: ãƒ•ã‚©ãƒ«ãƒ€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æ™‚

#### ğŸ“¡ **ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡**
- `project-loaded`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ãƒ‰å®Œäº†é€šçŸ¥
- `file-processing-status`: ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†çŠ¶æ³æ›´æ–°

---

### 2ï¸âƒ£ PreviewPaneï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰

#### ğŸ¯ **å˜ä¸€è²¬ä»»**
**Spineã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®è¡¨ç¤ºãƒ»æ“ä½œãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†**

#### âœ… **è²¬ä»»ç¯„å›²**
- **Spineãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: WebGL Canvasä¸Šã§ã®Spineè¡¨ç¤º
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ“ä½œ**: ãƒ‰ãƒ©ãƒƒã‚°ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ãƒ»å›è»¢ã®ç›´æ¥æ“ä½œ
- **ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹**: ç·¨é›†ç”¨ã®BBè¡¨ç¤ºãƒ»ãƒãƒ³ãƒ‰ãƒ«æ“ä½œ
- **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åˆ¶å¾¡**: å†ç”Ÿãƒ»ä¸€æ™‚åœæ­¢ãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
- **è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: æ“ä½œä¸­ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒ»ã‚¬ã‚¤ãƒ‰è¡¨ç¤º

#### âŒ **è²¬ä»»å¤–**
- ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ»ç®¡ç†ï¼ˆOutlinerPaneã®è²¬å‹™ï¼‰
- æ•°å€¤å…¥åŠ›ãƒ»è¨­å®šUIï¼ˆPropertiesPaneã®è²¬å‹™ï¼‰
- ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»æ°¸ç¶šåŒ–ï¼ˆApplicationCoreã®è²¬å‹™ï¼‰

#### ğŸ® **UIæ“ä½œ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [WebGL Canvas - Spineè¡¨ç¤ºã‚¨ãƒªã‚¢]      â”‚
â”‚                                   â”‚
â”‚     ğŸ¦´ â† ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ãªSpineã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼    â”‚
â”‚     â”Œâ”€â– â”€â– â”€â– â”                        â”‚
â”‚     â–      â–   â† ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹     â”‚
â”‚     â””â”€â– â”€â– â”€â– â”˜                        â”‚
â”‚                                   â”‚
â”‚ [â¸ï¸ ä¸€æ™‚åœæ­¢] [â–¶ï¸ å†ç”Ÿ] [ğŸ”„ ãƒªã‚»ãƒƒãƒˆ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“¡ **ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡**
- `spine-position-changed`: ä½ç½®å¤‰æ›´æ™‚
- `spine-scale-changed`: ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›´æ™‚
- `spine-rotation-changed`: å›è»¢å¤‰æ›´æ™‚
- `animation-changed`: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ›´æ™‚

#### ğŸ“¡ **ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡**
- `spine-load`: Spineãƒ­ãƒ¼ãƒ‰æŒ‡ç¤º
- `position-update`: å¤–éƒ¨ã‹ã‚‰ã®ä½ç½®æ›´æ–°
- `scale-update`: å¤–éƒ¨ã‹ã‚‰ã®ã‚¹ã‚±ãƒ¼ãƒ«æ›´æ–°
- `animation-play`: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”ŸæŒ‡ç¤º

---

### 3ï¸âƒ£ PropertiesPaneï¼ˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼‰

#### ğŸ¯ **å˜ä¸€è²¬ä»»**
**æ•°å€¤ãƒ»è¨­å®šã®è©³ç´°ç·¨é›†ãƒ»ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç®¡ç†**

#### âœ… **è²¬ä»»ç¯„å›²**
- **æ•°å€¤å…¥åŠ›**: ä½ç½®ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ãƒ»å›è»¢ã®ç²¾å¯†æ•°å€¤ç·¨é›†
- **è¨­å®šãƒ‘ãƒãƒ«**: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»å“è³ªãƒ»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è¨­å®š
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡**: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§ãƒ»å†ç”Ÿè¨­å®š
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿**: Spineãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ãƒ»çµ±è¨ˆè¡¨ç¤º
- **æ“ä½œå±¥æ­´**: Undo/Redoãƒ»æ“ä½œãƒ­ã‚°è¡¨ç¤º

#### âŒ **è²¬ä»»å¤–**
- Spineè¡¨ç¤ºãƒ»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆPreviewPaneã®è²¬å‹™ï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ãƒ»é¸æŠï¼ˆOutlinerPaneã®è²¬å‹™ï¼‰
- ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»æ°¸ç¶šåŒ–ï¼ˆApplicationCoreã®è²¬å‹™ï¼‰

#### ğŸ® **UIæ“ä½œ**
```
â”Œâ”€ ğŸ¯ Transform â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Position X: [100.5] px â”‚
â”‚ Position Y: [200.3] px â”‚
â”‚ Scale X:    [1.25]     â”‚
â”‚ Scale Y:    [1.25]     â”‚
â”‚ Rotation:   [0Â°]       â”‚
â”œâ”€ ğŸ¬ Animation â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Current: [taiki â–¼]     â”‚
â”‚ Loop: [âœ“] Speed: [1.0] â”‚
â”œâ”€ âš™ï¸ Settings â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quality: [High â–¼]      â”‚
â”‚ Export:  [PNG â–¼]       â”‚
â””â”€ ğŸ“Š Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ File: purattokun.atlas â”‚
â”‚ Size: 512x512 px       â”‚
â”‚ Bones: 24, Slots: 15   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“¡ **ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡**
- `property-changed`: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å€¤å¤‰æ›´æ™‚
- `animation-selected`: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é¸æŠæ™‚
- `settings-updated`: è¨­å®šå¤‰æ›´æ™‚
- `export-requested`: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¦æ±‚æ™‚

#### ğŸ“¡ **ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡**
- `spine-state-updated`: SpineçŠ¶æ…‹æ›´æ–°é€šçŸ¥
- `position-synced`: ä½ç½®åŒæœŸæ›´æ–°
- `animation-info-updated`: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±æ›´æ–°

---

## ğŸ”„ ApplicationCore - ä¸­å¤®åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 

### ğŸ¯ **çµ±åˆè²¬å‹™**
**ãƒšã‚¤ãƒ³é–“èª¿æ•´ãƒ»çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ»ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«åˆ¶å¾¡**

#### âœ… **ä¸­å¤®åˆ¶å¾¡æ©Ÿèƒ½**
- **çŠ¶æ…‹ç®¡ç†**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®çŠ¶æ…‹çµ±åˆç®¡ç†
- **ãƒšã‚¤ãƒ³é–“é€šä¿¡**: ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡
- **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: localStorageãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ»è¨­å®šç®¡ç†
- **ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**: åˆæœŸåŒ–ãƒ»çµ‚äº†ãƒ»ã‚¨ãƒ©ãƒ¼å‡¦ç†
- **ä¾å­˜é–¢ä¿‚ç®¡ç†**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ãƒ»åˆæœŸåŒ–é †åºåˆ¶å¾¡

#### ğŸ—‚ï¸ **çµ±åˆçŠ¶æ…‹ç®¡ç†**
```javascript
applicationState = {
    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹
    project: {
        currentPath: null,
        selectedFile: null,
        recentProjects: []
    },
    
    // SpineçŠ¶æ…‹
    spine: {
        character: null,
        position: {x: 0, y: 0},
        scale: {x: 1, y: 1},
        rotation: 0,
        currentAnimation: null,
        isPlaying: false
    },
    
    // UIçŠ¶æ…‹
    ui: {
        activePane: 'preview',
        paneSizes: {outliner: 250, properties: 300},
        theme: 'dark',
        language: 'ja'
    },
    
    // è¨­å®š
    settings: {
        quality: 'high',
        exportFormat: 'png',
        autoSave: true,
        shortcuts: {}
    }
}
```

#### ğŸ”§ **åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼**
```javascript
async initializeApplication() {
    // 1. åŸºç›¤åˆæœŸåŒ–
    await this.initializeCore();
    
    // 2. ãƒšã‚¤ãƒ³åˆæœŸåŒ–ï¼ˆä¸¦åˆ—ï¼‰
    await Promise.all([
        this.outlinerPane.initialize(),
        this.previewPane.initialize(), 
        this.propertiesPane.initialize()
    ]);
    
    // 3. ãƒšã‚¤ãƒ³é–“é€šä¿¡è¨­å®š
    this.setupPaneEventHandlers();
    
    // 4. å‰å›ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒ
    await this.restoreSession();
    
    // 5. åˆæœŸåŒ–å®Œäº†é€šçŸ¥
    this.broadcastEvent('application-ready');
}
```

---

## ğŸ“¡ ãƒšã‚¤ãƒ³é–“é€šä¿¡APIä»•æ§˜

### ğŸ¯ **é€šä¿¡åŸå‰‡**
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•**: å…¨ã¦ã®ãƒšã‚¤ãƒ³é–“é€šä¿¡ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹
- **ä¸­å¤®é›†æ¨©**: ApplicationCoreçµŒç”±ã§ã®é€šä¿¡ï¼ˆç›´æ¥å‚ç…§ç¦æ­¢ï¼‰
- **å‹å®‰å…¨æ€§**: TypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚ˆã‚‹å‹ä¿è¨¼
- **éåŒæœŸå¯¾å¿œ**: Promiseãƒ»async/awaitãƒ™ãƒ¼ã‚¹ã®é€šä¿¡

#### ğŸ”§ **ã‚¤ãƒ™ãƒ³ãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©**
```typescript
interface SpineEditorEvent {
    type: string;
    source: 'outliner' | 'preview' | 'properties' | 'core';
    target?: 'outliner' | 'preview' | 'properties' | 'core' | 'all';
    timestamp: number;
    data: any;
    requestId?: string; // å¿œç­”ãŒå¿…è¦ãªå ´åˆ
}

// å…·ä½“çš„ãªã‚¤ãƒ™ãƒ³ãƒˆå‹å®šç¾©
interface FileSelectedEvent extends SpineEditorEvent {
    type: 'file-selected';
    source: 'outliner';
    data: {
        filePath: string;
        fileType: 'html' | 'spine' | 'image';
        metadata: FileMetadata;
    }
}

interface SpinePositionChangedEvent extends SpineEditorEvent {
    type: 'spine-position-changed';
    source: 'preview';
    data: {
        position: {x: number, y: number};
        worldPosition: {x: number, y: number};
        isDragging: boolean;
    }
}
```

#### ğŸ“¡ **é€šä¿¡ãƒ•ãƒ­ãƒ¼ä¾‹**
```
ã€ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã®é€šä¿¡ãƒ•ãƒ­ãƒ¼ã€‘
1. OutlinerPane: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒƒã‚¯
   â†“ event: file-selected
2. ApplicationCore: çŠ¶æ…‹æ›´æ–° + é€šçŸ¥é…ä¿¡
   â†“ event: spine-load-requested â†’ PreviewPane
   â†“ event: file-info-updated â†’ PropertiesPane  
3. PreviewPane: Spineèª­ã¿è¾¼ã¿ + è¡¨ç¤º
   â†“ event: spine-loaded
4. ApplicationCore: çŠ¶æ…‹åŒæœŸ
   â†“ event: spine-state-updated â†’ PropertiesPane
5. PropertiesPane: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æƒ…å ±æ›´æ–°

ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†ã®é€šä¿¡ãƒ•ãƒ­ãƒ¼ã€‘  
1. PreviewPane: ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œ
   â†“ event: spine-position-changingï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
2. ApplicationCore: çŠ¶æ…‹æ›´æ–°
   â†“ event: position-synced â†’ PropertiesPane
3. PropertiesPane: æ•°å€¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ›´æ–°
   
4. PreviewPane: ãƒ‰ãƒ©ãƒƒã‚°å®Œäº†  
   â†“ event: spine-position-changedï¼ˆç¢ºå®šï¼‰
5. ApplicationCore: æ°¸ç¶šåŒ– + ç¢ºå®šé€šçŸ¥é…ä¿¡
```

---

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»ä¿å­˜å‡¦ç†ã®åˆ†é›¢è¨­è¨ˆ

### ğŸ¯ **ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢**
ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚’ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‹ã‚‰å®Œå…¨åˆ†é›¢ã—ã€ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã‚’ç¢ºä¿

#### ğŸ—‚ï¸ **ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤**
```typescript
class SpineEditorDataManager {
    // localStorageç®¡ç†
    private localStorageManager: LocalStorageManager;
    
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ï¼ˆElectronï¼‰
    private fileSystemManager: FileSystemManager;
    
    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šç®¡ç†
    private projectConfigManager: ProjectConfigManager;
    
    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
    private sessionManager: SessionManager;
}

interface DataManagerInterface {
    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿
    loadProject(path: string): Promise<ProjectData>;
    saveProject(project: ProjectData): Promise<void>;
    
    // Spineè¨­å®š
    loadSpineSettings(characterId: string): Promise<SpineSettings>;
    saveSpineSettings(characterId: string, settings: SpineSettings): Promise<void>;
    
    // UIçŠ¶æ…‹
    loadUIState(): Promise<UIState>;
    saveUIState(state: UIState): Promise<void>;
    
    // ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒ
    saveSession(session: SessionData): Promise<void>;
    restoreSession(): Promise<SessionData>;
}
```

#### ğŸ’¾ **ä¿å­˜å‡¦ç†ã®éšå±¤åŒ–**
```
ã€å³åº§ä¿å­˜ã€‘(ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ )
- UIçŠ¶æ…‹ï¼ˆãƒšã‚¤ãƒ³é…ç½®ãƒ»é¸æŠçŠ¶æ…‹ï¼‰
- ç·¨é›†ä¸­ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ä½ç½®ï¼‰
    â†“
ã€ãƒãƒƒãƒä¿å­˜ã€‘(æ“ä½œå®Œäº†æ™‚) 
- Spineè¨­å®šï¼ˆä½ç½®ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ»è¨­å®šï¼‰
    â†“
ã€æ°¸ç¶šä¿å­˜ã€‘(æ˜ç¤ºçš„ä¿å­˜)
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.spineprojï¼‰
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®šãƒ»å±¥æ­´
```

#### ğŸ”„ **ãƒ‡ãƒ¼ã‚¿åŒæœŸãƒ¡ã‚«ãƒ‹ã‚ºãƒ **
```javascript
class DataSynchronizer {
    async syncSpinePosition(newPosition) {
        // 1. å³åº§UIæ›´æ–°ï¼ˆæ¥½è¦³çš„æ›´æ–°ï¼‰
        this.applicationCore.updateState('spine.position', newPosition);
        this.broadcastEvent('position-synced', newPosition);
        
        // 2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        if (!this.validatePosition(newPosition)) {
            // ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
            return this.rollbackPosition();
        }
        
        // 3. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ä¿å­˜
        await this.dataManager.saveSpineSettings(characterId, {
            position: newPosition,
            timestamp: Date.now()
        });
        
        // 4. ä¿å­˜å®Œäº†é€šçŸ¥
        this.broadcastEvent('data-persisted', {type: 'position', success: true});
    }
}
```

---

## âš¡ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ•ãƒ­ãƒ¼ã®è¨­è¨ˆ

### ğŸ¯ **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†åŸå‰‡**
- **å˜æ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: ãƒ‡ãƒ¼ã‚¿ã¯å¸¸ã«ä¸Šæµã‹ã‚‰ä¸‹æµã¸
- **ã‚¤ãƒ™ãƒ³ãƒˆå¢ƒç•Œ**: ãƒšã‚¤ãƒ³é–“ã§ã®ãƒ­ã‚¸ãƒƒã‚¯æ¼ã‚Œã‚’é˜²æ­¢
- **ã‚¨ãƒ©ãƒ¼ä¼æ’­åˆ¶å¾¡**: 1ã¤ã®ãƒšã‚¤ãƒ³ã®ã‚¨ãƒ©ãƒ¼ãŒå…¨ä½“ã«å½±éŸ¿ã—ãªã„

#### ğŸ”„ **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**
```
ã€ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿã€‘
    â†“
ã€ãƒšã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã€‘ï¼ˆç™ºç”Ÿå…ƒï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»å‰å‡¦ç†
- ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹æ›´æ–°
    â†“
ã€ApplicationCoreã€‘ï¼ˆä¸­å¤®å‡¦ç†ï¼‰  
- ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹æ›´æ–°
- æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- ã‚¤ãƒ™ãƒ³ãƒˆå¤‰æ›ãƒ»æ‹¡å¼µ
    â†“
ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒšã‚¤ãƒ³ã€‘ï¼ˆå—ä¿¡å´ï¼‰
- ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡ãƒ»å‡¦ç†
- UIæ›´æ–°ãƒ»å‰¯ä½œç”¨å®Ÿè¡Œ
    â†“
ã€ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‘ï¼ˆæ°¸ç¶šåŒ–ï¼‰
- å¿…è¦ã«å¿œã˜ã¦æ°¸ç¶šåŒ–å®Ÿè¡Œ
```

#### ğŸš¨ **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ**
```typescript
class PaneEventHandler {
    async handleEvent(event: SpineEditorEvent): Promise<void> {
        try {
            // 1. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            this.validateEvent(event);
            
            // 2. å‡¦ç†å®Ÿè¡Œ
            await this.processEvent(event);
            
        } catch (error) {
            // 3. ã‚¨ãƒ©ãƒ¼å¢ƒç•Œã§ã®æ•æ‰
            this.handlePaneError(error, event);
            
            // 4. ã‚¨ãƒ©ãƒ¼é€šçŸ¥ï¼ˆä»–ãƒšã‚¤ãƒ³ã«ã¯å½±éŸ¿ã•ã›ãªã„ï¼‰
            this.notifyError({
                pane: this.paneId,
                error: error.message,
                event: event.type,
                timestamp: Date.now()
            });
        }
    }
    
    private handlePaneError(error: Error, event: SpineEditorEvent): void {
        // ãƒšã‚¤ãƒ³å›ºæœ‰ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†
        console.error(`[${this.paneId}] Error handling ${event.type}:`, error);
        
        // UIçŠ¶æ…‹ã‚’ã‚»ãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ‰ã«å¾©å¸°
        this.enterSafeMode();
        
        // å¿…è¦ã«å¿œã˜ã¦ãƒšã‚¤ãƒ³ãƒªã‚»ãƒƒãƒˆ
        if (error instanceof CriticalError) {
            this.resetPane();
        }
    }
}
```

---

## ğŸ—ï¸ å®Ÿè£…æ™‚ã®æ§‹é€ åŒ–æŒ‡é‡

### ğŸ¯ **ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ è¨­è¨ˆ**
```
src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ ApplicationCore.ts        # ä¸­å¤®åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ DataManager.ts           # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”œâ”€â”€ EventBus.ts              # ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†
â”‚   â””â”€â”€ types/                   # TypeScriptå‹å®šç¾©
â”‚       â”œâ”€â”€ events.ts
â”‚       â”œâ”€â”€ data.ts
â”‚       â””â”€â”€ ui.ts
â”œâ”€â”€ panes/
â”‚   â”œâ”€â”€ OutlinerPane/
â”‚   â”‚   â”œâ”€â”€ OutlinerPane.ts      # ãƒšã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚   â”‚   â”œâ”€â”€ FileTree.ts          # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ProjectManager.ts    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ outliner.css         # ãƒšã‚¤ãƒ³å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ PreviewPane/
â”‚   â”‚   â”œâ”€â”€ PreviewPane.ts       # ãƒšã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚   â”‚   â”œâ”€â”€ SpineRenderer.ts     # Spineè¡¨ç¤ºã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ BoundingBox.ts       # BBæ“ä½œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ preview.css          # ãƒšã‚¤ãƒ³å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ PropertiesPane/
â”‚       â”œâ”€â”€ PropertiesPane.ts    # ãƒšã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚       â”œâ”€â”€ PropertyEditor.ts    # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç·¨é›†UI
â”‚       â”œâ”€â”€ AnimationControl.ts  # ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
â”‚       â””â”€â”€ properties.css       # ãƒšã‚¤ãƒ³å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ utils/                   # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ components/              # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ constants.ts             # å®šæ•°å®šç¾©
â””â”€â”€ index.ts                     # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
```

### ğŸ”§ **å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³**

#### 1ï¸âƒ£ **ãƒšã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®æ¨™æº–å®Ÿè£…**
```typescript
abstract class BasePaneController {
    protected abstract paneId: string;
    protected applicationCore: ApplicationCore;
    protected eventBus: EventBus;
    protected element: HTMLElement;
    
    constructor(core: ApplicationCore, element: HTMLElement) {
        this.applicationCore = core;
        this.eventBus = core.eventBus;
        this.element = element;
    }
    
    // æ¨™æº–ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
    abstract initialize(): Promise<void>;
    abstract destroy(): void;
    abstract onShow(): void;
    abstract onHide(): void;
    
    // æ¨™æº–ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
    protected abstract setupEventHandlers(): void;
    protected abstract handleEvent(event: SpineEditorEvent): Promise<void>;
}

// å…·ä½“çš„ãªå®Ÿè£…ä¾‹
class PreviewPaneController extends BasePaneController {
    protected paneId = 'preview';
    private spineRenderer: SpineRenderer;
    private boundingBox: BoundingBox;
    
    async initialize(): Promise<void> {
        // Spineæç”»ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–
        this.spineRenderer = new SpineRenderer(this.element);
        await this.spineRenderer.initialize();
        
        // ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹åˆæœŸåŒ–  
        this.boundingBox = new BoundingBox(this.element);
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¨­å®š
        this.setupEventHandlers();
    }
}
```

#### 2ï¸âƒ£ **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³**
```typescript
// ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ã®æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³
class OutlinerPaneController extends BasePaneController {
    private onFileSelected(file: FileData): void {
        const event: FileSelectedEvent = {
            type: 'file-selected',
            source: 'outliner',
            timestamp: Date.now(),
            data: {
                filePath: file.path,
                fileType: file.type,
                metadata: file.metadata
            }
        };
        
        // ApplicationCoreçµŒç”±ã§é€ä¿¡
        this.applicationCore.handleEvent(event);
    }
}

// ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡ã®æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³
class PreviewPaneController extends BasePaneController {
    protected async handleEvent(event: SpineEditorEvent): Promise<void> {
        switch (event.type) {
            case 'spine-load-requested':
                await this.loadSpineCharacter(event.data.filePath);
                break;
                
            case 'position-update':
                this.updateSpinePosition(event.data.position);
                break;
                
            default:
                console.warn(`[Preview] Unknown event: ${event.type}`);
        }
    }
}
```

#### 3ï¸âƒ£ **çŠ¶æ…‹ç®¡ç†ã®æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³**
```typescript
// ãƒšã‚¤ãƒ³å›ºæœ‰ã®çŠ¶æ…‹ç®¡ç†
class PropertiesPaneController extends BasePaneController {
    private localState = {
        editingProperty: null,
        undoStack: [],
        redoStack: []
    };
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã¨ã®åŒæœŸ
    private syncWithGlobalState(): void {
        const globalSpineState = this.applicationCore.getState('spine');
        
        // UIæ›´æ–°
        this.updatePositionInputs(globalSpineState.position);
        this.updateScaleInputs(globalSpineState.scale);
        this.updateAnimationSelector(globalSpineState.currentAnimation);
    }
    
    // å¤‰æ›´ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã¸ã®åæ˜ 
    private propagateChange(property: string, value: any): void {
        const event: PropertyChangedEvent = {
            type: 'property-changed',
            source: 'properties',
            timestamp: Date.now(),
            data: {
                property,
                value,
                previousValue: this.getPreviousValue(property)
            }
        };
        
        this.applicationCore.handleEvent(event);
    }
}
```

### ğŸ“Š **å“è³ªä¿è¨¼ãƒ»ãƒ†ã‚¹ãƒˆæŒ‡é‡**

#### ğŸ” **å„ãƒšã‚¤ãƒ³ã®å˜ä½“ãƒ†ã‚¹ãƒˆ**
```typescript
describe('PreviewPaneController', () => {
    let paneController: PreviewPaneController;
    let mockApplicationCore: jest.Mocked<ApplicationCore>;
    
    beforeEach(() => {
        mockApplicationCore = createMockApplicationCore();
        paneController = new PreviewPaneController(
            mockApplicationCore, 
            createMockElement()
        );
    });
    
    test('Spineã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿', async () => {
        const mockSpineData = createMockSpineData();
        
        await paneController.loadSpineCharacter('/path/to/spine.json');
        
        expect(paneController.currentSpine).toBeDefined();
        expect(mockApplicationCore.updateState).toHaveBeenCalledWith(
            'spine.character', 
            expect.objectContaining({path: '/path/to/spine.json'})
        );
    });
});
```

#### ğŸ”— **ãƒšã‚¤ãƒ³é–“é€šä¿¡ã®çµ±åˆãƒ†ã‚¹ãƒˆ**
```typescript
describe('Pane Integration', () => {
    let application: ApplicationCore;
    let outlinerPane: OutlinerPaneController;
    let previewPane: PreviewPaneController;
    let propertiesPane: PropertiesPaneController;
    
    test('ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠâ†’Spineè¡¨ç¤ºâ†’ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ›´æ–°ãƒ•ãƒ­ãƒ¼', async () => {
        // 1. ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
        await outlinerPane.selectFile('/project/spine/character.json');
        
        // 2. Previewè¡¨ç¤ºç¢ºèª
        expect(previewPane.currentSpine).toBeDefined();
        expect(previewPane.isSpineLoaded()).toBe(true);
        
        // 3. Propertiesæ›´æ–°ç¢ºèª
        expect(propertiesPane.getDisplayedFileName()).toBe('character.json');
        expect(propertiesPane.getPositionInputs()).toEqual({x: 0, y: 0});
    });
});
```

---

## ğŸš€ ElectronåŒ–å¯¾å¿œè¨­è¨ˆ

### ğŸ¯ **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**
åŒä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§Webç‰ˆãƒ»Electronç‰ˆã®ä¸¡å¯¾å¿œã‚’å®Ÿç¾

#### ğŸ”§ **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æŠ½è±¡åŒ–å±¤**
```typescript
interface PlatformAdapter {
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ“ä½œ
    openFileDialog(): Promise<string[]>;
    saveFileDialog(data: Uint8Array, filename: string): Promise<void>;
    readFile(path: string): Promise<Uint8Array>;
    
    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æ“ä½œ
    setWindowTitle(title: string): void;
    showNotification(message: string): void;
    
    // ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
    openInExplorer(path: string): void;
    openInBrowser(url: string): void;
}

// Webç‰ˆå®Ÿè£…
class WebPlatformAdapter implements PlatformAdapter {
    async openFileDialog(): Promise<string[]> {
        return new Promise((resolve) => {
            const input = document.createElement('input');
            input.type = 'file';
            input.multiple = true;
            input.onchange = (e) => {
                const files = Array.from(e.target.files || []);
                resolve(files.map(f => f.name));
            };
            input.click();
        });
    }
}

// Electronç‰ˆå®Ÿè£…
class ElectronPlatformAdapter implements PlatformAdapter {
    async openFileDialog(): Promise<string[]> {
        const { dialog } = require('electron').remote;
        const result = await dialog.showOpenDialog({
            properties: ['openFile', 'multiSelections']
        });
        return result.filePaths;
    }
}
```

#### ğŸ”„ **è¨­å®šã®å…±é€šåŒ–**
```typescript
// å…±é€šè¨­å®šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface ApplicationConfig {
    platform: 'web' | 'electron';
    dataPath: string;
    tempPath: string;
    maxFileSize: number;
    supportedFormats: string[];
    
    ui: {
        theme: 'light' | 'dark';
        language: string;
        paneSizes: PaneSizeConfig;
    };
    
    spine: {
        quality: 'low' | 'medium' | 'high';
        antiAlias: boolean;
        cacheSize: number;
    };
}

// ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥è¨­å®š
const createApplicationConfig = (platform: 'web' | 'electron'): ApplicationConfig => {
    const baseConfig: ApplicationConfig = {
        platform,
        maxFileSize: 50 * 1024 * 1024, // 50MB
        supportedFormats: ['.json', '.atlas', '.png'],
        ui: {
            theme: 'dark',
            language: 'ja',
            paneSizes: {outliner: 250, properties: 300}
        },
        spine: {
            quality: 'high',
            antiAlias: true,
            cacheSize: 100 * 1024 * 1024 // 100MB
        }
    };
    
    if (platform === 'electron') {
        return {
            ...baseConfig,
            dataPath: require('electron').app.getPath('userData'),
            tempPath: require('electron').app.getPath('temp')
        };
    } else {
        return {
            ...baseConfig,
            dataPath: '/spine-editor-data',
            tempPath: '/tmp'
        };
    }
};
```

---

## ğŸ“‹ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

<function_calls>
<invoke name="TodoWrite">
<parameter name="todos">[{"content": "3\u30da\u30a4\u30f3\u8cac\u52d9\u5206\u96e2\u8a2d\u8a08\u306e\u7b56\u5b9a", "status": "completed", "activeForm": "3\u30da\u30a4\u30f3\u8cac\u52d9\u5206\u96e2\u8a2d\u8a08\u3092\u7b56\u5b9a\u4e2d"}, {"content": "\u30da\u30a4\u30f3\u9593\u901a\u4fe1\u306eAPI\u4ed5\u69d8\u8a2d\u8a08", "status": "in_progress", "activeForm": "\u30da\u30a4\u30f3\u9593\u901a\u4fe1\u306eAPI\u4ed5\u69d8\u3092\u8a2d\u8a08\u4e2d"}, {"content": "\u30c7\u30fc\u30bf\u7ba1\u7406\u30fb\u4fdd\u5b58\u51e6\u7406\u306e\u5206\u96e2\u8a2d\u8a08", "status": "pending", "activeForm": "\u30c7\u30fc\u30bf\u7ba1\u7406\u30fb\u4fdd\u5b58\u51e6\u7406\u306e\u5206\u96e2\u8a2d\u8a08\u4e2d"}, {"content": "\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u30d5\u30ed\u30fc\u306e\u8a2d\u8a08", "status": "pending", "activeForm": "\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u30d5\u30ed\u30fc\u3092\u8a2d\u8a08\u4e2d"}, {"content": "\u5b9f\u88c5\u6642\u306e\u69cb\u9020\u5316\u6307\u91dd\u306e\u7b56\u5b9a", "status": "pending", "activeForm": "\u5b9f\u88c5\u6642\u306e\u69cb\u9020\u5316\u6307\u91dd\u3092\u7b56\u5b9a\u4e2d"}]