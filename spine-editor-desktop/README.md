# 🎯 Spine Editor Desktop

Professional Spine Animation Editor - Desktop Application

## 📋 概要

Spineアニメーション制作からHTMLサイト納品までの完全ワークフローをデスクトップ化したプロフェッショナル制作ツールです。

### 🎯 主要機能

- **📁 インポート**: 外部ホームページデータ + Spineキャラクターフォルダの読み込み
- **🎨 編集**: バウンディングボックス操作での配置・スケール調整
- **⏱️ タイムライン**: Maya Trax風タイムライン演出（Phase 3実装予定）
- **📦 エクスポート**: Web対応完全パッケージ生成（編集システム除去）

### 🖥️ UI構成

```
┌───────────────────────────────────────────────┐
│ ツールバー                                    │
├─────────┬───────────────────────┬─────────────┤
│ アウト   │   Preview/WebView     │ プロパティ   │
│ ライナー │  (背景+Spine配置)     │ ─────────── │
│（左）    │                       │ レイヤー     │
├─────────┴───────────────────────┴─────────────┤
│ タイムライン（Trax風）                         │
└───────────────────────────────────────────────┘
```

## 🚀 開発状況

### ✅ Phase 1: 最短MVP（実装中）

#### 完了済み
- **Electronベース構築**: main.js・preload.js・package.json
- **4パネルUI**: Photoshop風ダークテーマレイアウト
- **インポート機能**: フォルダ選択ダイアログ・VFS（Blob URL）システム
- **Spine自動検出**: `.json/.atlas/.png`ファイル構造解析
- **基本UI連動**: アウトライナー・プロパティ・レイヤーパネル

#### 実装中
- **表示・編集機能**: 既存spine-edit-coreとの統合
- **placements.json**: データ保存システム
- **エクスポート統合**: spine-package-exportとの連携

### 📅 今後の計画

- **Phase 2**: UI完全機能・複数キャラクター対応（3-4日）
- **Phase 3**: タイムライン基本機能（4-5日）
- **Phase 4**: 拡張・磨き込み（3-4日）

## 🛠️ 技術仕様

### 基盤技術
- **Electron v31.0.0**: デスクトップアプリケーション
- **HTML/CSS/JavaScript**: 85%既存Web版コード活用
- **VFS (Virtual File System)**: Blob URL + 仮想パス

### データ形式
```json
// placements.json (キャラクター配置)
{
  "version": "4.0",
  "characters": {
    "purattokun": {
      "position": {"x": 18, "y": 49},
      "scale": 0.55,
      "animation": "taiki"
    }
  }
}

// timeline.json (タイムライン演出・Phase 3)
{
  "version": "1.0",
  "tracks": [{
    "characterId": "purattokun",
    "clips": [{"animation": "syutugen", "startTime": 0}]
  }]
}
```

### 出力構成
```
package/
├─ index.html          # 再生用固定テンプレート
├─ assets/
│   ├─ spine/          # 自動収集Spineアセット
│   ├─ images/         # 背景画像
│   └─ js/             # player.js（再生ランタイム）
└─ styles/             # CSSファイル
```

## 📖 使い方

### 開発環境セットアップ

```bash
# プロジェクトディレクトリに移動
cd spine-editor-desktop

# 依存関係インストール
npm install

# 開発モード起動
npm run dev

# 本番ビルド
npm run build
```

### 基本操作フロー

1. **プロジェクト設定**
   - 「🏠 ホームページ」ボタンでWebサイトルートフォルダ選択
   - 「🎯 Spine」ボタンでキャラクターフォルダ選択

2. **キャラクター操作**
   - アウトライナーでキャラクター選択
   - プロパティパネルで数値調整
   - プレビューでバウンディングボックス編集

3. **保存・エクスポート**
   - `Ctrl+S`でプロジェクト保存
   - `Ctrl+E`でパッケージエクスポート

### ショートカット

| キー | 機能 |
|------|------|
| `Ctrl+N` | 新規プロジェクト |
| `Ctrl+O` | プロジェクトを開く |
| `Ctrl+S` | 保存 |
| `Ctrl+E` | エクスポート |
| `Space` | 再生/停止 |
| `F` | フィット表示 |
| `V` | 選択ツール |
| `G` | 移動ツール |
| `S` | スケールツール |

## 🎯 既存システム活用

### 高活用（85%流用）
- **spine-edit-core.js (15KB)**: 編集システム基盤
- **spine-package-export.js**: パッケージ出力システム
- **timeline-data-core.js**: データ永続化システム
- **複数キャラクター管理**: purattokun + nezumi対応

### 技術的優位性
- **Blob URL + VFS**: CORS制限完全回避
- **段階的実装**: 各Phaseで実用レベル到達
- **モジュール活用**: 既存20+タイムラインモジュール選択利用

## 📁 プロジェクト構成

```
spine-editor-desktop/
├── package.json                 # プロジェクト設定
├── README.md                   # このファイル
├── src/
│   ├── main/
│   │   └── main.js            # Electronメインプロセス
│   └── renderer/
│       ├── index.html         # メインUI
│       ├── preload.js         # セキュアAPI
│       ├── css/
│       │   └── main.css       # Photoshop風スタイル
│       └── js/
│           └── app.js         # アプリケーションロジック
├── build/                     # ビルド中間ファイル
└── dist/                      # 配布用パッケージ
```

## 🔧 開発・デバッグ

### デバッグ情報
- **開発者ツール**: 自動起動（`--dev`モード）
- **グローバル参照**: `window.spineEditorApp`
- **コンソール出力**: 詳細ログ・エラー情報

### 開発フロー
1. **機能追加**: `src/renderer/js/app.js`でロジック実装
2. **UI調整**: `src/renderer/css/main.css`でスタイル修正
3. **テスト**: `npm run dev`で即座確認
4. **ビルド**: `npm run build`で配布パッケージ生成

## 💡 設計思想

### 段階的実装アプローチ
- **最短一本を通す**: インポート→表示→編集→保存→エクスポート
- **実用断面を増やす**: 各Phaseで実際に使えるレベルまで完成
- **既存資産最大活用**: 85%既存コード流用で効率開発

### Photoshop風UI哲学
- **プロフェッショナル**: 制作者にとって使いやすい本格UI
- **ドッキング対応**: パネル位置カスタマイズ可能（Phase 4）
- **ダークテーマ**: 長時間作業に適した視認性

## 📊 期待効果

- **制作効率向上**: オフライン動作・高速ファイル処理
- **プロツール化**: 本格的制作ツールとしての市場価値
- **競争優位性**: 独自デスクトップツール・差別化要因
- **将来拡張性**: Timeline機能・カスタマイズ対応

---

**開発状況**: Phase 1実装中  
**目標期間**: 13-17日で完成  
**技術リスク**: 低（既存コード85%活用）

🎯 **次回実装**: spine-edit-coreとの統合・プレビュー機能実装