# Spineçµ±åˆã‚·ã‚¹ãƒ†ãƒ  ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

**ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ—¥**: 2025-08-28  
**ç†ç”±**: PureSpineLoader v4.0æ­£å¼ç‰ˆã¸ã®çµ±ä¸€ãƒ»æ··ä¹±é˜²æ­¢

## ğŸ“‹ ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ 

### âœ… ç¾åœ¨ã®æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
**PureSpineLoader v4.0** + **å€‹åˆ¥æç”»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `micromodules/spine-loader/PureSpineLoader.js`
- **æ¨å¥¨**: ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆãƒ»è²¬å‹™åˆ†é›¢ãƒ»å¤–éƒ¨ä¾å­˜ã‚¼ãƒ­
- **åˆ©ç‚¹**: ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ãƒ»ä¿å®ˆæ€§ãƒ»å†åˆ©ç”¨æ€§

---

## ğŸ—„ï¸ ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å†…å®¹

### A. SpineCharacterManager çµ±åˆç®¡ç†ç‰ˆ
**å ´æ‰€**: `spine-character-manager/`
- **æ—§å½¹å‰²**: CDNå¾…æ©Ÿãƒ»ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†ãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡çµ±åˆ
- **ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç†ç”±**: 
  - å¤šæ©Ÿèƒ½ã™ãã‚‹ï¼ˆCDN + ç®¡ç† + åˆ¶å¾¡ï¼‰
  - å¤–éƒ¨ä¾å­˜ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ãƒ»DOMæ“ä½œï¼‰
  - ãƒ†ã‚¹ãƒˆãŒå›°é›£
- **ä»£æ›¿**: PureSpineLoader v4.0 + å¿…è¦ãªæ©Ÿèƒ½ã‚’å€‹åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–

### B. Spine Integration Systems
**å ´æ‰€**: `integration-systems/`

#### spine-integration-v1-backup.js
- **æ—§å½¹å‰²**: åˆæœŸçµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ»v1ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç‰ˆ
- **ç‰¹å¾´**: ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯è¨­è¨ˆãƒ»åŸºæœ¬æ©Ÿèƒ½çµ±åˆ

#### spine-integration-v2.js / spine-integration-v2-unused.js  
- **æ—§å½¹å‰²**: v2çµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ»æ”¹è‰¯ç‰ˆ
- **ç‰¹å¾´**: æ©Ÿèƒ½æ‹¡å¼µãƒ»è¤‡é›‘åŒ–ãŒé€²ã‚“ã ç‰ˆ

#### spine-integration.jsï¼ˆå­˜åœ¨ã—ãŸå ´åˆï¼‰
- **æ—§å½¹å‰²**: æœ€æ–°çµ±åˆã‚·ã‚¹ãƒ†ãƒ 
- **ç‰¹å¾´**: å„ç¨®æ©Ÿèƒ½ã®çµ±åˆãƒ»é«˜æ©Ÿèƒ½åŒ–

---

## ğŸ”„ ç§»è¡Œã‚¬ã‚¤ãƒ‰

### æ—§ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰æ–°è¨­è¨ˆã¸ã®ç§»è¡Œ

#### Before (SpineCharacterManager)
```javascript
const manager = new SpineCharacterManager();
await manager.init();
const character = await manager.loadCharacter('nezumi', {
    basePath: '/assets/spine/characters/nezumi/'
});
manager.playAnimation(character, 'taiki');
```

#### After (ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ)
```javascript
// 1. èª­ã¿è¾¼ã¿å°‚ç”¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
const loader = new PureSpineLoader({
    basePath: '/assets/spine/characters/nezumi/',
    atlasPath: 'nezumi.atlas',
    jsonPath: 'nezumi.json'
});
const spineData = await loader.loadSpineAssets();

// 2. æç”»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆåˆ¥é€”å®Ÿè£…ï¼‰
const renderer = new SpineRenderer(spineData);
renderer.playAnimation('taiki');

// 3. ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
const characterManager = new CharacterManager();
characterManager.addCharacter('nezumi', renderer);
```

### è¨­è¨ˆæ€æƒ³ã®å¤‰åŒ–
1. **è²¬å‹™åˆ†é›¢**: èª­ã¿è¾¼ã¿ãƒ»æç”»ãƒ»ç®¡ç†ãƒ»åˆ¶å¾¡ã‚’å€‹åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–
2. **å¤–éƒ¨ä¾å­˜æ’é™¤**: DOMãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¸ã®ä¾å­˜ãªã—
3. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‹¬ç«‹ãƒ†ã‚¹ãƒˆå¯èƒ½
4. **çµ„ã¿åˆã‚ã›è‡ªç”±**: å¿…è¦ãªæ©Ÿèƒ½ã®ã¿é¸æŠåˆ©ç”¨

---

## âš ï¸ é‡è¦ãªæŠ€è¡“çš„å¤‰æ›´ç‚¹

### CDNå¾…æ©Ÿå‡¦ç†ã®åˆ†é›¢
**æ—§æ–¹å¼**: SpineCharacterManagerå†…ã§çµ±åˆå‡¦ç†
```javascript
// CDNèª­ã¿è¾¼ã¿å¾…æ©Ÿ + ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†ãŒæ··åœ¨
while (typeof spine === 'undefined') { await delay(100); }
```

**æ–°æ–¹å¼**: CDNå¾…æ©Ÿã¯åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¾ãŸã¯å¤–éƒ¨ã§å‡¦ç†
```javascript
// ç´”ç²‹ãªèª­ã¿è¾¼ã¿å‡¦ç†ã®ã¿
const loader = new PureSpineLoader(config);
// CDNç¢ºèªã¯å‘¼ã³å‡ºã—å´ã®è²¬ä»»
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
**æ—§æ–¹å¼**: çµ±åˆã‚·ã‚¹ãƒ†ãƒ å†…ã§è¤‡é›‘ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
**æ–°æ–¹å¼**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ˜ç¢ºãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’è¿”å´

---

## ğŸ“š å­¦ç¿’ãƒ»å‚è€ƒä¾¡å€¤

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å­¦ã¹ã‚‹ã“ã¨
1. **spine-character-manager.js**: 
   - çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³
   - CDNèª­ã¿è¾¼ã¿å¾…æ©Ÿã®å®Ÿè£…ä¾‹
   - Map-basedç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

2. **spine-integration-v*.js**:
   - çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®é€²åŒ–éç¨‹
   - æ©Ÿèƒ½è¿½åŠ ã«ã‚ˆã‚‹è¤‡é›‘åŒ–ã®çµŒç·¯
   - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®å¿…è¦æ€§

### è¨­è¨ˆä¸Šã®æ•™è¨“
- âŒ **Over-Engineering**: å¤šæ©Ÿèƒ½çµ±åˆã¯ä¿å®ˆæ€§ã‚’æãªã†
- âŒ **å¤–éƒ¨ä¾å­˜**: ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ãƒ»DOMä¾å­˜ã¯æŸ”è»Ÿæ€§ã‚’é˜»å®³
- âœ… **Single Responsibility**: å˜ä¸€è²¬ä»»åŸå‰‡ã®é‡è¦æ€§
- âœ… **Composition over Inheritance**: çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚‹æŸ”è»Ÿæ€§

---

## ğŸ” ä½¿ç”¨ã—ã¦ã„ãŸå ´åˆã®ç§»è¡Œæ‰‹é †

### 1. ç¾åœ¨ã®ä½¿ç”¨ç®‡æ‰€ç‰¹å®š
```bash
# ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å‚ç…§ã‚’æ¤œç´¢
grep -r "SpineCharacterManager\|spine-integration" --include="*.js" --include="*.html" .
```

### 2. æ®µéšçš„ç§»è¡Œ
1. **Phase 1**: PureSpineLoader v4.0ã‚’ä¸¦è¡Œå°å…¥
2. **Phase 2**: æ—§ã‚·ã‚¹ãƒ†ãƒ å‚ç…§ã‚’æ®µéšçš„ã«æ–°ã‚·ã‚¹ãƒ†ãƒ ã«ç½®æ›
3. **Phase 3**: æ—§ã‚·ã‚¹ãƒ†ãƒ å‚ç…§ã‚’å®Œå…¨å‰Šé™¤

### 3. æ©Ÿèƒ½è£œå®Œ
ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ ã®æ©Ÿèƒ½ã§å¿…è¦ãªã‚‚ã®ã¯ã€å€‹åˆ¥ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å†å®Ÿè£…

---

**ç§»è¡Œæ”¯æ´ãƒ»æŠ€è¡“ç›¸è«‡**: é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„