<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spine編集システム - モジュラー版使用例</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .code-block {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .module-info {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .demo-area {
            border: 2px dashed #ccc;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 100px;
        }
    </style>
</head>
<body>
    <h1>🎯 Spine編集システム - モジュラー版使用例</h1>
    
    <h2>📋 モジュール構成</h2>
    
    <div class="module-info">
        <h3>1. core-system.js</h3>
        <p><strong>役割:</strong> DOM初期化、状態管理、保存・復元処理</p>
        <p><strong>主要関数:</strong> initializeDOMElements(), setupCharacterInitialState(), loadSavedState(), confirmEdit(), cancelEdit()</p>
    </div>
    
    <div class="module-info">
        <h3>2. ui-components.js</h3>
        <p><strong>役割:</strong> UI要素管理、座標表示、確認パネル</p>
        <p><strong>主要関数:</strong> createCoordinateDisplay(), createConfirmPanel(), showConfirmPanel(), updateUI()</p>
    </div>
    
    <div class="module-info">
        <h3>3. character-editing.js</h3>
        <p><strong>役割:</strong> キャラクター編集機能、ハンドル作成、リサイズ処理</p>
        <p><strong>主要関数:</strong> startCharacterEdit(), createHandles(), performResize(), moveCharacter()</p>
    </div>
    
    <div class="module-info">
        <h3>4. event-handlers.js</h3>
        <p><strong>役割:</strong> イベントリスナー設定、マウス・タッチイベント処理</p>
        <p><strong>主要関数:</strong> setupEventListeners(), handleMouseMove(), handleTouchStart()</p>
    </div>
    
    <div class="module-info">
        <h3>5. debug-utilities.js</h3>
        <p><strong>役割:</strong> デバッグ・診断機能、緊急復元、継続監視</p>
        <p><strong>主要関数:</strong> emergencyDiagnostic(), multiRestoreSystem(), ultimatePositionFix()</p>
    </div>
    
    <h2>🚀 基本的な使用方法</h2>
    
    <h3>Method 1: 全モジュール一括読み込み</h3>
    <div class="code-block">
&lt;!-- 全モジュールを順序通りに読み込み --&gt;
&lt;script src="spine-positioning-modules/core-system.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/ui-components.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/character-editing.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/event-handlers.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/debug-utilities.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/spine-positioning-system-modular.js"&gt;&lt;/script&gt;
    </div>
    
    <h3>Method 2: メインファイルのみ（推奨）</h3>
    <div class="code-block">
&lt;!-- 旧ファイルを置き換え --&gt;
&lt;!-- &lt;script src="spine-positioning-system-explanation.js"&gt;&lt;/script&gt; --&gt;

&lt;!-- 新しいモジュラー版を使用 --&gt;
&lt;script src="spine-positioning-modules/core-system.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/ui-components.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/character-editing.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/event-handlers.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/debug-utilities.js"&gt;&lt;/script&gt;
&lt;script src="spine-positioning-modules/spine-positioning-system-modular.js"&gt;&lt;/script&gt;
    </div>
    
    <h2>💡 基本的な使用例</h2>
    
    <div class="code-block">
// 編集モード開始（従来と同じ）
startCharacterEdit();

// 編集終了
endEditMode();

// 緊急診断・修正（新機能）
ultimatePositionFix();

// モジュール読み込み確認
verifyModules();

// 互換性確認
ensureCompatibility();
    </div>
    
    <h2>🔧 デバッグ機能</h2>
    
    <div class="code-block">
// 緊急診断システム
emergencyDiagnostic();

// 多重復元システム
multiRestoreSystem();

// 継続監視開始
startContinuousRestoreMonitoring(restoreData);

// 継続監視停止
stopContinuousRestoreMonitoring();

// 総合修正コマンド
ultimatePositionFix();
    </div>
    
    <h2>📊 パフォーマンス・保守性の改善</h2>
    
    <ul>
        <li><strong>コード分離:</strong> 機能別にファイルが分かれているため、修正範囲が明確</li>
        <li><strong>テスト容易性:</strong> 各モジュールが独立しているため、単体テストが可能</li>
        <li><strong>再利用性:</strong> 必要なモジュールのみを選択して使用可能</li>
        <li><strong>保守性:</strong> バグ修正や機能追加が特定のモジュールに限定される</li>
        <li><strong>デバッグ性:</strong> 専用のデバッグモジュールにより問題解決が高速化</li>
    </ul>
    
    <h2>🚨 移行手順</h2>
    
    <ol>
        <li><strong>バックアップ作成:</strong> 既存のspine-positioning-system-explanation.jsをバックアップ</li>
        <li><strong>モジュールファイル配置:</strong> spine-positioning-modulesフォルダを適切な場所に配置</li>
        <li><strong>HTML更新:</strong> script要素を新しいモジュール版に変更</li>
        <li><strong>動作確認:</strong> 編集機能が正常に動作することを確認</li>
        <li><strong>デバッグテスト:</strong> verifyModules()でモジュール読み込み確認</li>
    </ol>
    
    <div class="demo-area">
        <h3>🎮 デモエリア</h3>
        <p>ここに実際のSpineキャラクターを配置してテストできます</p>
        <button onclick="startCharacterEdit()" style="padding: 10px 20px; margin: 5px;">編集開始</button>
        <button onclick="endEditMode()" style="padding: 10px 20px; margin: 5px;">編集終了</button>
        <button onclick="ultimatePositionFix()" style="padding: 10px 20px; margin: 5px;">緊急修正</button>
    </div>
    
    <h2>🔗 関連ファイル</h2>
    
    <ul>
        <li><strong>既存ファイル:</strong> spine-positioning-system-explanation.js（49関数・1つのファイル）</li>
        <li><strong>新モジュール:</strong> 5つのファイルに機能分離（保守性向上）</li>
        <li><strong>互換性:</strong> 既存のAPIは完全に維持</li>
        <li><strong>拡張性:</strong> 新機能は該当モジュールに追加するだけで完成</li>
    </ul>
    
    <!-- モジュールを実際に読み込み（テスト用） -->
    <script>
        // 実際のモジュールが読み込まれていない場合のフォールバック
        if (typeof startCharacterEdit === 'undefined') {
            window.startCharacterEdit = function() {
                alert('startCharacterEdit() 実行\n※実際のモジュールを読み込んでください');
            };
            window.endEditMode = function() {
                alert('endEditMode() 実行\n※実際のモジュールを読み込んでください');
            };
            window.ultimatePositionFix = function() {
                alert('ultimatePositionFix() 実行\n※実際のモジュールを読み込んでください');
            };
        }
    </script>
    
</body>
</html>