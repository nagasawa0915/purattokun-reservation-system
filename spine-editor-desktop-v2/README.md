# Spine Editor Desktop v2.0

**軽量・高速・シンプル設計による完全リファクタリング版**

## 🎯 プロジェクト概要

Spine Editor Desktop v2.0 は、既存システムの知見を100%活用した完全リファクタリング版です。v1.0で発見した問題を解決し、軽量・高速・シンプルを最重要方針として再設計されています。

### 🚀 v2.0の特徴

- **500行制限ルール**: 全ファイルを500行以内に制限し、保守性を向上
- **モジュール分離**: 機能別ファイル分割による高い拡張性
- **軽量依存関係**: 必要最小限のnpm dependencies（Electron + Express のみ）
- **WebGL問題解決**: v1.0で発見したWebGL問題の解決策を最初から統合
- **プロフェッショナルUI**: デスクトップアプリらしい洗練されたインターフェース

## 📋 システム構成

```
spine-editor-desktop-v2/
├── package.json          # 軽量パッケージ設定
├── src/
│   ├── main/             # Electronメインプロセス
│   │   ├── main.js       # メインプロセス制御 (300行以内)
│   │   └── server.js     # Express HTTP サーバー (200行以内)
│   └── renderer/         # レンダラープロセス
│       ├── index.html    # メインUI (シンプル・軽量)
│       ├── preload.js    # セキュアIPC通信
│       ├── css/
│       │   └── main.css  # 統一スタイル設計
│       ├── js/
│       │   ├── app.js    # メインアプリ制御 (400行以内)
│       │   ├── spine.js  # Spine WebGL統合 (500行以内)
│       │   ├── ui.js     # UI管理 (300行以内)
│       │   └── export.js # パッケージ出力 (200行以内)
│       └── assets/
│           └── spine/
│               └── spine-webgl-minimal.js
└── README.md
```

## 🛠️ 技術仕様

### 基盤技術
- **Electron**: ^28.0.0 (最新安定版)
- **Express**: ^4.18.2 (HTTP サーバー)
- **Node.js**: ≥18.0.0

### Spine統合
- **Spine WebGL**: 軽量版統合
- **WebGLコンテキスト**: 最適化された描画パイプライン
- **アニメーション制御**: リアルタイム再生・編集

### セキュリティ
- **Context Isolation**: 有効化
- **Node Integration**: 無効化
- **Preload Script**: セキュアIPC通信

## 🚀 開発・実行方法

### 初期セットアップ
```bash
cd spine-editor-desktop-v2
npm install
```

### 開発実行
```bash
# 開発モード（DevTools自動起動）
npm run dev

# 通常実行
npm start
```

### ビルド
```bash
# ディストリビューション生成
npm run build

# パッケージング（実行ファイル生成なし）
npm run pack
```

## 🎮 使用方法

### プロジェクト操作
1. **プロジェクトを開く**: `Ctrl+O` または File > Open Project
2. **プロジェクト保存**: `Ctrl+S` または File > Save Project  
3. **パッケージ出力**: `Ctrl+E` または File > Export Package

### 編集操作
- **V**: 選択ツール
- **M**: 移動ツール  
- **S**: スケールツール
- **ESC**: 選択解除

### ビューポート操作
- **マウスホイール**: ズーム
- **ドラッグ**: キャラクター移動
- **クリック**: キャラクター選択

## 📐 設計思想

### v3.0システム開発哲学の継承
v2.0は既存のv3.0システム開発哲学を完全に継承しています：

- **シンプル・軽量・複雑化回避**
- **必要最小限・シンプル設計・軽量性維持**
- **既存機能の安定性最優先**

### 500行制限ルールの適用
全ファイルが500行以内に制限され、以下の効果を実現：

- **保守性向上**: デバッグ・修正の容易性
- **理解性向上**: コードの全体像把握
- **拡張性確保**: モジュール分割による機能追加

### モジュール分離設計
機能別ファイル分割により：

- **独立性**: 各モジュールの独立開発・テスト
- **再利用性**: コンポーネントの再利用可能性
- **拡張性**: 新機能の追加容易性

## 🔧 v1.0からの改良点

### 問題解決
- **WebGL初期化問題**: 解決済み手法を最初から統合
- **依存関係問題**: 最小限の依存関係に整理
- **ファイル肥大化**: 500行制限による分割

### 機能強化
- **プロフェッショナルUI**: デスクトップアプリ品質のインターフェース
- **セキュリティ強化**: Context Isolation + セキュアIPC
- **パフォーマンス最適化**: 軽量設計による高速動作

### 開発効率化
- **モジュール化**: 機能別開発による効率向上
- **デバッグ性**: 問題箇所の特定・修正の高速化
- **拡張性**: 新機能追加の容易さ

## 🎯 今後の開発予定

### Phase 1: 基盤完成
- [x] プロジェクト構造作成
- [x] 基本UI実装
- [x] Spine統合基盤
- [ ] 実際のSpineファイル読み込みテスト

### Phase 2: 機能実装
- [ ] ドラッグ&ドロップ編集
- [ ] プロパティ編集パネル
- [ ] アニメーション制御
- [ ] プロジェクト保存・読み込み

### Phase 3: 高度機能
- [ ] パッケージ出力システム
- [ ] プレビュー機能
- [ ] 設定システム
- [ ] プラグイン対応

## ⚠️ 重要な注意事項

### Spine WebGL ライブラリ
現在の `spine-webgl-minimal.js` は開発用プレースホルダーです。実際の運用では：

```bash
# 既存のSpine WebGLライブラリをコピー
cp ../spine-editor-desktop/src/renderer/assets/js/libs/spine-webgl.js \
   src/renderer/assets/spine/spine-webgl-minimal.js
```

### セキュリティ
- Node Integration は無効化されています
- ファイル操作はElectron IPCを経由してください
- 直接的なNode.js API呼び出しは禁止されています

### パフォーマンス
- WebGL描画は最適化されていますが、大量のキャラクター表示時は注意が必要です
- メモリ使用量の監視機能が組み込まれています

## 🤝 開発ガイドライン

### コーディング規約
- **ファイルサイズ**: 500行以内厳守
- **コメント**: 関数・クラスの説明必須
- **エラーハンドリング**: try-catchブロック必須
- **ログ**: console.log with prefix（🚀✅❌⚠️）

### ファイル分割の基準
- 500行到達前に機能別分割を検討
- 1つのファイルは1つの責任範囲
- 共通機能は別モジュールに分離

### テスト方法
- Electronアプリとしての動作確認
- 各モジュールの独立テスト
- WebGL動作確認

## 📚 参考資料

- [Electron Documentation](https://www.electronjs.org/docs)
- [Spine Runtime Documentation](http://esotericsoftware.com/spine-runtimes-guide)
- [WebGL MDN Reference](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API)

## 🔗 関連プロジェクト

- **spine-editor-desktop v1.0**: `/spine-editor-desktop` (参考用・バックアップ保持)
- **Webベース編集システム**: `/index.html?edit=true` (既存システム)

---

**Spine Editor Desktop v2.0** - 軽量・高速・シンプル設計による次世代Spineエディター

*Generated by Spine Editor Desktop v2.0 Project Generator*