<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚·ãƒ³ãƒ—ãƒ«Spineã‚·ãƒ¼ãƒ³ - ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª v2.0</title>
    
    <!-- ã‚·ãƒ³ãƒ—ãƒ«Spineã‚·ãƒ¼ãƒ³å°‚ç”¨CSS -->
    <link rel="stylesheet" href="css/simple-scene.css">
    
    <!-- Spine WebGLãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <script src="assets/spine/spine-webgl.js"></script>
    <!-- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨: spine-webgl-minimal.js ã‚‚èª­ã¿è¾¼ã¿å¯èƒ½ -->
</head>
<body>
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div class="simple-scene-container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="scene-header">
            <div class="header-content">
                <h1 class="scene-title">ğŸ­ ã‚·ãƒ³ãƒ—ãƒ«Spineã‚·ãƒ¼ãƒ³</h1>
                <div class="scene-info">
                    <span class="scene-status" id="scene-status">åˆæœŸåŒ–ä¸­...</span>
                    <button class="debug-toggle-btn" id="debug-toggle" title="ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ">
                        ğŸ”§ ãƒ‡ãƒãƒƒã‚°
                    </button>
                </div>
            </div>
        </header>
        
        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <main class="scene-main">
            <!-- ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¨ãƒªã‚¢ -->
            <section class="canvas-section">
                <div class="canvas-container">
                    <canvas id="spine-canvas" width="800" height="600">
                        ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼HTML5 Canvasã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
                    </canvas>
                    
                    <!-- Canvasã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤UI -->
                    <div class="canvas-overlay" id="canvas-overlay">
                        <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰è¡¨ç¤º -->
                        <div class="edit-mode-indicator" id="edit-mode-indicator" style="display: none;">
                            âœï¸ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ - ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•ã§ãã¾ã™
                        </div>
                        
                        <!-- åº§æ¨™è¡¨ç¤º -->
                        <div class="coordinate-display" id="coordinate-display" style="display: none;">
                            <div class="coord-item">
                                <span class="coord-label">X:</span>
                                <span class="coord-value" id="coord-x">0.0</span>
                            </div>
                            <div class="coord-item">
                                <span class="coord-label">Y:</span>
                                <span class="coord-value" id="coord-y">0.0</span>
                            </div>
                            <div class="coord-item">
                                <span class="coord-label">ã‚¹ã‚±ãƒ¼ãƒ«:</span>
                                <span class="coord-value" id="coord-scale">1.0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
            <aside class="control-panel">
                <div class="panel-header">
                    <h2>ğŸ® ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h2>
                </div>
                
                <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ -->
                <div class="control-group">
                    <h3>ğŸˆ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</h3>
                    <div class="character-selector">
                        <select id="character-select" class="character-select">
                            <option value="">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠ...</option>
                            <option value="purattokun">ã·ã‚‰ã£ã¨ãã‚“</option>
                            <option value="nezumi">ã­ãšã¿</option>
                        </select>
                        <button id="load-character" class="action-btn" disabled>
                            ğŸ“¥ èª­ã¿è¾¼ã¿
                        </button>
                    </div>
                </div>
                
                <!-- ç·¨é›†ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
                <div class="control-group">
                    <h3>âœï¸ ç·¨é›†</h3>
                    <div class="edit-controls">
                        <button id="edit-mode-toggle" class="mode-btn" disabled>
                            ãƒ‰ãƒ©ãƒƒã‚°ç·¨é›†: OFF
                        </button>
                        <button id="reset-position" class="action-btn" disabled>
                            ğŸ¯ ä½ç½®ãƒªã‚»ãƒƒãƒˆ
                        </button>
                    </div>
                </div>
                
                <!-- ä½ç½®ç²¾å¯†èª¿æ•´ -->
                <div class="control-group">
                    <h3>ğŸ¯ ç²¾å¯†èª¿æ•´</h3>
                    <div class="position-controls">
                        <div class="input-row">
                            <label for="pos-x">X:</label>
                            <input type="number" id="pos-x" class="pos-input" step="0.1" value="0" disabled>
                        </div>
                        <div class="input-row">
                            <label for="pos-y">Y:</label>
                            <input type="number" id="pos-y" class="pos-input" step="0.1" value="0" disabled>
                        </div>
                        <div class="input-row">
                            <label for="scale-xy">ã‚¹ã‚±ãƒ¼ãƒ«:</label>
                            <input type="number" id="scale-xy" class="pos-input" step="0.01" min="0.1" max="3.0" value="1.0" disabled>
                        </div>
                    </div>
                </div>
                
                <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
                <div class="control-group">
                    <h3>ğŸ¥ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                    <div class="animation-controls">
                        <select id="animation-select" class="animation-select" disabled>
                            <option value="">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠ...</option>
                        </select>
                        <div class="animation-buttons">
                            <button id="play-animation" class="action-btn" disabled>â–¶ï¸ å†ç”Ÿ</button>
                            <button id="stop-animation" class="action-btn" disabled>â¹ï¸ åœæ­¢</button>
                        </div>
                    </div>
                </div>
                
                <!-- ãƒ‡ãƒãƒƒã‚°æƒ…å ± -->
                <div class="control-group debug-group" id="debug-info" style="display: none;">
                    <h3>ğŸ”§ ãƒ‡ãƒãƒƒã‚°æƒ…å ±</h3>
                    <div class="debug-content">
                        <div class="debug-item">
                            <span class="debug-label">åº§æ¨™å¤‰æ›:</span>
                            <span class="debug-value" id="debug-transform-count">0</span>
                        </div>
                        <div class="debug-item">
                            <span class="debug-label">FPS:</span>
                            <span class="debug-value" id="debug-fps">--</span>
                        </div>
                        <div class="debug-item">
                            <span class="debug-label">Canvas:</span>
                            <span class="debug-value" id="debug-canvas-info">--</span>
                        </div>
                    </div>
                    <button id="coordinate-test" class="action-btn">ğŸ” åº§æ¨™ãƒ†ã‚¹ãƒˆ</button>
                </div>
            </aside>
        </main>
        
        <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
        <footer class="scene-footer">
            <div class="footer-content">
                <span class="version-info">Desktop App v2.0 - Simple Scene</span>
                <span class="coordinate-system-info">çµ±ä¸€åº§æ¨™ã‚·ã‚¹ãƒ†ãƒ ä½¿ç”¨</span>
            </div>
        </footer>
    </div>
    
    <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="message-overlay" id="message-overlay" style="display: none;">
        <div class="message-box">
            <div class="message-icon" id="message-icon">ğŸ’¬</div>
            <div class="message-text" id="message-text">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
            <button class="message-close" id="message-close">Ã—</button>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script type="module">
        import { createSimpleScene } from './js/simple-scene-manager.js';
        import { createCoordinateSystem } from './js/unified-coordinate-system.js';
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let sceneManager = null;
        let debugMode = false;
        let fpsCounter = { frames: 0, lastTime: 0, fps: 0 };
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('ğŸš€ ã‚·ãƒ³ãƒ—ãƒ«Spineã‚·ãƒ¼ãƒ³ åˆæœŸåŒ–é–‹å§‹...');
            
            try {
                await initializeScene();
                setupUIEventListeners();
                updateStatus('âœ… æº–å‚™å®Œäº† - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„');
                
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                updateStatus('âŒ åˆæœŸåŒ–å¤±æ•—', 'error');
                showMessage('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        });
        
        /**
         * ã‚·ãƒ¼ãƒ³ã‚’åˆæœŸåŒ–
         */
        async function initializeScene() {
            const canvas = document.getElementById('spine-canvas');
            if (!canvas) {
                throw new Error('Canvasè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
            
            // ã‚·ãƒ¼ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä½œæˆ
            sceneManager = createSimpleScene({ debug: debugMode });
            
            // CanvasåˆæœŸåŒ–
            const success = await sceneManager.initializeCanvas(canvas);
            if (!success) {
                throw new Error('CanvasåˆæœŸåŒ–å¤±æ•—');
            }
            
            console.log('âœ… ã‚·ãƒ¼ãƒ³åˆæœŸåŒ–å®Œäº†');
        }
        
        /**
         * UIã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
         */
        function setupUIEventListeners() {
            // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
            document.getElementById('debug-toggle').addEventListener('click', () => {
                debugMode = !debugMode;
                if (sceneManager) {
                    sceneManager.setDebugMode(debugMode);
                }
                
                const debugInfo = document.getElementById('debug-info');
                const coordDisplay = document.getElementById('coordinate-display');
                
                if (debugMode) {
                    debugInfo.style.display = 'block';
                    coordDisplay.style.display = 'block';
                    startFPSCounter();
                } else {
                    debugInfo.style.display = 'none';
                    coordDisplay.style.display = 'none';
                }
                
                updateDebugToggleButton();
            });
            
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ
            document.getElementById('character-select').addEventListener('change', (e) => {
                const loadBtn = document.getElementById('load-character');
                loadBtn.disabled = !e.target.value;
            });
            
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿
            document.getElementById('load-character').addEventListener('click', async () => {
                const characterId = document.getElementById('character-select').value;
                if (!characterId) return;
                
                try {
                    updateStatus('ğŸ“¥ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿ä¸­...', 'loading');
                    
                    const characterData = {
                        id: characterId,
                        atlasPath: `assets/spine/characters/${characterId}/${characterId}.atlas`,
                        jsonPath: `assets/spine/characters/${characterId}/${characterId}.json`
                    };
                    
                    const success = await sceneManager.loadCharacter(characterData);
                    if (!success) {
                        throw new Error('ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿å¤±æ•—');
                    }
                    
                    // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–‹å§‹
                    sceneManager.startRenderLoop();
                    
                    // UIæœ‰åŠ¹åŒ–
                    enableCharacterControls();
                    
                    updateStatus(`âœ… ${characterId} èª­ã¿è¾¼ã¿å®Œäº†`, 'success');
                    showMessage('æˆåŠŸ', `${characterId}ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`, 'success');
                    
                } catch (error) {
                    console.error('âŒ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                    updateStatus('âŒ èª­ã¿è¾¼ã¿å¤±æ•—', 'error');
                    showMessage('ã‚¨ãƒ©ãƒ¼', error.message, 'error');
                }
            });
            
            // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
            document.getElementById('edit-mode-toggle').addEventListener('click', () => {
                if (!sceneManager) return;
                
                const isEdit = !sceneManager.isEditMode;
                sceneManager.setEditMode(isEdit);
                
                const btn = document.getElementById('edit-mode-toggle');
                const indicator = document.getElementById('edit-mode-indicator');
                
                btn.textContent = `ãƒ‰ãƒ©ãƒƒã‚°ç·¨é›†: ${isEdit ? 'ON' : 'OFF'}`;
                btn.className = isEdit ? 'mode-btn active' : 'mode-btn';
                
                indicator.style.display = isEdit ? 'block' : 'none';
                
                if (isEdit) {
                    updateStatus('âœï¸ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ - ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•ã§ãã¾ã™', 'edit');
                } else {
                    updateStatus('âœ… ç·¨é›†ãƒ¢ãƒ¼ãƒ‰çµ‚äº†', 'success');
                }
            });
            
            // ä½ç½®ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('reset-position').addEventListener('click', () => {
                if (sceneManager) {
                    sceneManager.setCharacterPosition(0, 0);
                    updatePositionInputs();
                    showMessage('ãƒªã‚»ãƒƒãƒˆ', 'ä½ç½®ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ', 'info');
                }
            });
            
            // ä½ç½®å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ
            ['pos-x', 'pos-y', 'scale-xy'].forEach(id => {
                document.getElementById(id).addEventListener('input', updatePositionFromInputs);
            });
            
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¯ãƒ­ãƒ¼ã‚º
            document.getElementById('message-close').addEventListener('click', () => {
                document.getElementById('message-overlay').style.display = 'none';
            });
            
            // åº§æ¨™ãƒ†ã‚¹ãƒˆ
            document.getElementById('coordinate-test').addEventListener('click', () => {
                if (sceneManager && sceneManager.coordinateSystem) {
                    const result = sceneManager.coordinateSystem.testCoordinateConsistency(200, 150);
                    console.log('ğŸ” åº§æ¨™ãƒ†ã‚¹ãƒˆçµæœ:', result);
                    showMessage('ãƒ†ã‚¹ãƒˆçµæœ', 
                        `ä¸€è²«æ€§: ${result.isConsistent ? 'âœ…' : 'âŒ'} èª¤å·®: ${result.error.max.toFixed(2)}px`, 
                        result.isConsistent ? 'success' : 'warning');
                }
            });
        }
        
        /**
         * ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹åŒ–
         */
        function enableCharacterControls() {
            const controls = [
                'edit-mode-toggle', 'reset-position', 'pos-x', 'pos-y', 'scale-xy',
                'animation-select', 'play-animation', 'stop-animation'
            ];
            
            controls.forEach(id => {
                document.getElementById(id).disabled = false;
            });
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§æ›´æ–°
            updateAnimationList();
            
            // ä½ç½®å…¥åŠ›æ›´æ–°é–‹å§‹
            startPositionUpdateLoop();
        }
        
        /**
         * ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§ã‚’æ›´æ–°
         */
        function updateAnimationList() {
            if (!sceneManager) return;
            
            const info = sceneManager.getCharacterInfo();
            if (info.error) return;
            
            const select = document.getElementById('animation-select');
            select.innerHTML = '<option value="">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠ...</option>';
            
            info.animations.forEach(animName => {
                const option = document.createElement('option');
                option.value = animName;
                option.textContent = animName;
                select.appendChild(option);
            });
        }
        
        /**
         * ä½ç½®å…¥åŠ›ã‚’æ›´æ–°
         */
        function updatePositionInputs() {
            if (!sceneManager) return;
            
            const info = sceneManager.getCharacterInfo();
            if (info.error) return;
            
            document.getElementById('pos-x').value = info.position.x.toFixed(1);
            document.getElementById('pos-y').value = info.position.y.toFixed(1);
            document.getElementById('scale-xy').value = info.scale.x.toFixed(2);
            
            // åº§æ¨™è¡¨ç¤ºæ›´æ–°
            if (debugMode) {
                document.getElementById('coord-x').textContent = info.position.x.toFixed(1);
                document.getElementById('coord-y').textContent = info.position.y.toFixed(1);
                document.getElementById('coord-scale').textContent = info.scale.x.toFixed(2);
            }
        }
        
        /**
         * å…¥åŠ›å€¤ã‹ã‚‰ä½ç½®ã‚’æ›´æ–°
         */
        function updatePositionFromInputs() {
            if (!sceneManager) return;
            
            const x = parseFloat(document.getElementById('pos-x').value) || 0;
            const y = parseFloat(document.getElementById('pos-y').value) || 0;
            const scale = parseFloat(document.getElementById('scale-xy').value) || 1.0;
            
            sceneManager.setCharacterPosition(x, y);
            
            // ã‚¹ã‚±ãƒ¼ãƒ«è¨­å®š
            if (sceneManager.skeleton) {
                sceneManager.skeleton.scaleX = scale;
                sceneManager.skeleton.scaleY = scale;
            }
        }
        
        /**
         * ä½ç½®æ›´æ–°ãƒ«ãƒ¼ãƒ—ã‚’é–‹å§‹
         */
        function startPositionUpdateLoop() {
            setInterval(() => {
                if (sceneManager && !sceneManager.isDragging) {
                    updatePositionInputs();
                }
            }, 100); // 100msé–“éš”
        }
        
        /**
         * FPSã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’é–‹å§‹
         */
        function startFPSCounter() {
            const updateFPS = (currentTime) => {
                fpsCounter.frames++;
                
                if (currentTime - fpsCounter.lastTime >= 1000) {
                    fpsCounter.fps = Math.round((fpsCounter.frames * 1000) / (currentTime - fpsCounter.lastTime));
                    fpsCounter.frames = 0;
                    fpsCounter.lastTime = currentTime;
                    
                    if (debugMode) {
                        document.getElementById('debug-fps').textContent = fpsCounter.fps;
                        
                        // ãã®ä»–ã®ãƒ‡ãƒãƒƒã‚°æƒ…å ±æ›´æ–°
                        if (sceneManager && sceneManager.coordinateSystem) {
                            const diagnostic = sceneManager.coordinateSystem.getDiagnosticInfo();
                            document.getElementById('debug-transform-count').textContent = diagnostic.system.transformCount;
                            document.getElementById('debug-canvas-info').textContent = 
                                `${diagnostic.canvas.width}x${diagnostic.canvas.height}`;
                        }
                    }
                }
                
                if (debugMode) {
                    requestAnimationFrame(updateFPS);
                }
            };
            
            if (debugMode) {
                fpsCounter.lastTime = performance.now();
                requestAnimationFrame(updateFPS);
            }
        }
        
        /**
         * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
         */
        function updateStatus(message, type = 'info') {
            const statusElement = document.getElementById('scene-status');
            statusElement.textContent = message;
            statusElement.className = `scene-status ${type}`;
        }
        
        /**
         * ãƒ‡ãƒãƒƒã‚°ãƒœã‚¿ãƒ³ã‚’æ›´æ–°
         */
        function updateDebugToggleButton() {
            const btn = document.getElementById('debug-toggle');
            btn.className = debugMode ? 'debug-toggle-btn active' : 'debug-toggle-btn';
            btn.textContent = `ğŸ”§ ãƒ‡ãƒãƒƒã‚° ${debugMode ? 'ON' : 'OFF'}`;
        }
        
        /**
         * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
         */
        function showMessage(title, message, type = 'info') {
            const overlay = document.getElementById('message-overlay');
            const icon = document.getElementById('message-icon');
            const text = document.getElementById('message-text');
            
            const icons = {
                info: 'ğŸ’¬',
                success: 'âœ…',
                warning: 'âš ï¸',
                error: 'âŒ',
                loading: 'ğŸ”„'
            };
            
            icon.textContent = icons[type] || icons.info;
            text.innerHTML = `<strong>${title}</strong><br>${message}`;
            
            overlay.className = `message-overlay ${type}`;
            overlay.style.display = 'flex';
            
            // 3ç§’å¾Œã«è‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆã‚¨ãƒ©ãƒ¼ä»¥å¤–ï¼‰
            if (type !== 'error') {
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 3000);
            }
        }
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å…¬é–‹ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        window.sceneManager = sceneManager;
        window.showMessage = showMessage;
        
    </script>
</body>
</html>