/**
 * Spine Editor Desktop v2.0 - HTML Export Module
 * HTMLè‡ªå‹•ãƒ‘ãƒƒãƒãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‡¦ç†æ©Ÿèƒ½
 */

export class ExportHTML {
  constructor(exportConfig = {}) {
    this.config = {
      includeLibrary: true,
      embedAssets: true,
      minify: false,
      responsive: true,
      ...exportConfig.html
    };
  }

  /**
   * HTMLç”Ÿæˆãƒ¡ã‚¤ãƒ³å‡¦ç†
   */
  async generateHTML(project) {
    const character = project.spineData?.characters?.[0];
    
    const html = `<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${project.name || 'Spine Animation'}</title>
    <link rel="stylesheet" href="styles.css">
    ${this.generateInlineStyles(project)}
</head>
<body>
    <div class="container">
        <div class="spine-container">
            <canvas id="spine-canvas" width="800" height="600"></canvas>
            ${this.generateControls()}
        </div>
    </div>

    <!-- Generated by Spine Editor Desktop v2.0 -->
    ${this.config.includeLibrary ? '<script src="spine-webgl.js"></script>' : ''}
    <script>
        ${this.generateSpineScript(project)}
    </script>
</body>
</html>`;

    return html;
  }

  /**
   * ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ç”Ÿæˆ
   */
  generateInlineStyles(project) {
    return `<style>
        body {
            margin: 0;
            padding: 0;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .spine-container {
            position: relative;
        }
        canvas {
            display: block;
            max-width: 100%;
            height: auto;
        }
        .controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }
        .btn {
            padding: 8px 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.2s;
        }
        .btn:hover {
            background: #0056b3;
        }
        ${this.config.responsive ? this.generateResponsiveCSS() : ''}
    </style>`;
  }

  /**
   * ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¦ç´ ç”Ÿæˆ
   */
  generateControls() {
    return `<div class="controls">
        <button class="btn" onclick="playAnimation()" title="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿ">â–¶ï¸ Play</button>
        <button class="btn" onclick="pauseAnimation()" title="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€æ™‚åœæ­¢">â¸ï¸ Pause</button>
        <button class="btn" onclick="stopAnimation()" title="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åœæ­¢">â¹ï¸ Stop</button>
    </div>`;
  }

  /**
   * Spineã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ
   */
  generateSpineScript(project) {
    return `
// Spine Editor Desktop v2.0 - Generated Script
let canvas, gl, shader, batcher;
let skeleton, animationState;

function initSpine() {
    canvas = document.getElementById('spine-canvas');
    gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    
    if (!gl) {
        console.error('WebGL not supported');
        showError('WebGL is not supported in this browser');
        return;
    }
    
    // SpineåˆæœŸåŒ–å‡¦ç†
    console.log('Spine WebGL initialized');
    loadSpineCharacter();
}

function loadSpineCharacter() {
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿å‡¦ç†
    console.log('Loading Spine character...');
    
    // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€project.spineDataã‹ã‚‰ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
    ${this.generateCharacterLoadingCode(project)}
}

function playAnimation(animationName = 'taiki') {
    console.log('Playing animation:', animationName);
    if (animationState) {
        animationState.setAnimation(0, animationName, true);
    }
}

function pauseAnimation() {
    console.log('Pausing animation');
    if (animationState) {
        animationState.timeScale = 0;
    }
}

function stopAnimation() {
    console.log('Stopping animation');
    if (animationState) {
        animationState.clearTracks();
    }
}

function showError(message) {
    const errorDiv = document.createElement('div');
    errorDiv.style.cssText = 'background: #f8d7da; color: #721c24; padding: 10px; border-radius: 4px; margin: 10px; text-align: center;';
    errorDiv.textContent = message;
    document.body.insertBefore(errorDiv, document.body.firstChild);
}

// è‡ªå‹•åˆæœŸåŒ–
window.addEventListener('load', initSpine);

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
window.addEventListener('error', function(e) {
    console.error('Script error:', e.error);
    showError('ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + (e.error?.message || 'Unknown error'));
});
`;
  }

  /**
   * ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
   */
  generateCharacterLoadingCode(project) {
    const character = project.spineData?.characters?.[0];
    if (!character) {
      return '// No character data available';
    }

    return `
    // Character: ${character.id || 'default'}
    const characterConfig = {
        json: '${character.jsonPath ? 'assets/' + (character.id || 'character') + '.json' : ''}',
        atlas: '${character.atlasPath ? 'assets/' + (character.id || 'character') + '.atlas' : ''}',
        scale: ${character.scaleX || 1},
        position: { x: ${character.x || 0}, y: ${character.y || 0} }
    };
    
    if (window.spine && characterConfig.json) {
        // Spine WebGL implementation
        loadSpineCharacterData(characterConfig);
    } else {
        console.warn('Spine WebGL library not available or character data missing');
        showPlaceholder();
    }`;
  }

  /**
   * Homepageçµ±åˆHTMLç”Ÿæˆ
   */
  async generateHomepageIntegration(project) {
    // ãƒ™ãƒ¼ã‚¹HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå–å¾—
    let htmlContent = await this.getHomepageTemplate(project);
    
    if (!htmlContent) {
      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚·ãƒ³ãƒ—ãƒ«HTML
      htmlContent = await this.generateStandaloneHTML(project);
    }
    
    // Spineè¨­å®šã‚’HTMLã«åŸ‹ã‚è¾¼ã¿
    htmlContent = this.injectSpineConfiguration(htmlContent, project);
    
    console.log('ğŸ  Homepage integration HTML generated');
    return htmlContent;
  }

  /**
   * ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³HTMLç”Ÿæˆï¼ˆå®Œå…¨ç‰ˆï¼‰
   */
  async generateStandaloneHTML(project) {
    const character = project.spineData?.characters?.[0];
    
    return `<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${project.name || 'Spine Animation'}</title>
    <meta name="description" content="Spine WebGL animation generated by Spine Editor Desktop v2.0">
    <meta name="generator" content="Spine Editor Desktop v2.0">
    
    <style>
        ${this.generateFullCSS(project)}
    </style>
</head>
<body>
    <div class="spine-app">
        <header class="app-header">
            <h1>${project.name || 'Spine Animation'}</h1>
            <div class="info">Generated by Spine Editor Desktop v2.0</div>
        </header>
        
        <main class="app-main">
            <div class="spine-container">
                <canvas id="spine-canvas" width="800" height="600" aria-label="Spine animation canvas"></canvas>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="playAnimation()" title="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿ">
                        <span class="btn-icon">â–¶ï¸</span>
                        <span class="btn-text">Play</span>
                    </button>
                    <button class="btn btn-secondary" onclick="pauseAnimation()" title="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€æ™‚åœæ­¢">
                        <span class="btn-icon">â¸ï¸</span>
                        <span class="btn-text">Pause</span>
                    </button>
                    <button class="btn btn-danger" onclick="stopAnimation()" title="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åœæ­¢">
                        <span class="btn-icon">â¹ï¸</span>
                        <span class="btn-text">Stop</span>
                    </button>
                </div>
                
                <div class="loading-overlay" id="loading-overlay">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Loading Spine animation...</div>
                </div>
            </div>
        </main>
        
        <footer class="app-footer">
            <div class="character-info">
                ${character ? `Character: ${character.id || 'Default'}` : 'No character loaded'}
            </div>
            <div class="tech-info">
                WebGL | Spine Runtime
            </div>
        </footer>
    </div>

    <script src="spine-webgl.js"></script>
    <script>
        ${this.generateAdvancedSpineScript(project)}
    </script>
</body>
</html>`;
  }

  /**
   * ãƒ•ãƒ«CSSç”Ÿæˆ
   */
  generateFullCSS(project) {
    return `
        /* Spine Editor Desktop v2.0 - Full CSS */
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .spine-app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .app-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem;
            text-align: center;
            color: white;
        }
        
        .app-header h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 300;
        }
        
        .app-header .info {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }
        
        .app-main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        
        .spine-container {
            position: relative;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            padding: 2rem;
            max-width: 90vw;
            max-height: 80vh;
        }
        
        #spine-canvas {
            display: block;
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            min-width: 80px;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            margin-top: 1rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        .app-footer {
            background: rgba(0, 0, 0, 0.1);
            color: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .app-main {
                padding: 1rem;
            }
            
            .spine-container {
                padding: 1rem;
            }
            
            .controls {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .btn {
                flex: 1;
                min-width: auto;
                padding: 0.6rem 1rem;
                font-size: 0.8rem;
            }
            
            .btn-text {
                display: none;
            }
            
            .app-footer {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .app-header h1 {
                font-size: 1.2rem;
            }
            
            .spine-container {
                margin: 0.5rem;
                padding: 0.75rem;
            }
        }`;
  }

  /**
   * é«˜åº¦ãªSpineã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ
   */
  generateAdvancedSpineScript(project) {
    return `
// Spine Editor Desktop v2.0 - Advanced Script
class SpineApp {
    constructor() {
        this.canvas = null;
        this.gl = null;
        this.skeleton = null;
        this.animationState = null;
        this.isLoading = true;
        this.currentAnimation = 'taiki';
    }

    async init() {
        try {
            this.showLoading(true);
            
            this.canvas = document.getElementById('spine-canvas');
            this.gl = this.canvas.getContext('webgl') || this.canvas.getContext('experimental-webgl');
            
            if (!this.gl) {
                throw new Error('WebGL not supported');
            }
            
            console.log('Spine WebGL initialized');
            
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª­ã¿è¾¼ã¿
            await this.loadCharacter();
            
            // åˆæœŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
            this.playAnimation('syutugen');
            
            this.showLoading(false);
            
        } catch (error) {
            console.error('Spine initialization failed:', error);
            this.showError(error.message);
            this.showLoading(false);
        }
    }

    async loadCharacter() {
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å‡¦ç†
        ${this.generateCharacterLoadingCode(project)}
        
        console.log('Spine character loaded successfully');
    }

    playAnimation(animationName = this.currentAnimation, loop = true) {
        console.log('Playing animation:', animationName);
        this.currentAnimation = animationName;
        
        if (this.animationState) {
            this.animationState.setAnimation(0, animationName, loop);
        } else {
            console.warn('Animation state not initialized');
        }
    }

    pauseAnimation() {
        console.log('Pausing animation');
        if (this.animationState) {
            this.animationState.timeScale = 0;
        }
    }

    stopAnimation() {
        console.log('Stopping animation');
        if (this.animationState) {
            this.animationState.clearTracks();
            this.animationState.timeScale = 1;
        }
    }

    showLoading(show) {
        const overlay = document.getElementById('loading-overlay');
        if (overlay) {
            overlay.classList.toggle('hidden', !show);
        }
        this.isLoading = show;
    }

    showError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = \`
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #f8d7da;
            color: #721c24;
            padding: 12px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            max-width: 90%;
            text-align: center;
        \`;
        errorDiv.textContent = message;
        document.body.appendChild(errorDiv);
        
        // 5ç§’å¾Œã«è‡ªå‹•å‰Šé™¤
        setTimeout(() => {
            if (errorDiv.parentNode) {
                errorDiv.parentNode.removeChild(errorDiv);
            }
        }, 5000);
    }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
let spineApp;

// ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆãƒœã‚¿ãƒ³ã‹ã‚‰å‘¼ã³å‡ºã—ï¼‰
function playAnimation(name) {
    if (spineApp) spineApp.playAnimation(name);
}

function pauseAnimation() {
    if (spineApp) spineApp.pauseAnimation();
}

function stopAnimation() {
    if (spineApp) spineApp.stopAnimation();
}

// è‡ªå‹•åˆæœŸåŒ–
window.addEventListener('load', () => {
    spineApp = new SpineApp();
    spineApp.init();
});

// ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
window.addEventListener('beforeunload', () => {
    if (spineApp) {
        spineApp.stopAnimation();
    }
});
`;
  }

  /**
   * Homepageãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå–å¾—
   */
  async getHomepageTemplate(project) {
    if (!project.homepageFolder || !window.electronAPI) {
      return null;
    }
    
    try {
      const indexPath = `${project.homepageFolder}/index.html`;
      const result = await window.electronAPI.readFile(indexPath);
      
      if (result.success) {
        console.log('ğŸ  Homepage template loaded from:', indexPath);
        return result.data;
      }
    } catch (error) {
      console.warn('âš ï¸ Failed to load homepage template:', error);
    }
    
    return null;
  }

  /**
   * Spineè¨­å®šã‚’HTMLã«æ³¨å…¥
   */
  injectSpineConfiguration(htmlContent, project) {
    const character = project.spineData?.characters?.[0];
    if (!character) return htmlContent;
    
    // purattokun-config ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
    const configSection = `
<div id="purattokun-config" style="display: none;"
     data-x="${(character.x / 800 * 100).toFixed(1)}"
     data-y="${(character.y / 600 * 100).toFixed(1)}"
     data-scale="${character.scaleX || 0.5}"
     data-fade-delay="1500"
     data-fade-duration="2000">
</div>`;
    
    // æ—¢å­˜ã®è¨­å®šã‚’ç½®æ›ã¾ãŸã¯è¿½åŠ 
    if (htmlContent.includes('id="purattokun-config"')) {
      htmlContent = htmlContent.replace(
        /<div id="purattokun-config"[\s\S]*?<\/div>/,
        configSection.trim()
      );
    } else {
      htmlContent = htmlContent.replace(
        '</head>',
        `  ${configSection}\n</head>`
      );
    }
    
    return htmlContent;
  }

  /**
   * ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–CSSç”Ÿæˆ
   */
  generateResponsiveCSS() {
    return `
@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
    .controls {
        position: static;
        margin-top: 10px;
        justify-content: center;
        flex-wrap: wrap;
    }
    .btn {
        padding: 12px 16px;
        font-size: 14px;
        min-width: 70px;
    }
    #spine-canvas {
        max-width: 100%;
        height: auto;
    }
}

@media (max-width: 480px) {
    .spine-container {
        padding: 10px;
    }
    .btn {
        padding: 10px 12px;
        font-size: 12px;
        min-width: 60px;
    }
    .btn-text {
        display: none;
    }
}`;
  }

  /**
   * HTMLæœ€å°åŒ–
   */
  minifyHTML(html) {
    if (!this.config.minify) return html;
    
    return html
      .replace(/<!--[\s\S]*?-->/g, '') // ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤
      .replace(/>\s+</g, '><')          // ã‚¿ã‚°é–“ã®ç©ºç™½å‰Šé™¤
      .replace(/\s+/g, ' ')             // é€£ç¶šç©ºç™½ã‚’å˜ä¸€ç©ºç™½ã«
      .trim();
  }

  /**
   * HTMLãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   */
  validateHTML(html) {
    const errors = [];
    
    // åŸºæœ¬çš„ãªHTMLæ§‹é€ ãƒã‚§ãƒƒã‚¯
    if (!html.includes('<!DOCTYPE html>')) {
      errors.push('Missing DOCTYPE declaration');
    }
    
    if (!html.includes('<html') || !html.includes('</html>')) {
      errors.push('Missing html tag');
    }
    
    if (!html.includes('<head>') || !html.includes('</head>')) {
      errors.push('Missing head section');
    }
    
    if (!html.includes('<body>') || !html.includes('</body>')) {
      errors.push('Missing body section');
    }
    
    return {
      valid: errors.length === 0,
      errors
    };
  }

  /**
   * ãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆ
   */
  generateMetaTags(project) {
    return `
    <meta name="description" content="${project.description || 'Spine WebGL Animation'}">
    <meta name="keywords" content="spine, webgl, animation, ${project.name || ''}">
    <meta name="author" content="Spine Editor Desktop v2.0">
    <meta name="generator" content="Spine Editor Desktop v2.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Open Graph -->
    <meta property="og:title" content="${project.name || 'Spine Animation'}">
    <meta property="og:description" content="${project.description || 'Spine WebGL Animation'}">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="${project.name || 'Spine Animation'}">
    <meta name="twitter:description" content="${project.description || 'Spine WebGL Animation'}">`;
  }

  /**
   * ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰è¦ç´ ç”Ÿæˆ
   */
  generatePreloadLinks(project) {
    let preloads = '';
    
    if (project.spineData?.characters) {
      for (const character of project.spineData.characters) {
        const id = character.id || 'character';
        preloads += `
    <link rel="preload" href="assets/${id}.json" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="assets/${id}.atlas" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="assets/${id}.png" as="image">`;
      }
    }
    
    preloads += `
    <link rel="preload" href="spine-webgl.js" as="script">`;
    
    return preloads;
  }

  /**
   * è¨­å®šæ›´æ–°
   */
  updateConfig(newConfig) {
    this.config = { ...this.config, ...newConfig };
  }

  /**
   * ãƒ‡ãƒãƒƒã‚°ç”¨HTMLæƒ…å ±å–å¾—
   */
  getDebugInfo() {
    return {
      config: this.config,
      version: '2.0.0',
      module: 'export-html'
    };
  }
}

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
export default ExportHTML;