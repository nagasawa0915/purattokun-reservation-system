<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Package Export Micromodule Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid #007cba;
            background: #f8f9fa;
        }
        .button-group {
            margin: 10px 0;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-primary {
            background: #007cba;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        .btn-warning {
            background: #ffc107;
            color: black;
        }
        .log-output {
            background: #1e1e1e;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            padding: 15px;
            border-radius: 4px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin: 10px 0;
        }
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-loading { background: #ffc107; color: black; }
        .status-success { background: #28a745; color: white; }
        .status-error { background: #dc3545; color: white; }
        .test-character {
            width: 100px;
            height: 100px;
            position: absolute;
            left: 35%;
            top: 75%;
            transform: translate(-50%, -50%);
            background: #ff6b6b;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“¦ Package Export Micromodule Test</h1>
        <p>ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã™ã€‚</p>

        <!-- ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± -->
        <div class="test-section">
            <h2>ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h2>
            <div class="button-group">
                <button class="btn-info" onclick="checkSystemStatus()">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ç¢ºèª</button>
                <button class="btn-info" onclick="loadSystemInfo()">è©³ç´°æƒ…å ±è¡¨ç¤º</button>
                <button class="btn-warning" onclick="clearLog()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
            </div>
            <div id="system-status">
                <span>ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³: </span>
                <span id="status-indicator" class="status-indicator status-loading">èª­ã¿è¾¼ã¿ä¸­</span>
            </div>
        </div>

        <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å€‹åˆ¥ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ§ª ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å€‹åˆ¥ãƒ†ã‚¹ãƒˆ</h2>
            <div class="button-group">
                <button class="btn-info" onclick="testCharacterDetector()">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¤œå‡ºãƒ†ã‚¹ãƒˆ</button>
                <button class="btn-info" onclick="testCSSGenerator()">CSSç”Ÿæˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn-info" onclick="testFileCollector()">ãƒ•ã‚¡ã‚¤ãƒ«åé›†ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn-info" onclick="testHTMLProcessor()">HTMLå‡¦ç†ãƒ†ã‚¹ãƒˆ</button>
            </div>
        </div>

        <!-- çµ±åˆãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ¯ çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="button-group">
                <button class="btn-primary" onclick="testPackageExportNew()">ğŸ†• ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆå®Ÿè¡Œ</button>
                <button class="btn-success" onclick="testPackageExportLegacy()">ğŸ”„ æ—¢å­˜ç‰ˆå®Ÿè¡Œï¼ˆæ¯”è¼ƒç”¨ï¼‰</button>
                <button class="btn-info" onclick="compareVersions()">ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒ</button>
            </div>
        </div>

        <!-- ãƒ†ã‚¹ãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ -->
        <div class="test-section">
            <h2>ğŸ­ ãƒ†ã‚¹ãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</h2>
            <p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ãƒ†ã‚¹ãƒˆç”¨ã®æ¨¡æ“¬ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¦ç´ ã§ã™ã€‚</p>
            <!-- ãƒ†ã‚¹ãƒˆç”¨æ¨¡æ“¬ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¦ç´  -->
            <div style="position: relative; height: 200px; border: 1px dashed #ccc;">
                <div id="test-character-canvas" class="test-character">TestChar</div>
                <div id="purattokun-canvas" class="test-character" style="left: 65%; background: #4CAF50;">Purattokun</div>
            </div>
        </div>

        <!-- ãƒ­ã‚°å‡ºåŠ› -->
        <div class="test-section">
            <h2>ğŸ“‹ ãƒ­ã‚°å‡ºåŠ›</h2>
            <div id="log-output" class="log-output">ã‚·ã‚¹ãƒ†ãƒ èª­ã¿è¾¼ã¿å¾…æ©Ÿä¸­...</div>
        </div>
    </div>

    <!-- Spine WebGL CDN (ãƒ†ã‚¹ãƒˆç”¨) -->
    <script src="https://unpkg.com/@esotericsoftware/spine-webgl@4.1.24/dist/iife/spine-webgl.js"></script>
    
    <!-- æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ èª­ã¿è¾¼ã¿ï¼ˆæ¯”è¼ƒç”¨ï¼‰ -->
    <script src="spine-package-export.js"></script>
    
    <!-- ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆèª­ã¿è¾¼ã¿ -->
    <script type="module">
        import PackageExportSystem from './micromodules/package-export/index.js';
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
        window.PackageExportSystemNew = PackageExportSystem;
        
        // ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
        window.addEventListener('DOMContentLoaded', async () => {
            updateStatus('loading', 'ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...');
            logMessage('ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–é–‹å§‹');
            
            try {
                const success = await PackageExportSystem.initialize();
                if (success) {
                    updateStatus('success', 'åˆæœŸåŒ–å®Œäº†');
                    logMessage('âœ… ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–æˆåŠŸ');
                } else {
                    updateStatus('error', 'åˆæœŸåŒ–å¤±æ•—');
                    logMessage('âŒ ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å¤±æ•—');
                }
            } catch (error) {
                updateStatus('error', 'ã‚¨ãƒ©ãƒ¼');
                logMessage('âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ' + error.message);
            }
        });
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦ãƒ†ã‚¹ãƒˆé–¢æ•°ã‚’è¨­å®š
        window.testPackageExportNew = async function() {
            logMessage('\nğŸ“¦ === ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
            updateStatus('loading', 'å‡¦ç†ä¸­...');
            
            try {
                const success = await PackageExportSystem.exportPackage();
                if (success) {
                    updateStatus('success', 'å‡ºåŠ›æˆåŠŸ');
                    logMessage('âœ… ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›æˆåŠŸ');
                } else {
                    updateStatus('error', 'å‡ºåŠ›å¤±æ•—');
                    logMessage('âŒ ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›å¤±æ•—');
                }
            } catch (error) {
                updateStatus('error', 'ã‚¨ãƒ©ãƒ¼');
                logMessage('âŒ ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆã‚¨ãƒ©ãƒ¼: ' + error.message);
            }
        };
    </script>
    
    <script>
        // ãƒ­ã‚°å‡ºåŠ›é–¢æ•°
        function logMessage(message) {
            const logOutput = document.getElementById('log-output');
            const timestamp = new Date().toLocaleTimeString();
            logOutput.textContent += `[${timestamp}] ${message}\n`;
            logOutput.scrollTop = logOutput.scrollHeight;
        }
        
        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°é–¢æ•°
        function updateStatus(status, message) {
            const indicator = document.getElementById('status-indicator');
            indicator.className = `status-indicator status-${status}`;
            indicator.textContent = message;
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ç¢ºèª
        function checkSystemStatus() {
            logMessage('\nğŸ”§ === ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ç¢ºèª ===');
            
            // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ç¢ºèª
            const hasLegacySystem = typeof window.PackageExportSystem !== 'undefined' && 
                                   typeof window.exportPackage !== 'undefined';
            logMessage(`ğŸ”„ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ : ${hasLegacySystem ? 'âœ…åˆ©ç”¨å¯èƒ½' : 'âŒä¸å¯'}`);
            
            // ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆç¢ºèª
            const hasNewSystem = typeof window.PackageExportSystemNew !== 'undefined';
            logMessage(`ğŸ†• ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆ: ${hasNewSystem ? 'âœ…åˆ©ç”¨å¯èƒ½' : 'âŒä¸å¯'}`);
            
            // Spine WebGLç¢ºèª
            const hasSpineWebGL = typeof spine !== 'undefined';
            logMessage(`ğŸ® Spine WebGL: ${hasSpineWebGL ? 'âœ…åˆ©ç”¨å¯èƒ½' : 'âŒä¸å¯'}`);
            
            // MultiCharacterManagerç¢ºèªï¼ˆæ¨¡æ“¬ä½œæˆï¼‰
            if (typeof MultiCharacterManager === 'undefined') {
                window.MultiCharacterManager = {
                    characters: [
                        { id: 'test-character-canvas', name: 'test-character' },
                        { id: 'purattokun-canvas', name: 'purattokun' }
                    ],
                    activeCharacter: { id: 'purattokun-canvas', name: 'purattokun' }
                };
                logMessage('ğŸˆ MultiCharacterManager: æ¨¡æ“¬ç‰ˆã‚’ä½œæˆ');
            } else {
                logMessage('ğŸˆ MultiCharacterManager: âœ…åˆ©ç”¨å¯èƒ½');
            }
            
            // localStorageæ¨¡æ“¬ãƒ‡ãƒ¼ã‚¿ä½œæˆ
            if (!localStorage.getItem('spine-positioning-state')) {
                const mockData = {
                    characters: {
                        'test-character-canvas': {
                            left: '35%', top: '75%', width: '100px', height: '100px',
                            transform: 'translate(-50%, -50%)'
                        },
                        'purattokun-canvas': {
                            left: '65%', top: '75%', width: '100px', height: '100px',
                            transform: 'translate(-50%, -50%)'
                        }
                    }
                };
                localStorage.setItem('spine-positioning-state', JSON.stringify(mockData));
                logMessage('ğŸ’¾ localStorage: æ¨¡æ“¬ä½ç½®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ');
            } else {
                logMessage('ğŸ’¾ localStorage: âœ…ä½ç½®ãƒ‡ãƒ¼ã‚¿ã‚ã‚Š');
            }
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ è©³ç´°æƒ…å ±è¡¨ç¤º
        function loadSystemInfo() {
            logMessage('\nğŸ“‹ === ã‚·ã‚¹ãƒ†ãƒ è©³ç´°æƒ…å ± ===');
            
            if (typeof window.PackageExportSystemNew !== 'undefined') {
                window.PackageExportSystemNew.logSystemInfo();
                logMessage('ğŸ†• ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆè©³ç´°æƒ…å ±ã‚’å‡ºåŠ›');
            }
            
            if (typeof window.PackageExportSystem !== 'undefined') {
                logMessage('ğŸ”„ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±:');
                logMessage(`  - PackageExportSystem: ${typeof window.PackageExportSystem}`);
                logMessage(`  - exportPackage: ${typeof window.exportPackage}`);
            }
        }
        
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¤œå‡ºãƒ†ã‚¹ãƒˆ
        async function testCharacterDetector() {
            logMessage('\nğŸ” === ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¤œå‡ºãƒ†ã‚¹ãƒˆ ===');
            
            if (typeof window.PackageExportSystemNew === 'undefined') {
                logMessage('âŒ ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                return;
            }
            
            try {
                // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãƒ†ã‚¹ãƒˆ
                const { CharacterDetector } = await import('./micromodules/package-export/generators/CharacterDetector.js');
                const detector = new CharacterDetector();
                
                const characters = await detector.detectAllCharacters();
                logMessage(`âœ… æ¤œå‡ºã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼: [${characters.join(', ')}]`);
                
                const positionData = await detector.collectAllPositionData(characters);
                logMessage(`âœ… ä½ç½®ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†: ${Object.keys(positionData).length}å€‹`);
                
                logMessage('ğŸ“Š ä½ç½®ãƒ‡ãƒ¼ã‚¿è©³ç´°:');
                for (const [name, data] of Object.entries(positionData)) {
                    logMessage(`  ğŸˆ ${name}: left=${data.left}, top=${data.top}`);
                }
                
            } catch (error) {
                logMessage(`âŒ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¤œå‡ºãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }
        
        // CSSç”Ÿæˆãƒ†ã‚¹ãƒˆ
        async function testCSSGenerator() {
            logMessage('\nğŸ¨ === CSSç”Ÿæˆãƒ†ã‚¹ãƒˆ ===');
            
            try {
                const { CSSGenerator } = await import('./micromodules/package-export/generators/CSSGenerator.js');
                const cssGenerator = new CSSGenerator();
                
                const mockData = {
                    'test-character': {
                        left: '35%', top: '75%', width: '100px', height: '100px',
                        transform: 'translate(-50%, -50%)'
                    },
                    'purattokun': {
                        left: '65%', top: '75%', width: '100px', height: '100px',
                        transform: 'translate(-50%, -50%)'
                    }
                };
                
                const css = cssGenerator.generateAllCharactersCSS(mockData);
                logMessage('âœ… CSSç”ŸæˆæˆåŠŸ');
                logMessage('ğŸ“„ ç”Ÿæˆã•ã‚ŒãŸCSS:');
                logMessage(css);
                
                cssGenerator.logGenerationReport(mockData);
                
            } catch (error) {
                logMessage(`âŒ CSSç”Ÿæˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }
        
        // ãƒ•ã‚¡ã‚¤ãƒ«åé›†ãƒ†ã‚¹ãƒˆ
        async function testFileCollector() {
            logMessage('\nğŸ“ === ãƒ•ã‚¡ã‚¤ãƒ«åé›†ãƒ†ã‚¹ãƒˆ ===');
            
            try {
                const { FileCollector } = await import('./micromodules/package-export/core/FileCollector.js');
                const collector = new FileCollector();
                
                logMessage('ğŸ“‹ åé›†äºˆå®šãƒ•ã‚¡ã‚¤ãƒ«:');
                const config = collector.getDefaultConfig();
                logMessage(`  ğŸ–¼ï¸ ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«: ${config.staticFiles.imageFiles.length}å€‹`);
                logMessage(`  ğŸ“š çµ±åˆãƒ•ã‚¡ã‚¤ãƒ«: ${config.staticFiles.integrationFiles.length}å€‹`);
                logMessage(`  ğŸ¯ å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹: ${config.staticFiles.boundingBoxFiles.length}å€‹`);
                
                // å®Ÿéš›ã®åé›†ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ãŸã‚ã€è¨­å®šæƒ…å ±ã®ã¿è¡¨ç¤º
                logMessage('â„¹ï¸ å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«åé›†ã¯çµ±åˆãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã¾ã™');
                
            } catch (error) {
                logMessage(`âŒ ãƒ•ã‚¡ã‚¤ãƒ«åé›†ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }
        
        // HTMLå‡¦ç†ãƒ†ã‚¹ãƒˆ
        async function testHTMLProcessor() {
            logMessage('\nğŸ”§ === HTMLå‡¦ç†ãƒ†ã‚¹ãƒˆ ===');
            
            try {
                const { HTMLProcessor } = await import('./micromodules/package-export/core/HTMLProcessor.js');
                const processor = new HTMLProcessor();
                
                logMessage('ğŸ“„ HTMLå‡¦ç†æ©Ÿèƒ½ç¢ºèª:');
                logMessage('  âœ… ç·¨é›†ã‚·ã‚¹ãƒ†ãƒ é™¤å»æ©Ÿèƒ½');
                logMessage('  âœ… CDNâ†’ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ›´æ©Ÿèƒ½');
                logMessage('  âœ… å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½');
                logMessage('  âœ… ä½ç½®ãƒ‡ãƒ¼ã‚¿CSSåŸ‹ã‚è¾¼ã¿æ©Ÿèƒ½');
                
                logMessage('â„¹ï¸ å®Ÿéš›ã®HTMLå‡¦ç†ã¯çµ±åˆãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã¾ã™');
                
            } catch (error) {
                logMessage(`âŒ HTMLå‡¦ç†ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }
        
        // æ—¢å­˜ç‰ˆãƒ†ã‚¹ãƒˆ
        async function testPackageExportLegacy() {
            logMessage('\nğŸ”„ === æ—¢å­˜ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
            
            if (typeof window.exportPackage !== 'function') {
                logMessage('âŒ æ—¢å­˜ç‰ˆexportPackageé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                return;
            }
            
            updateStatus('loading', 'æ—¢å­˜ç‰ˆå‡¦ç†ä¸­...');
            
            try {
                const success = await window.exportPackage();
                if (success) {
                    updateStatus('success', 'æ—¢å­˜ç‰ˆæˆåŠŸ');
                    logMessage('âœ… æ—¢å­˜ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›æˆåŠŸ');
                } else {
                    updateStatus('error', 'æ—¢å­˜ç‰ˆå¤±æ•—');
                    logMessage('âŒ æ—¢å­˜ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›å¤±æ•—');
                }
            } catch (error) {
                updateStatus('error', 'æ—¢å­˜ç‰ˆã‚¨ãƒ©ãƒ¼');
                logMessage('âŒ æ—¢å­˜ç‰ˆã‚¨ãƒ©ãƒ¼: ' + error.message);
            }
        }
        
        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒ
        function compareVersions() {
            logMessage('\nâš–ï¸ === ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒ ===');
            
            logMessage('ğŸ†š æ©Ÿèƒ½æ¯”è¼ƒ:');
            logMessage('  ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆ:');
            logMessage('    âœ… ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†é›¢ã«ã‚ˆã‚‹ä¿å®ˆæ€§å‘ä¸Š');
            logMessage('    âœ… å€‹åˆ¥ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°å¯èƒ½');
            logMessage('    âœ… è¨­å®šã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå®¹æ˜“');
            logMessage('    âœ… å†åˆ©ç”¨æ€§ãƒ»æ‹¡å¼µæ€§ç¢ºä¿');
            logMessage('    âœ… æ—¢å­˜ç‰ˆã¨ã®å®Œå…¨äº’æ›æ€§');
            
            logMessage('  æ—¢å­˜ç‰ˆ:');
            logMessage('    âœ… å®‰å®šå‹•ä½œãƒ»å•†ç”¨å®Ÿç¸¾');
            logMessage('    âœ… å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ã‚·ãƒ³ãƒ—ãƒ«æ§‹æˆ');
            logMessage('    âŒ 943è¡Œãƒ»ä¿å®ˆæ€§èª²é¡Œ');
            logMessage('    âŒ æ©Ÿèƒ½æ‹¡å¼µãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå›°é›£');
            
            logMessage('ğŸ¯ æ¨å¥¨: ãƒã‚¤ã‚¯ãƒ­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆã§ã®ä»Šå¾Œã®é–‹ç™º');
        }
        
        // ãƒ­ã‚°ã‚¯ãƒªã‚¢
        function clearLog() {
            document.getElementById('log-output').textContent = 'ãƒ­ã‚°ã‚¯ãƒªã‚¢å®Œäº†\n';
            updateStatus('loading', 'å¾…æ©Ÿä¸­');
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†å¾Œã®åˆæœŸåŒ–
        window.addEventListener('DOMContentLoaded', () => {
            logMessage('ğŸš€ Package Export Micromodule ãƒ†ã‚¹ãƒˆç’°å¢ƒèª­ã¿è¾¼ã¿å®Œäº†');
            
            // åˆæœŸã‚·ã‚¹ãƒ†ãƒ ç¢ºèª
            setTimeout(() => {
                checkSystemStatus();
            }, 1000);
        });
    </script>
</body>
</html>