<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ Animation Sequencer ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 { margin: 0; font-size: 2em; }
        .header p { margin: 10px 0 0; opacity: 0.9; }
        
        .patterns {
            padding: 30px;
        }
        
        .pattern {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            background: #f9f9f9;
        }
        
        .pattern h3 {
            margin: 0 0 15px;
            color: #2c3e50;
            font-size: 1.3em;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .demo-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
            background: #3498db;
            color: white;
            transition: all 0.2s;
        }
        .demo-button:hover { 
            background: #2980b9; 
            transform: translateY(-2px);
        }
        
        .output {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .success { color: #27ae60; }
        .info { color: #3498db; }
        .warning { color: #f39c12; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¬ Animation Sequencer ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹</h1>
            <p>v3.0ã‹ã‚‰ç§»æ¤ã—ãŸè‡ªç„¶é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³</p>
        </div>

        <div class="patterns">
            <!-- ãƒ‘ã‚¿ãƒ¼ãƒ³1: åŸºæœ¬çš„ãªå˜ç™ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="pattern">
                <h3>ğŸ¯ ãƒ‘ã‚¿ãƒ¼ãƒ³1: åŸºæœ¬çš„ãªå˜ç™ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                <p>æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãª1ã¤ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³</p>
                
                <div class="code-block">const sequencer = new AnimationSequencer();

// å¾…æ©Ÿã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
const sequence = sequencer.generateSequence({
    characterId: "purattokun",
    animationName: "taiki",
    sequenceType: "single",
    timingConfig: {
        delay: 0,
        duration: 3000,
        loop: true
    }
});

const result = sequencer.executeSequence(sequence.sequenceId);</div>
                
                <button class="demo-button" onclick="demoBasicAnimation()">ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
                <div id="output1" class="output">å®Ÿè¡ŒçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>

            <!-- ãƒ‘ã‚¿ãƒ¼ãƒ³2: v3.0å¼è‡ªç„¶é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="pattern">
                <h3>ğŸŒŠ ãƒ‘ã‚¿ãƒ¼ãƒ³2: v3.0å¼è‡ªç„¶é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                <p>å‡ºç¾ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ â†’ è‡ªå‹•çš„ã«å¾…æ©Ÿã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«é·ç§»</p>
                
                <div class="code-block">// v3.0ã®è‡ªç„¶é·ç§»ï¼šsyutugen â†’ taiki
const transitionSequence = sequencer.generateSequence({
    characterId: "purattokun",
    animationName: "syutugen",
    sequenceType: "transition",
    timingConfig: {
        delay: 1500,    // 1.5ç§’å¾…æ©Ÿ
        duration: 2000, // å‡ºç¾ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³2ç§’
        loop: false
    }
});

sequencer.executeSequence(transitionSequence.sequenceId);
// 2ç§’å¾Œã«è‡ªå‹•çš„ã«taikiã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹</div>
                
                <button class="demo-button" onclick="demoTransitionAnimation()">ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
                <div id="output2" class="output">å®Ÿè¡ŒçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>

            <!-- ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="pattern">
                <h3>ğŸ”— ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                <p>è¤‡æ•°ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é †ç•ªã«å®Ÿè¡Œ</p>
                
                <div class="code-block">// å‡ºç¾ â†’ ã‚¯ãƒªãƒƒã‚¯ â†’ å¾…æ©Ÿã®é€£ç¶šå®Ÿè¡Œ
const chainSequence = sequencer.generateSequence({
    characterId: "purattokun",
    sequenceType: "chain",
    chain: [
        { animationName: "syutugen", duration: 2000 },
        { animationName: "click", duration: 1000 },
        { animationName: "taiki", duration: 3000, loop: true }
    ]
});

sequencer.executeSequence(chainSequence.sequenceId);</div>
                
                <button class="demo-button" onclick="demoChainAnimation()">ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
                <div id="output3" class="output">å®Ÿè¡ŒçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>

            <!-- ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ä»˜ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="pattern">
                <h3>âœ¨ ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ä»˜ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                <p>ãƒ•ã‚§ãƒ¼ãƒ‰åŠ¹æœã¨çµ„ã¿åˆã‚ã›ãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</p>
                
                <div class="code-block">// ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³åŠ¹æœä»˜ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
const fadeSequence = sequencer.generateSequence({
    characterId: "purattokun",
    animationName: "taiki",
    sequenceType: "single",
    timingConfig: {
        delay: 0,
        duration: 3000,
        loop: true
    },
    fadeIn: true,
    fadeDelay: 1000,     // 1ç§’å¾…æ©Ÿå¾Œãƒ•ã‚§ãƒ¼ãƒ‰é–‹å§‹
    fadeDuration: 2000   // 2ç§’ã‹ã‘ã¦ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³
});

sequencer.executeSequence(fadeSequence.sequenceId);</div>
                
                <button class="demo-button" onclick="demoFadeAnimation()">ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
                <div id="output4" class="output">å®Ÿè¡ŒçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>

            <!-- ãƒ‘ã‚¿ãƒ¼ãƒ³5: ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—ãƒ‡ãƒ¢ -->
            <div class="pattern">
                <h3>â±ï¸ ãƒ‘ã‚¿ãƒ¼ãƒ³5: é«˜ç²¾åº¦ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—</h3>
                <p>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆãƒ»é€²è¡Œç‡è¨ˆç®—ã®ãƒ‡ãƒ¢</p>
                
                <div class="code-block">// é«˜ç²¾åº¦ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—
const timing = sequencer.calculateTiming({
    characterId: "purattokun",
    delay: 500,
    duration: 2000,
    interval: 16,        // 60fps
    fadeIn: true,
    fadeDuration: 1000,
    fadeEasing: "ease-out"
});

// ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¨ˆç®—ä¾‹
const progress = timing.timingData.getProgressAt(
    Date.now(), 
    Date.now() - 1000  // 1ç§’çµŒé
);</div>
                
                <button class="demo-button" onclick="demoTimingCalculation()">ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
                <div id="output5" class="output">å®Ÿè¡ŒçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>

            <!-- ãƒ‘ã‚¿ãƒ¼ãƒ³6: è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åŒæ™‚åˆ¶å¾¡ -->
            <div class="pattern">
                <h3>ğŸ‘¥ ãƒ‘ã‚¿ãƒ¼ãƒ³6: è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åŒæ™‚åˆ¶å¾¡</h3>
                <p>è¤‡æ•°ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŒæ™‚ç®¡ç†</p>
                
                <div class="code-block">// è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®åŒæ™‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
const characters = ["purattokun", "nezumi", "hero"];
const sequences = [];

characters.forEach((charId, index) => {
    const seq = sequencer.generateSequence({
        characterId: charId,
        animationName: "syutugen",
        sequenceType: "transition",
        timingConfig: {
            delay: index * 500,  // 0.5ç§’ãšã¤é…å»¶
            duration: 2000,
            loop: false
        }
    });
    
    sequences.push(seq);
    sequencer.executeSequence(seq.sequenceId);
});</div>
                
                <button class="demo-button" onclick="demoMultiCharacter()">ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
                <div id="output6" class="output">å®Ÿè¡ŒçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>
        </div>
    </div>

    <!-- Animation Sequencer ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ -->
    <script src="../animation-sequencer.js"></script>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let sequencer = null;

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            try {
                sequencer = new AnimationSequencer();
                console.log('ğŸ¬ Animation Sequencer åˆæœŸåŒ–å®Œäº†');
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
            }
        });

        function updateOutput(elementId, message, type = 'info') {
            const output = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const classStr = type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'info';
            
            output.innerHTML += `<span class="${classStr}">[${timestamp}] ${message}</span>\n`;
            output.scrollTop = output.scrollHeight;
        }

        function clearOutput(elementId) {
            document.getElementById(elementId).innerHTML = '';
        }

        // ãƒ‘ã‚¿ãƒ¼ãƒ³1: åŸºæœ¬çš„ãªå˜ç™ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function demoBasicAnimation() {
            clearOutput('output1');
            updateOutput('output1', 'ğŸ¯ åŸºæœ¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¢é–‹å§‹...');
            
            try {
                const sequence = sequencer.generateSequence({
                    characterId: "demo_basic",
                    animationName: "taiki",
                    sequenceType: "single",
                    timingConfig: {
                        delay: 0,
                        duration: 3000,
                        loop: true
                    }
                });

                updateOutput('output1', `âœ… ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç”Ÿæˆå®Œäº†: ${sequence.sequenceId}`, 'success');
                updateOutput('output1', JSON.stringify(sequence, null, 2));

                const result = sequencer.executeSequence(sequence.sequenceId);
                updateOutput('output1', `ğŸ¬ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ: ${result.status}`, 'success');
                updateOutput('output1', JSON.stringify(result, null, 2));

            } catch (error) {
                updateOutput('output1', `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'warning');
            }
        }

        // ãƒ‘ã‚¿ãƒ¼ãƒ³2: v3.0å¼è‡ªç„¶é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function demoTransitionAnimation() {
            clearOutput('output2');
            updateOutput('output2', 'ğŸŒŠ ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¢é–‹å§‹...');
            
            try {
                const sequence = sequencer.generateSequence({
                    characterId: "demo_transition",
                    animationName: "syutugen",
                    sequenceType: "transition",
                    timingConfig: {
                        delay: 1500,
                        duration: 2000,
                        loop: false
                    }
                });

                updateOutput('output2', `âœ… ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç”Ÿæˆå®Œäº†`, 'success');
                updateOutput('output2', `é·ç§»ãƒ‘ã‚¿ãƒ¼ãƒ³: ${sequence.transition.fromAnimation} â†’ ${sequence.transition.toAnimation}`);
                updateOutput('output2', JSON.stringify(sequence, null, 2));

                const result = sequencer.executeSequence(sequence.sequenceId);
                updateOutput('output2', `ğŸ¬ ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å®Ÿè¡Œ: ${result.status}`, 'success');
                updateOutput('output2', `è‡ªå‹•é·ç§»äºˆå®šæ™‚åˆ»: ${new Date(result.timingData.transitionTime).toLocaleTimeString()}`);

            } catch (error) {
                updateOutput('output2', `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'warning');
            }
        }

        // ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function demoChainAnimation() {
            clearOutput('output3');
            updateOutput('output3', 'ğŸ”— ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¢é–‹å§‹...');
            
            try {
                const sequence = sequencer.generateSequence({
                    characterId: "demo_chain",
                    sequenceType: "chain",
                    chain: [
                        { animationName: "syutugen", duration: 2000 },
                        { animationName: "click", duration: 1000 },
                        { animationName: "taiki", duration: 3000, loop: true }
                    ]
                });

                updateOutput('output3', `âœ… ãƒã‚§ãƒ¼ãƒ³ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç”Ÿæˆå®Œäº†`, 'success');
                updateOutput('output3', `ãƒã‚§ãƒ¼ãƒ³æ§‹æˆ: ${sequence.chain.length}ã‚¹ãƒ†ãƒƒãƒ—`);
                sequence.chain.forEach((step, index) => {
                    updateOutput('output3', `  ${index + 1}. ${step.animationName} (${step.duration}ms)`);
                });

                const result = sequencer.executeSequence(sequence.sequenceId);
                updateOutput('output3', `ğŸ¬ ãƒã‚§ãƒ¼ãƒ³å®Ÿè¡Œé–‹å§‹: ${result.status}`, 'success');
                updateOutput('output3', JSON.stringify(result.timingData, null, 2));

            } catch (error) {
                updateOutput('output3', `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'warning');
            }
        }

        // ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ä»˜ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function demoFadeAnimation() {
            clearOutput('output4');
            updateOutput('output4', 'âœ¨ ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¢é–‹å§‹...');
            
            try {
                const sequence = sequencer.generateSequence({
                    characterId: "demo_fade",
                    animationName: "taiki",
                    sequenceType: "single",
                    timingConfig: {
                        delay: 0,
                        duration: 3000,
                        loop: true
                    },
                    fadeIn: true,
                    fadeDelay: 1000,
                    fadeDuration: 2000
                });

                updateOutput('output4', `âœ… ãƒ•ã‚§ãƒ¼ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç”Ÿæˆå®Œäº†`, 'success');
                updateOutput('output4', `ãƒ•ã‚§ãƒ¼ãƒ‰è¨­å®š: é…å»¶${sequence.fadeDelay}ms, ç¶™ç¶š${sequence.fadeDuration}ms`);
                updateOutput('output4', JSON.stringify(sequence, null, 2));

                const result = sequencer.executeSequence(sequence.sequenceId);
                updateOutput('output4', `ğŸ¬ ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ: ${result.status}`, 'success');

            } catch (error) {
                updateOutput('output4', `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'warning');
            }
        }

        // ãƒ‘ã‚¿ãƒ¼ãƒ³5: ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—ãƒ‡ãƒ¢
        function demoTimingCalculation() {
            clearOutput('output5');
            updateOutput('output5', 'â±ï¸ ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—ãƒ‡ãƒ¢é–‹å§‹...');
            
            try {
                const timing = sequencer.calculateTiming({
                    characterId: "demo_timing",
                    delay: 500,
                    duration: 2000,
                    interval: 16,
                    fadeIn: true,
                    fadeDuration: 1000,
                    fadeEasing: "ease-out"
                });

                updateOutput('output5', `âœ… ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—å®Œäº†`, 'success');
                updateOutput('output5', `ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ: ${timing.timingData.fps.toFixed(1)}fps`);
                updateOutput('output5', `ç·ãƒ•ãƒ¬ãƒ¼ãƒ æ•°: ${timing.timingData.totalFrames}ãƒ•ãƒ¬ãƒ¼ãƒ `);
                updateOutput('output5', `ç·ç¶™ç¶šæ™‚é–“: ${timing.metadata.totalDuration}ms`);

                // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¨ˆç®—ä¾‹
                const startTime = Date.now();
                const testTimes = [500, 1000, 1500, 2000, 2500];
                
                updateOutput('output5', '\nğŸ“Š ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¨ˆç®—ä¾‹:');
                testTimes.forEach(elapsed => {
                    const progress = timing.timingData.getProgressAt(startTime + elapsed, startTime);
                    updateOutput('output5', `${elapsed}msçµŒé: ${(progress * 100).toFixed(1)}%`);
                });

                updateOutput('output5', '\nğŸ“‹ è©³ç´°ãƒ‡ãƒ¼ã‚¿:');
                updateOutput('output5', JSON.stringify(timing, null, 2));

            } catch (error) {
                updateOutput('output5', `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'warning');
            }
        }

        // ãƒ‘ã‚¿ãƒ¼ãƒ³6: è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åŒæ™‚åˆ¶å¾¡
        function demoMultiCharacter() {
            clearOutput('output6');
            updateOutput('output6', 'ğŸ‘¥ è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åˆ¶å¾¡ãƒ‡ãƒ¢é–‹å§‹...');
            
            try {
                const characters = ["purattokun", "nezumi", "hero"];
                const sequences = [];

                characters.forEach((charId, index) => {
                    const seq = sequencer.generateSequence({
                        characterId: charId,
                        animationName: "syutugen",
                        sequenceType: "transition",
                        timingConfig: {
                            delay: index * 500,
                            duration: 2000,
                            loop: false
                        }
                    });
                    
                    sequences.push(seq);
                    updateOutput('output6', `âœ… ${charId} ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç”Ÿæˆ (é…å»¶: ${index * 500}ms)`, 'success');
                });

                updateOutput('output6', '\nğŸ¬ å…¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®Ÿè¡Œé–‹å§‹:');
                const results = [];
                sequences.forEach(seq => {
                    const result = sequencer.executeSequence(seq.sequenceId);
                    results.push(result);
                    updateOutput('output6', `${seq.characterId}: ${result.status}`);
                });

                updateOutput('output6', '\nğŸ“Š å®Ÿè¡Œçµ±è¨ˆ:');
                updateOutput('output6', `åˆè¨ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹: ${sequences.length}å€‹`);
                updateOutput('output6', `å®Ÿè¡Œä¸­: ${results.filter(r => r.status === 'playing').length}å€‹`);

                // çŠ¶æ…‹ç¢ºèª
                const state = sequencer.getState();
                updateOutput('output6', '\nğŸ” ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹:');
                updateOutput('output6', JSON.stringify(state, null, 2));

            } catch (error) {
                updateOutput('output6', `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'warning');
            }
        }
    </script>
</body>
</html>