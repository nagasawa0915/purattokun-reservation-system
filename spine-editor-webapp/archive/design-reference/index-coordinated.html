<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spine Editor WebApp - Âè∏‰ª§Â°îÁµ±Âà∂Áâà</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../micromodules/ui-timeline/timeline-styles.css">
    <link rel="stylesheet" href="../micromodules/ui-layout-manager/layout-manager-styles.css">
    <style>
        /* Âè∏‰ª§Â°îÁâàÂ∞ÇÁî®„Çπ„Çø„Ç§„É´ */
        .coordinator-status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 10000;
            opacity: 0.7;
        }
        
        .coordinator-status.ready {
            border-left: 4px solid #00ff88;
        }
        
        .coordinator-status.initializing {
            border-left: 4px solid #ffdd00;
        }
        
        .coordinator-status.error {
            border-left: 4px solid #ff6b6b;
        }
    </style>
</head>
<body>
    <!-- Âè∏‰ª§Â°î„Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫ -->
    <div id="coordinator-status" class="coordinator-status initializing">
        üéØ Âè∏‰ª§Â°î„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...
    </div>

    <!-- „Éà„ÉÉ„Éó„Éê„Éº -->
    <header class="top-bar">
        <div class="top-bar-left">
            <button class="btn btn-folder">„Éõ„Éº„É†„Éö„Éº„Ç∏„Éï„Ç©„É´„ÉÄÈÅ∏Êäû</button>
            <button class="btn btn-folder">Spine„Éï„Ç©„É´„ÉÄÈÅ∏Êäû</button>
            <button class="btn btn-save">
                <span class="icon">üíæ</span>
                Save
            </button>
            <button class="btn btn-undo">
                <span class="icon">‚Ü∂</span>
            </button>
            <button class="btn btn-redo">
                <span class="icon">‚Ü∑</span>
            </button>
        </div>
        <div class="top-bar-right">
            <button class="btn btn-package">„Éë„ÉÉ„Ç±„Éº„Ç∏Âá∫Âäõ</button>
            <button class="btn btn-debug" onclick="debugCoordinator()">
                <span class="icon">üîç</span>
                Ë®∫Êñ≠
            </button>
            <button class="btn btn-repair" onclick="repairSystem()">
                <span class="icon">üîß</span>
                ‰øÆÂæ©
            </button>
        </div>
    </header>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä -->
    <div class="main-container">
        <!-- Â∑¶„Éë„Éç„É´: „Ç¢„Ç¶„Éà„É©„Ç§„Éä„Éº -->
        <div class="panel panel-outliner" data-panel-type="outliner">
            <div class="panel-header">
                <span class="panel-title">„Ç¢„Ç¶„Éà„É©„Ç§„Éä„Éº</span>
                <div class="panel-controls">
                    <button class="panel-btn" title="ÊúÄÂ∞èÂåñ">‚àí</button>
                    <button class="panel-btn" title="Èñâ„Åò„Çã">√ó</button>
                </div>
            </div>
            <div class="panel-content">
                <!-- „Éï„Ç°„Ç§„É´ÈöéÂ±§ -->
                <div class="file-tree">
                    <div class="tree-item tree-folder expanded">
                        <span class="tree-icon">üìÅ</span>
                        <span class="tree-label">HP</span>
                        <div class="tree-children">
                            <div class="tree-item tree-file">
                                <span class="tree-icon">üìÑ</span>
                                <span class="tree-label">index.html</span>
                            </div>
                        </div>
                    </div>
                    <div class="tree-item tree-folder expanded">
                        <span class="tree-icon">üìÅ</span>
                        <span class="tree-label">characters</span>
                        <div class="tree-children">
                            <div class="tree-item tree-character expanded">
                                <span class="tree-icon">üê≠</span>
                                <span class="tree-label">nezumi</span>
                                <div class="tree-children">
                                    <div class="tree-item tree-animation">
                                        <span class="tree-icon">üé≠</span>
                                        <span class="tree-label">kettei</span>
                                    </div>
                                    <div class="tree-item tree-animation">
                                        <span class="icon">üé≠</span>
                                        <span class="tree-label">search</span>
                                    </div>
                                </div>
                            </div>
                            <div class="tree-item tree-character expanded">
                                <span class="tree-icon">üê±</span>
                                <span class="tree-label">purattokun</span>
                                <div class="tree-children">
                                    <div class="tree-item tree-animation">
                                        <span class="tree-icon">üé≠</span>
                                        <span class="tree-label">syutugen</span>
                                    </div>
                                    <div class="tree-item tree-animation">
                                        <span class="tree-icon">üé≠</span>
                                        <span class="tree-label">taiki</span>
                                    </div>
                                    <div class="tree-item tree-animation">
                                        <span class="tree-icon">üé≠</span>
                                        <span class="tree-label">yarare</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏≠Â§Æ„Éë„Éç„É´: „Éó„É¨„Éì„É•„Éº -->
        <div class="panel panel-preview" data-panel-type="preview">
            <div class="panel-header">
                <span class="panel-title">„Éó„É¨„Éì„É•„Éº</span>
                <div class="panel-controls">
                    <button class="panel-btn" title="ÊúÄÂ∞èÂåñ">‚àí</button>
                    <button class="panel-btn" title="Èñâ„Åò„Çã">√ó</button>
                </div>
            </div>
            <div class="panel-content">
                <div class="preview-area">
                    <div class="preview-canvas">
                        <!-- „Åì„Åì„Å´Spine„Ç≠„É£„É©„ÇØ„Çø„Éº„ÅåË°®Á§∫„Åï„Çå„Çã -->
                        <div class="preview-placeholder">
                            <div class="placeholder-content">
                                <h3>üé¨ Preview Area</h3>
                                <p>Spine„Ç≠„É£„É©„ÇØ„Çø„Éº„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</p>
                                <p><small>Âè∏‰ª§Â°îÁµ±Âà∂Áâà</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Âè≥„Éë„Éç„É´: „Éó„É≠„Éë„ÉÜ„Ç£ -->
        <div class="panel panel-properties" data-panel-type="properties">
            <div class="panel-header">
                <span class="panel-title">nezumi</span>
                <div class="panel-controls">
                    <button class="panel-btn" title="ÊúÄÂ∞èÂåñ">‚àí</button>
                    <button class="panel-btn" title="Èñâ„Åò„Çã">√ó</button>
                </div>
            </div>
            <div class="panel-content">
                <!-- ‰ΩçÁΩÆ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="property-section">
                    <h4 class="section-title">‰ΩçÁΩÆ</h4>
                    <div class="property-row">
                        <label>X</label>
                        <input type="number" class="property-input" value="0">
                        <label>Y</label>
                        <input type="number" class="property-input" value="0">
                    </div>
                </div>

                <!-- ÂõûËª¢„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="property-section">
                    <h4 class="section-title">ÂõûËª¢</h4>
                    <div class="property-row">
                        <input type="number" class="property-input wide" value="0">
                        <span class="unit">¬∞</span>
                    </div>
                </div>

                <!-- „Çπ„Ç±„Éº„É´„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="property-section">
                    <h4 class="section-title">„Çπ„Ç±„Éº„É´</h4>
                    <div class="property-row">
                        <label>X</label>
                        <input type="number" class="property-input" value="1" step="0.1">
                        <label>Y</label>
                        <input type="number" class="property-input" value="1" step="0.1">
                    </div>
                </div>

                <!-- ‰∏çÈÄèÊòéÂ∫¶„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="property-section">
                    <h4 class="section-title">‰∏çÈÄèÊòéÂ∫¶</h4>
                    <div class="property-row">
                        <input type="range" class="property-slider" min="0" max="1" step="0.1" value="1">
                        <input type="number" class="property-input" value="1" step="0.1" min="0" max="1">
                    </div>
                </div>

                <!-- „É¨„Ç§„É§„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="property-section">
                    <h4 class="section-title">„É¨„Ç§„É§„Éº</h4>
                    <div class="layer-list">
                        <div class="layer-item">purattokun 1</div>
                        <div class="layer-item">purattokun 2</div>
                        <div class="layer-item">purattokun 3</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- „Çø„Ç§„É†„É©„Ç§„É≥„Éë„Éç„É´ -->
    <div class="panel panel-timeline" data-panel-type="timeline">
        <div class="panel-header">
            <span class="panel-title">„Çø„Ç§„É†„É©„Ç§„É≥</span>
            <div class="panel-controls">
                <button class="panel-btn" title="ÊúÄÂ∞èÂåñ">‚àí</button>
                <button class="panel-btn" title="Èñâ„Åò„Çã">√ó</button>
            </div>
        </div>
        <div class="panel-content timeline-panel">
            <!-- „Çø„Ç§„É†„É©„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅØJavaScript„ÅßÁîüÊàê -->
        </div>
    </div>

    <!-- „É™„Çµ„Ç§„Ç∫„Éè„É≥„Éâ„É´ -->
    <div class="resize-handle resize-handle-left" data-direction="left"></div>
    <div class="resize-handle resize-handle-right" data-direction="right"></div>
    <div class="resize-handle resize-handle-timeline" data-direction="timeline"></div>
    

    <script type="module" src="script-coordinated.js"></script>
    
    <script>
        // Âè∏‰ª§Â°î„Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫„ÅÆÊõ¥Êñ∞
        document.addEventListener('DOMContentLoaded', () => {
            const statusDiv = document.getElementById('coordinator-status');
            
            // EventBus„Åß„Çπ„ÉÜ„Éº„Çø„ÇπÁõ£Ë¶ñ
            if (window.globalEventBus) {
                window.globalEventBus.on('coordinator:ready', () => {
                    statusDiv.textContent = 'üéØ Âè∏‰ª§Â°î„Ç∑„Çπ„ÉÜ„É†Ê∫ñÂÇôÂÆå‰∫Ü';
                    statusDiv.className = 'coordinator-status ready';
                    
                    // 3ÁßíÂæå„Å´ÈùûË°®Á§∫
                    setTimeout(() => {
                        statusDiv.style.opacity = '0.3';
                    }, 3000);
                });
                
                window.globalEventBus.on('coordinator:error', (data) => {
                    statusDiv.textContent = 'üéØ Âè∏‰ª§Â°î„Ç∑„Çπ„ÉÜ„É†„Ç®„É©„Éº';
                    statusDiv.className = 'coordinator-status error';
                });
                
                window.globalEventBus.on('coordinator:phase-completed', (data) => {
                    statusDiv.textContent = `üéØ Phase ${data.phase} ÂÆå‰∫Ü`;
                });
            }
        });
    </script>
</body>
</html>