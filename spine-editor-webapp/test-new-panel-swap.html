<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°ã—ã„ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1e1e1e;
            color: white;
            height: 100vh;
            display: grid;
            grid-template-areas: 
                "header header header"
                "outliner preview properties"
                "timeline timeline timeline";
            grid-template-columns: var(--outliner-width, 300px) 1fr var(--properties-width, 300px);
            grid-template-rows: 60px 1fr var(--timeline-height, 200px);
            gap: 1px;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .top-bar {
            grid-area: header;
            background: #2d2d2d;
            border-bottom: 1px solid #404040;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
        }
        
        .test-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .test-btn {
            background: #007acc;
            border: 1px solid #0099ff;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }
        
        .test-btn:hover {
            background: #0099ff;
            transform: translateY(-1px);
        }
        
        .test-status {
            background: #00ff88;
            color: black;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        /* ãƒ‘ãƒãƒ«å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .panel {
            background: #2d2d2d;
            border: 1px solid #404040;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        
        .panel:hover {
            border-color: #555555;
        }
        
        .panel-header {
            height: 32px;
            background: #3a3a3a;
            border-bottom: 1px solid #404040;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            cursor: move;
            user-select: none;
            transition: all 0.2s ease;
        }
        
        .panel-header:hover {
            background: #4a4a4a;
        }
        
        .panel-header.dragging {
            background: #007acc;
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(0, 122, 204, 0.4);
            z-index: 1000;
            position: relative;
        }
        
        .panel-title {
            font-size: 13px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .panel-content {
            flex: 1;
            padding: 15px;
            overflow: auto;
            position: relative;
        }
        
        /* å„ãƒ‘ãƒãƒ«é…ç½® */
        .panel-outliner { grid-area: outliner; }
        .panel-preview { 
            grid-area: preview;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        }
        .panel-properties { grid-area: properties; }
        .panel-timeline { grid-area: timeline; }
        
        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ç‰¹åˆ¥ã‚¹ã‚¿ã‚¤ãƒ« */
        .preview-area {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            text-align: center;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        
        .preview-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 25% 25%, rgba(0, 122, 204, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0, 255, 136, 0.1) 0%, transparent 50%);
            z-index: 1;
        }
        
        .preview-content {
            z-index: 2;
            position: relative;
        }
        
        /* ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢èª¬æ˜ */
        .drop-areas-guide {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 4px;
            font-size: 10px;
            max-width: 200px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 100;
        }
        
        .panel-content:hover .drop-areas-guide {
            opacity: 1;
        }
        
        /* ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ« */
        .debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 8px;
            font-size: 11px;
            max-width: 350px;
            opacity: 0.9;
            transition: opacity 0.3s ease;
            border: 1px solid #333;
            z-index: 2000;
        }
        
        .debug-panel:hover {
            opacity: 1;
        }
        
        .debug-panel h4 {
            color: #00ff88;
            margin-bottom: 10px;
            font-size: 13px;
        }
        
        .debug-info {
            margin: 4px 0;
            color: #cccccc;
            display: flex;
            justify-content: space-between;
        }
        
        .debug-info .label {
            color: #999;
        }
        
        .debug-info .value {
            color: #00ff88;
            font-weight: 500;
        }
        
        /* ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢ã®èª¬æ˜ */
        .drop-area-legend {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #333;
        }
        
        .drop-area-legend h5 {
            color: #ffdd00;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .legend-item {
            margin: 3px 0;
            font-size: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .legend-color.top { background: rgba(0, 255, 136, 0.6); }
        .legend-color.right { background: rgba(0, 122, 204, 0.6); }
        .legend-color.bottom { background: rgba(255, 187, 0, 0.6); }
        .legend-color.left { background: rgba(255, 107, 107, 0.6); }
        .legend-color.center { background: rgba(138, 43, 226, 0.6); }
        
        /* æ“ä½œã‚¬ã‚¤ãƒ‰ */
        .operation-guide {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.9);
            padding: 12px;
            border-radius: 8px;
            font-size: 11px;
            max-width: 300px;
            border: 1px solid #333;
        }
        
        .operation-guide h4 {
            color: #007acc;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .operation-step {
            margin: 4px 0;
            color: #ccc;
        }
        
        .step-number {
            color: #00ff88;
            font-weight: bold;
        }
        
        /* ä»•æ§˜æ›¸æº–æ‹ ã®èª¬æ˜ */
        .spec-compliance {
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px solid #333;
            font-size: 10px;
            color: #777;
        }
        
        .spec-compliance .highlight {
            color: #00ff88;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="top-bar">
        <div>
            <span style="font-weight: bold; color: #00ff88;">ğŸ¯ æ–°ã—ã„ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ </span>
            <span style="margin-left: 15px; color: #666; font-size: 11px;">ä»•æ§˜æ›¸æº–æ‹ ç‰ˆ</span>
        </div>
        
        <div class="test-controls">
            <button class="test-btn" onclick="resetLayout()">ğŸ“ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒªã‚»ãƒƒãƒˆ</button>
            <button class="test-btn" onclick="showSpecification()">ğŸ“‹ ä»•æ§˜æ›¸ç¢ºèª</button>
            <button class="test-btn" onclick="toggleLayoutManager()">ğŸ›ï¸ LayoutManageråˆ‡æ›¿</button>
            <div class="test-status" id="system-status">æ–°ã‚·ã‚¹ãƒ†ãƒ æº–å‚™ä¸­</div>
        </div>
    </div>

    <!-- ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼ãƒ‘ãƒãƒ« -->
    <div class="panel panel-outliner" data-panel="outliner">
        <div class="panel-header">
            <span class="panel-title">ğŸ“ ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼</span>
            <div style="font-size: 10px; color: #666;">ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½</div>
        </div>
        <div class="panel-content">
            <div class="drop-areas-guide">
                <strong style="color: #00ff88;">ğŸ“ ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢:</strong><br>
                <span style="color: #00ff88;">ä¸Šè¾º</span> - ä¸Šã«é…ç½®<br>
                <span style="color: #007acc;">å³è¾º</span> - å³ã«é…ç½®<br>
                <span style="color: #ffbb00;">ä¸‹è¾º</span> - ä¸‹ã«é…ç½®<br>
                <span style="color: #ff6b6b;">å·¦è¾º</span> - å·¦ã«é…ç½®<br>
                <span style="color: #8a2be2;">ä¸­å¤®</span> - å…¥ã‚Œæ›¿ãˆ
            </div>
            
            <div style="color: #999; font-size: 13px;">
                <p style="margin-bottom: 15px;">ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ </p>
                <div style="margin: 15px 0; padding: 10px; background: rgba(0, 122, 204, 0.1); border-radius: 4px;">
                    <strong style="color: #007acc;">ğŸ¯ ãƒ†ã‚¹ãƒˆæ‰‹é †:</strong>
                    <div style="margin-top: 8px; font-size: 11px; line-height: 1.4;">
                        1. ã“ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ãƒ‰ãƒ©ãƒƒã‚°<br>
                        2. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ«ä¸Šã«ç§»å‹•<br>
                        3. <span class="highlight">4ã¤ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢</span>ã‚’ç¢ºèª<br>
                        4. éš£æ¥ãƒã‚§ãƒƒã‚¯å‹•ä½œã‚’ç¢ºèª
                    </div>
                </div>
                <ul style="list-style: none; margin-left: 10px;">
                    <li style="margin: 5px 0;"><span style="color: #00ff88;">ğŸŸ¢</span> NewPanelSwapController.js</li>
                    <li style="margin: 5px 0;"><span style="color: #007acc;">ğŸ”µ</span> 4ã¤ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢åˆ¤å®š</li>
                    <li style="margin: 5px 0;"><span style="color: #ffdd00;">ğŸŸ¡</span> ç©ºç™½ã‚¼ãƒ­åŸå‰‡å®Ÿè£…</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ« -->
    <div class="panel panel-preview" data-panel="preview">
        <div class="panel-header">
            <span class="panel-title">ğŸ¬ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
            <div style="font-size: 10px; color: #666;">ãƒ‰ãƒ­ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</div>
        </div>
        <div class="panel-content">
            <div class="drop-areas-guide">
                <strong style="color: #ffdd00;">âš ï¸ éš£æ¥ãƒã‚§ãƒƒã‚¯:</strong><br>
                <span style="color: #ff6b6b;">å·¦è¾ºç„¡åŠ¹</span> - ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼ã¨éš£æ¥<br>
                <span style="color: #999;">å³è¾ºç„¡åŠ¹</span> - ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨éš£æ¥<br>
                <span style="color: #00ff88;">ä¸Šä¸‹è¾ºãƒ»ä¸­å¤®</span> - æœ‰åŠ¹
            </div>
            
            <div class="preview-area">
                <div class="preview-content">
                    <div style="font-size: 48px; margin-bottom: 15px;">ğŸ¯</div>
                    <p style="margin-bottom: 8px;">æ–°ã—ã„ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ </p>
                    <p style="font-size: 10px; color: #555;">4ã¤ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢å¯¾å¿œ</p>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(0, 255, 136, 0.1); border-radius: 8px;">
                        <strong style="color: #00ff88;">âœ¨ ä»•æ§˜æ›¸æº–æ‹ æ©Ÿèƒ½:</strong>
                        <ul style="text-align: left; margin-top: 10px; font-size: 11px;">
                            <li>ğŸ¯ 4ã¤ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢ï¼ˆä¸Šä¸‹å·¦å³+ä¸­å¤®ï¼‰</li>
                            <li>ğŸš« éš£æ¥ãƒã‚§ãƒƒã‚¯ï¼ˆéš£ã‚Šåˆã†è¾ºã¯ç„¡åŠ¹åŒ–ï¼‰</li>
                            <li>ğŸ“ ç©ºç™½ã‚¼ãƒ­åŸå‰‡ï¼ˆè‡ªå‹•æ‹¡å¼µï¼‰</li>
                            <li>ğŸ¨ ç›´æ„Ÿçš„é…ç½®ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ä½ç½®ï¼é…ç½®ä½ç½®ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ‘ãƒãƒ« -->
    <div class="panel panel-properties" data-panel="properties">
        <div class="panel-header">
            <span class="panel-title">âš™ï¸ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</span>
            <div style="font-size: 10px; color: #666;">è¨­å®šãƒ‘ãƒãƒ«</div>
        </div>
        <div class="panel-content">
            <div class="drop-areas-guide">
                <strong style="color: #ffdd00;">âš ï¸ éš£æ¥ãƒã‚§ãƒƒã‚¯:</strong><br>
                <span style="color: #999;">å·¦è¾ºç„¡åŠ¹</span> - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨éš£æ¥<br>
                <span style="color: #00ff88;">å³è¾ºãƒ»ä¸Šä¸‹è¾ºãƒ»ä¸­å¤®</span> - æœ‰åŠ¹
            </div>
            
            <div style="font-size: 12px;">
                <div style="margin-bottom: 15px; padding: 10px; background: rgba(138, 43, 226, 0.1); border-radius: 4px;">
                    <strong style="color: #8a2be2;">ğŸ“‹ ä»•æ§˜ç¢ºèª:</strong>
                    <ul style="margin-top: 8px; font-size: 11px; line-height: 1.4;">
                        <li>â€¢ <strong>é¢ã‚¨ãƒªã‚¢</strong>: 60%Ã—60%ã®ä¸­å¤®ã‚¨ãƒªã‚¢</li>
                        <li>â€¢ <strong>è¾ºã‚¨ãƒªã‚¢</strong>: å„è¾º20%ã®ç¯„å›²</li>
                        <li>â€¢ <strong>éš£æ¥ç„¡åŠ¹</strong>: æ—¢ã«éš£ã‚Šåˆã†è¾ºã¯ç„¡åŠ¹</li>
                        <li>â€¢ <strong>è‡ªå‹•æ‹¡å¼µ</strong>: ç©ºç™½ã‚¨ãƒªã‚¢ã¯è‡ªå‹•ã§åŸ‹ã‚ã‚‹</li>
                    </ul>
                </div>
                
                <div style="padding: 10px; background: rgba(255, 187, 0, 0.1); border-radius: 4px;">
                    <strong style="color: #ffbb00;">ğŸ§ª ãƒ†ã‚¹ãƒˆä¾‹:</strong>
                    <ul style="margin-top: 8px; font-size: 11px; line-height: 1.4;">
                        <li>â€¢ ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸Šè¾º</li>
                        <li>â€¢ çµæœ: å·¦å´ãŒä¸Šä¸‹2åˆ†å‰²</li>
                        <li>â€¢ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: ç¸¦é•·ã®ã¾ã¾</li>
                        <li>â€¢ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³: æ¨ªé•·ã®ã¾ã¾</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ‘ãƒãƒ« -->
    <div class="panel panel-timeline" data-panel="timeline">
        <div class="panel-header">
            <span class="panel-title">â° ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</span>
            <div style="font-size: 10px; color: #666;">æ¨ªé•·ãƒ‘ãƒãƒ«</div>
        </div>
        <div class="panel-content">
            <div class="drop-areas-guide">
                <strong style="color: #00ff88;">âœ… å…¨ã‚¨ãƒªã‚¢æœ‰åŠ¹:</strong><br>
                ä¸Šä¸‹å·¦å³ã®è¾ºãƒ»ä¸­å¤®ã‚¨ãƒªã‚¢<br>
                <span style="color: #666;">ï¼ˆä»–ãƒ‘ãƒãƒ«ã¨éš£æ¥ãªã—ï¼‰</span>
            </div>
            
            <div style="text-align: center; color: #666;">
                <div style="font-size: 32px; margin-bottom: 10px;">â¯ï¸</div>
                <p>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡ã‚¨ãƒªã‚¢</p>
                <p style="font-size: 10px; margin-top: 5px;">æ¨ªé•·ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»å…¨ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢æœ‰åŠ¹</p>
                
                <div style="margin-top: 15px; padding: 10px; background: rgba(255, 107, 107, 0.1); border-radius: 4px;">
                    <strong style="color: #ff6b6b;">ğŸ¯ é‡è¦ãªä»•æ§˜:</strong>
                    <div style="font-size: 11px; margin-top: 5px; line-height: 1.4;">
                        ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¯åŸºæœ¬çš„ã«æ¨ªé•·ã‚’ç¶­æŒã€‚<br>
                        ä»–ãƒ‘ãƒãƒ«ã¨ã®åˆ†å‰²æ™‚ã‚‚æ¨ªå¹…ã¯ç”»é¢å…¨ä½“ã‚’ã‚«ãƒãƒ¼ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ« -->
    <div class="debug-panel">
        <h4>ğŸ” æ–°ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–</h4>
        <div class="debug-info">
            <span class="label">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹:</span>
            <span class="value" id="system-state">åˆæœŸåŒ–ä¸­</span>
        </div>
        <div class="debug-info">
            <span class="label">ãƒ‰ãƒ©ãƒƒã‚°çŠ¶æ…‹:</span>
            <span class="value" id="drag-state">å¾…æ©Ÿä¸­</span>
        </div>
        <div class="debug-info">
            <span class="label">ç¾åœ¨ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢:</span>
            <span class="value" id="current-drop-area">ãªã—</span>
        </div>
        <div class="debug-info">
            <span class="label">ãƒã‚¤ãƒ©ã‚¤ãƒˆæ•°:</span>
            <span class="value" id="highlight-count">5</span>
        </div>
        
        <div class="drop-area-legend">
            <h5>ğŸ¨ ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢è‰²åˆ†ã‘</h5>
            <div class="legend-item">
                <div class="legend-color top"></div>
                <span>ä¸Šè¾º - ä¸Šã«é…ç½®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color right"></div>
                <span>å³è¾º - å³ã«é…ç½®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color bottom"></div>
                <span>ä¸‹è¾º - ä¸‹ã«é…ç½®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color left"></div>
                <span>å·¦è¾º - å·¦ã«é…ç½®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color center"></div>
                <span>ä¸­å¤® - å…¥ã‚Œæ›¿ãˆ</span>
            </div>
        </div>
    </div>
    
    <!-- æ“ä½œã‚¬ã‚¤ãƒ‰ -->
    <div class="operation-guide">
        <h4>ğŸ“– æ“ä½œã‚¬ã‚¤ãƒ‰ï¼ˆä»•æ§˜æ›¸æº–æ‹ ï¼‰</h4>
        <div class="operation-step"><span class="step-number">1.</span> ãƒ‘ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹</div>
        <div class="operation-step"><span class="step-number">2.</span> ä»–ã®ãƒ‘ãƒãƒ«ä¸Šã«ç§»å‹•</div>
        <div class="operation-step"><span class="step-number">3.</span> 5ã¤ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢ãŒè‰²åˆ†ã‘è¡¨ç¤º</div>
        <div class="operation-step"><span class="step-number">4.</span> éš£æ¥ã‚¨ãƒªã‚¢ã¯è‡ªå‹•çš„ã«ç„¡åŠ¹åŒ–</div>
        <div class="operation-step"><span class="step-number">5.</span> ESCã‚­ãƒ¼ã§ãƒ‰ãƒ©ãƒƒã‚°ã‚­ãƒ£ãƒ³ã‚»ãƒ«</div>
        
        <div class="spec-compliance">
            <strong class="highlight">ğŸ¯ ä»•æ§˜æ›¸æº–æ‹ ãƒã‚¤ãƒ³ãƒˆ:</strong><br>
            â€¢ ç©ºç™½ã‚¼ãƒ­åŸå‰‡ - ç©ºã„ãŸç©ºé–“ã¯éš£æ¥ãƒ‘ãƒãƒ«ãŒæ‹¡å¼µ<br>
            â€¢ éš£æ¥ãƒã‚§ãƒƒã‚¯ - æ—¢ã«éš£ã‚Šåˆã†è¾ºã¯ç„¡åŠ¹åŒ–<br>
            â€¢ ç›´æ„Ÿçš„é…ç½® - ãƒ‰ãƒ­ãƒƒãƒ—ã—ãŸä½ç½®ã«ãã®ã¾ã¾é…ç½®
        </div>
    </div>

    <!-- æ–°ã—ã„ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ èª­ã¿è¾¼ã¿ -->
    <script type="module">
        import { NewPanelSwapController } from './micromodules/ui/NewPanelSwapController.js';
        
        // ç°¡æ˜“ãƒ‘ãƒãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
        class TestPanelManager {
            getAllPanels() {
                return ['outliner', 'preview', 'properties', 'timeline'];
            }
            
            findPanel(panelId) {
                const element = document.querySelector(`.panel[data-panel="${panelId}"]`);
                return element ? { element, id: panelId } : null;
            }
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
        let newPanelSwapController = null;
        let panelManager = null;
        
        async function initializeNewSystem() {
            console.log('ğŸ¯ æ–°ã—ã„ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–é–‹å§‹');
            
            try {
                // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
                panelManager = new TestPanelManager();
                newPanelSwapController = new NewPanelSwapController(panelManager);
                
                // åˆæœŸåŒ–
                const result = await newPanelSwapController.initialize();
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
                window.newPanelSwapSystem = {
                    controller: newPanelSwapController,
                    panelManager: panelManager
                };
                
                // ãƒ‡ãƒãƒƒã‚°ç›£è¦–é–‹å§‹
                startDebugMonitoring();
                
                console.log(`âœ… æ–°ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†: ${result}å€‹ã®ãƒ‘ãƒãƒ«`);
                updateSystemStatus('æº–å‚™å®Œäº†', 'ready');
                
            } catch (error) {
                console.error('âŒ æ–°ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                updateSystemStatus('ã‚¨ãƒ©ãƒ¼', 'error');
            }
        }
        
        // ãƒ‡ãƒãƒƒã‚°ç›£è¦–
        function startDebugMonitoring() {
            setInterval(() => {
                if (newPanelSwapController) {
                    const debugInfo = newPanelSwapController.getDebugInfo();
                    updateDebugDisplay(debugInfo);
                }
            }, 100);
        }
        
        // ãƒ‡ãƒãƒƒã‚°è¡¨ç¤ºæ›´æ–°
        function updateDebugDisplay(debugInfo) {
            document.getElementById('system-state').textContent = debugInfo.state;
            document.getElementById('drag-state').textContent = 
                debugInfo.isDragging ? `ãƒ‰ãƒ©ãƒƒã‚°ä¸­: ${debugInfo.draggedPanel}` : 'å¾…æ©Ÿä¸­';
            document.getElementById('current-drop-area').textContent = 
                debugInfo.currentDropArea || 'ãªã—';
            document.getElementById('highlight-count').textContent = 
                debugInfo.highlightCount.toString();
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹æ›´æ–°
        function updateSystemStatus(status, state) {
            const statusElement = document.getElementById('system-status');
            statusElement.textContent = status;
            
            if (state === 'ready') {
                statusElement.style.background = '#00ff88';
                statusElement.style.color = 'black';
            } else if (state === 'error') {
                statusElement.style.background = '#ff6b6b';
                statusElement.style.color = 'white';
            }
        }
        
        // ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½
        window.resetLayout = function() {
            // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
            document.body.style.setProperty('grid-template-areas', 
                '"header header header" "outliner preview properties" "timeline timeline timeline"', 'important');
            document.body.style.setProperty('grid-template-columns', 
                'var(--outliner-width, 300px) 1fr var(--properties-width, 300px)', 'important');
            document.body.style.setProperty('grid-template-rows', 
                '60px 1fr var(--timeline-height, 200px)', 'important');
            
            // å„ãƒ‘ãƒãƒ«ã®grid-areaã‚’ãƒªã‚»ãƒƒãƒˆ
            document.querySelector('.panel-outliner').style.gridArea = 'outliner';
            document.querySelector('.panel-preview').style.gridArea = 'preview';
            document.querySelector('.panel-properties').style.gridArea = 'properties';
            document.querySelector('.panel-timeline').style.gridArea = 'timeline';
            
            console.log('ğŸ“ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒªã‚»ãƒƒãƒˆå®Œäº†');
        };
        
        window.showSpecification = function() {
            alert('ğŸ“‹ ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸\n\n' +
                'ğŸ¯ åŸºæœ¬åŸå‰‡:\n' +
                'â€¢ ç©ºç™½ã‚¼ãƒ­åŸå‰‡ - ç©ºç™½ã‚¨ãƒªã‚¢ã¯ä½œã‚‰ãªã„\n' +
                'â€¢ 4ã¤ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢ - ä¸Šä¸‹å·¦å³ã®è¾º+ä¸­å¤®é¢\n' +
                'â€¢ éš£æ¥ãƒã‚§ãƒƒã‚¯ - éš£ã‚Šåˆã†è¾ºã¯ç„¡åŠ¹åŒ–\n\n' +
                'ğŸ”„ å‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³:\n' +
                'â€¢ é¢ã‚¨ãƒªã‚¢: å˜ç´”å…¥ã‚Œæ›¿ãˆ\n' +
                'â€¢ è¾ºã‚¨ãƒªã‚¢: æŒ‡å®šã•ã‚ŒãŸä½ç½®ã«é…ç½®\n' +
                'â€¢ è‡ªå‹•æ‹¡å¼µ: ç©ºã„ãŸç©ºé–“ã¯éš£æ¥ãƒ‘ãƒãƒ«ãŒåŸ‹ã‚ã‚‹\n\n' +
                'è©³ç´°: docs/PANEL_SWAP_SPECIFICATION.md');
        };
        
        // ğŸš¨ LayoutManageråˆ¶å¾¡æ©Ÿèƒ½
        window.toggleLayoutManager = function() {
            const current = localStorage.getItem('spine-editor-enable-layout-manager') !== 'false';
            const newState = !current;
            
            localStorage.setItem('spine-editor-enable-layout-manager', newState ? 'true' : 'false');
            
            console.log(`ğŸ›ï¸ LayoutManager: ${current ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'} â†’ ${newState ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}`);
            
            alert(`ğŸ›ï¸ LayoutManagerè¨­å®šå¤‰æ›´\n\n` +
                `ç¾åœ¨: ${current ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}\n` +
                `å¤‰æ›´å¾Œ: ${newState ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}\n\n` +
                `âš ï¸ ã“ã®å¤‰æ›´ã‚’é©ç”¨ã™ã‚‹ã«ã¯ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆF5ï¼‰ã—ã¦ãã ã•ã„ã€‚\n\n` +
                `ğŸš¨ ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆãƒ†ã‚¹ãƒˆæ™‚ã¯ã€Œç„¡åŠ¹ã€ã«è¨­å®šã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚`);
        };
        
        // ãƒ‡ãƒãƒƒã‚°ç”¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
        window.getNewSystemDebugInfo = function() {
            return newPanelSwapController?.getDebugInfo();
        };
        
        // åˆæœŸåŒ–å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ§ª æ–°ã—ã„ãƒ‘ãƒãƒ«å…¥ã‚Œæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆé–‹å§‹');
            initializeNewSystem();
        });
    </script>
</body>
</html>